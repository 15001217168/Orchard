/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

/*! nanoScrollerJS - v0.8.7 - 2015
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2015 James Florentino; Licensed MIT */
(function(factory) {
  if (typeof define === 'function' && define.amd) {
    return define(['jquery'], function($) {
      return factory($, window, document);
    });
  } else if (typeof exports === 'object') {
    return module.exports = factory(require('jquery'), window, document);
  } else {
    return factory(jQuery, window, document);
  }
})(function($, window, document) {
  "use strict";
  var BROWSER_IS_IE7, BROWSER_SCROLLBAR_WIDTH, DOMSCROLL, DOWN, DRAG, ENTER, KEYDOWN, KEYUP, MOUSEDOWN, MOUSEENTER, MOUSEMOVE, MOUSEUP, MOUSEWHEEL, NanoScroll, PANEDOWN, RESIZE, SCROLL, SCROLLBAR, TOUCHMOVE, UP, WHEEL, cAF, defaults, getBrowserScrollbarWidth, hasTransform, isFFWithBuggyScrollbar, rAF, transform, _elementStyle, _prefixStyle, _vendor;
  defaults = {

    /**
      a classname for the pane element.
      @property paneClass
      @type String
      @default 'nano-pane'
     */
    paneClass: 'nano-pane',

    /**
      a classname for the slider element.
      @property sliderClass
      @type String
      @default 'nano-slider'
     */
    sliderClass: 'nano-slider',

    /**
      a classname for the content element.
      @property contentClass
      @type String
      @default 'nano-content'
     */
    contentClass: 'nano-content',

    /**
      a setting to enable native scrolling in iOS devices.
      @property iOSNativeScrolling
      @type Boolean
      @default false
     */
    iOSNativeScrolling: false,

    /**
      a setting to prevent the rest of the page being
      scrolled when user scrolls the `.content` element.
      @property preventPageScrolling
      @type Boolean
      @default false
     */
    preventPageScrolling: false,

    /**
      a setting to disable binding to the resize event.
      @property disableResize
      @type Boolean
      @default false
     */
    disableResize: false,

    /**
      a setting to make the scrollbar always visible.
      @property alwaysVisible
      @type Boolean
      @default false
     */
    alwaysVisible: false,

    /**
      a default timeout for the `flash()` method.
      @property flashDelay
      @type Number
      @default 1500
     */
    flashDelay: 1500,

    /**
      a minimum height for the `.slider` element.
      @property sliderMinHeight
      @type Number
      @default 20
     */
    sliderMinHeight: 20,

    /**
      a maximum height for the `.slider` element.
      @property sliderMaxHeight
      @type Number
      @default null
     */
    sliderMaxHeight: null,

    /**
      an alternate document context.
      @property documentContext
      @type Document
      @default null
     */
    documentContext: null,

    /**
      an alternate window context.
      @property windowContext
      @type Window
      @default null
     */
    windowContext: null
  };

  /**
    @property SCROLLBAR
    @type String
    @static
    @final
    @private
   */
  SCROLLBAR = 'scrollbar';

  /**
    @property SCROLL
    @type String
    @static
    @final
    @private
   */
  SCROLL = 'scroll';

  /**
    @property MOUSEDOWN
    @type String
    @final
    @private
   */
  MOUSEDOWN = 'mousedown';

  /**
    @property MOUSEENTER
    @type String
    @final
    @private
   */
  MOUSEENTER = 'mouseenter';

  /**
    @property MOUSEMOVE
    @type String
    @static
    @final
    @private
   */
  MOUSEMOVE = 'mousemove';

  /**
    @property MOUSEWHEEL
    @type String
    @final
    @private
   */
  MOUSEWHEEL = 'mousewheel';

  /**
    @property MOUSEUP
    @type String
    @static
    @final
    @private
   */
  MOUSEUP = 'mouseup';

  /**
    @property RESIZE
    @type String
    @final
    @private
   */
  RESIZE = 'resize';

  /**
    @property DRAG
    @type String
    @static
    @final
    @private
   */
  DRAG = 'drag';

  /**
    @property ENTER
    @type String
    @static
    @final
    @private
   */
  ENTER = 'enter';

  /**
    @property UP
    @type String
    @static
    @final
    @private
   */
  UP = 'up';

  /**
    @property PANEDOWN
    @type String
    @static
    @final
    @private
   */
  PANEDOWN = 'panedown';

  /**
    @property DOMSCROLL
    @type String
    @static
    @final
    @private
   */
  DOMSCROLL = 'DOMMouseScroll';

  /**
    @property DOWN
    @type String
    @static
    @final
    @private
   */
  DOWN = 'down';

  /**
    @property WHEEL
    @type String
    @static
    @final
    @private
   */
  WHEEL = 'wheel';

  /**
    @property KEYDOWN
    @type String
    @static
    @final
    @private
   */
  KEYDOWN = 'keydown';

  /**
    @property KEYUP
    @type String
    @static
    @final
    @private
   */
  KEYUP = 'keyup';

  /**
    @property TOUCHMOVE
    @type String
    @static
    @final
    @private
   */
  TOUCHMOVE = 'touchmove';

  /**
    @property BROWSER_IS_IE7
    @type Boolean
    @static
    @final
    @private
   */
  BROWSER_IS_IE7 = window.navigator.appName === 'Microsoft Internet Explorer' && /msie 7./i.test(window.navigator.appVersion) && window.ActiveXObject;

  /**
    @property BROWSER_SCROLLBAR_WIDTH
    @type Number
    @static
    @default null
    @private
   */
  BROWSER_SCROLLBAR_WIDTH = null;
  rAF = window.requestAnimationFrame;
  cAF = window.cancelAnimationFrame;
  _elementStyle = document.createElement('div').style;
  _vendor = (function() {
    var i, transform, vendor, vendors, _i, _len;
    vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'];
    for (i = _i = 0, _len = vendors.length; _i < _len; i = ++_i) {
      vendor = vendors[i];
      transform = vendors[i] + 'ransform';
      if (transform in _elementStyle) {
        return vendors[i].substr(0, vendors[i].length - 1);
      }
    }
    return false;
  })();
  _prefixStyle = function(style) {
    if (_vendor === false) {
      return false;
    }
    if (_vendor === '') {
      return style;
    }
    return _vendor + style.charAt(0).toUpperCase() + style.substr(1);
  };
  transform = _prefixStyle('transform');
  hasTransform = transform !== false;

  /**
    Returns browser's native scrollbar width
    @method getBrowserScrollbarWidth
    @return {Number} the scrollbar width in pixels
    @static
    @private
   */
  getBrowserScrollbarWidth = function() {
    var outer, outerStyle, scrollbarWidth;
    outer = document.createElement('div');
    outerStyle = outer.style;
    outerStyle.position = 'absolute';
    outerStyle.width = '100px';
    outerStyle.height = '100px';
    outerStyle.overflow = SCROLL;
    outerStyle.top = '-9999px';
    document.body.appendChild(outer);
    scrollbarWidth = outer.offsetWidth - outer.clientWidth;
    document.body.removeChild(outer);
    return scrollbarWidth;
  };
  isFFWithBuggyScrollbar = function() {
    var isOSXFF, ua, version;
    ua = window.navigator.userAgent;
    isOSXFF = /(?=.+Mac OS X)(?=.+Firefox)/.test(ua);
    if (!isOSXFF) {
      return false;
    }
    version = /Firefox\/\d{2}\./.exec(ua);
    if (version) {
      version = version[0].replace(/\D+/g, '');
    }
    return isOSXFF && +version > 23;
  };

  /**
    @class NanoScroll
    @param element {HTMLElement|Node} the main element
    @param options {Object} nanoScroller's options
    @constructor
   */
  NanoScroll = (function() {
    function NanoScroll(el, options) {
      this.el = el;
      this.options = options;
      BROWSER_SCROLLBAR_WIDTH || (BROWSER_SCROLLBAR_WIDTH = getBrowserScrollbarWidth());
      this.$el = $(this.el);
      this.doc = $(this.options.documentContext || document);
      this.win = $(this.options.windowContext || window);
      this.body = this.doc.find('body');
      this.$content = this.$el.children("." + this.options.contentClass);
      this.$content.attr('tabindex', this.options.tabIndex || 0);
      this.content = this.$content[0];
      this.previousPosition = 0;
      if (this.options.iOSNativeScrolling && (this.el.style.WebkitOverflowScrolling != null)) {
        this.nativeScrolling();
      } else {
        this.generate();
      }
      this.createEvents();
      this.addEvents();
      this.reset();
    }


    /**
      Prevents the rest of the page being scrolled
      when user scrolls the `.nano-content` element.
      @method preventScrolling
      @param event {Event}
      @param direction {String} Scroll direction (up or down)
      @private
     */

    NanoScroll.prototype.preventScrolling = function(e, direction) {
      if (!this.isActive) {
        return;
      }
      if (e.type === DOMSCROLL) {
        if (direction === DOWN && e.originalEvent.detail > 0 || direction === UP && e.originalEvent.detail < 0) {
          e.preventDefault();
        }
      } else if (e.type === MOUSEWHEEL) {
        if (!e.originalEvent || !e.originalEvent.wheelDelta) {
          return;
        }
        if (direction === DOWN && e.originalEvent.wheelDelta < 0 || direction === UP && e.originalEvent.wheelDelta > 0) {
          e.preventDefault();
        }
      }
    };


    /**
      Enable iOS native scrolling
      @method nativeScrolling
      @private
     */

    NanoScroll.prototype.nativeScrolling = function() {
      this.$content.css({
        WebkitOverflowScrolling: 'touch'
      });
      this.iOSNativeScrolling = true;
      this.isActive = true;
    };


    /**
      Updates those nanoScroller properties that
      are related to current scrollbar position.
      @method updateScrollValues
      @private
     */

    NanoScroll.prototype.updateScrollValues = function() {
      var content, direction;
      content = this.content;
      this.maxScrollTop = content.scrollHeight - content.clientHeight;
      this.prevScrollTop = this.contentScrollTop || 0;
      this.contentScrollTop = content.scrollTop;
      direction = this.contentScrollTop > this.previousPosition ? "down" : this.contentScrollTop < this.previousPosition ? "up" : "same";
      this.previousPosition = this.contentScrollTop;
      if (direction !== "same") {
        this.$el.trigger('update', {
          position: this.contentScrollTop,
          maximum: this.maxScrollTop,
          direction: direction
        });
      }
      if (!this.iOSNativeScrolling) {
        this.maxSliderTop = this.paneHeight - this.sliderHeight;
        this.sliderTop = this.maxScrollTop === 0 ? 0 : this.contentScrollTop * this.maxSliderTop / this.maxScrollTop;
      }
    };


    /**
      Updates CSS styles for current scroll position.
      Uses CSS 2d transfroms and `window.requestAnimationFrame` if available.
      @method setOnScrollStyles
      @private
     */

    NanoScroll.prototype.setOnScrollStyles = function() {
      var cssValue;
      if (hasTransform) {
        cssValue = {};
        cssValue[transform] = "translate(0, " + this.sliderTop + "px)";
      } else {
        cssValue = {
          top: this.sliderTop
        };
      }
      if (rAF) {
        if (cAF && this.scrollRAF) {
          cAF(this.scrollRAF);
        }
        this.scrollRAF = rAF((function(_this) {
          return function() {
            _this.scrollRAF = null;
            return _this.slider.css(cssValue);
          };
        })(this));
      } else {
        this.slider.css(cssValue);
      }
    };


    /**
      Creates event related methods
      @method createEvents
      @private
     */

    NanoScroll.prototype.createEvents = function() {
      this.events = {
        down: (function(_this) {
          return function(e) {
            _this.isBeingDragged = true;
            _this.offsetY = e.pageY - _this.slider.offset().top;
            if (!_this.slider.is(e.target)) {
              _this.offsetY = 0;
            }
            _this.pane.addClass('active');
            _this.doc.bind(MOUSEMOVE, _this.events[DRAG]).bind(MOUSEUP, _this.events[UP]);
            _this.body.bind(MOUSEENTER, _this.events[ENTER]);
            return false;
          };
        })(this),
        drag: (function(_this) {
          return function(e) {
            _this.sliderY = e.pageY - _this.$el.offset().top - _this.paneTop - (_this.offsetY || _this.sliderHeight * 0.5);
            _this.scroll();
            if (_this.contentScrollTop >= _this.maxScrollTop && _this.prevScrollTop !== _this.maxScrollTop) {
              _this.$el.trigger('scrollend');
            } else if (_this.contentScrollTop === 0 && _this.prevScrollTop !== 0) {
              _this.$el.trigger('scrolltop');
            }
            return false;
          };
        })(this),
        up: (function(_this) {
          return function(e) {
            _this.isBeingDragged = false;
            _this.pane.removeClass('active');
            _this.doc.unbind(MOUSEMOVE, _this.events[DRAG]).unbind(MOUSEUP, _this.events[UP]);
            _this.body.unbind(MOUSEENTER, _this.events[ENTER]);
            return false;
          };
        })(this),
        resize: (function(_this) {
          return function(e) {
            _this.reset();
          };
        })(this),
        panedown: (function(_this) {
          return function(e) {
            _this.sliderY = (e.offsetY || e.originalEvent.layerY) - (_this.sliderHeight * 0.5);
            _this.scroll();
            _this.events.down(e);
            return false;
          };
        })(this),
        scroll: (function(_this) {
          return function(e) {
            _this.updateScrollValues();
            if (_this.isBeingDragged) {
              return;
            }
            if (!_this.iOSNativeScrolling) {
              _this.sliderY = _this.sliderTop;
              _this.setOnScrollStyles();
            }
            if (e == null) {
              return;
            }
            if (_this.contentScrollTop >= _this.maxScrollTop) {
              if (_this.options.preventPageScrolling) {
                _this.preventScrolling(e, DOWN);
              }
              if (_this.prevScrollTop !== _this.maxScrollTop) {
                _this.$el.trigger('scrollend');
              }
            } else if (_this.contentScrollTop === 0) {
              if (_this.options.preventPageScrolling) {
                _this.preventScrolling(e, UP);
              }
              if (_this.prevScrollTop !== 0) {
                _this.$el.trigger('scrolltop');
              }
            }
          };
        })(this),
        wheel: (function(_this) {
          return function(e) {
            var delta;
            if (e == null) {
              return;
            }
            delta = e.delta || e.wheelDelta || (e.originalEvent && e.originalEvent.wheelDelta) || -e.detail || (e.originalEvent && -e.originalEvent.detail);
            if (delta) {
              _this.sliderY += -delta / 3;
            }
            _this.scroll();
            return false;
          };
        })(this),
        enter: (function(_this) {
          return function(e) {
            var _ref;
            if (!_this.isBeingDragged) {
              return;
            }
            if ((e.buttons || e.which) !== 1) {
              return (_ref = _this.events)[UP].apply(_ref, arguments);
            }
          };
        })(this)
      };
    };


    /**
      Adds event listeners with jQuery.
      @method addEvents
      @private
     */

    NanoScroll.prototype.addEvents = function() {
      var events;
      this.removeEvents();
      events = this.events;
      if (!this.options.disableResize) {
        this.win.bind(RESIZE, events[RESIZE]);
      }
      if (!this.iOSNativeScrolling) {
        this.slider.bind(MOUSEDOWN, events[DOWN]);
        this.pane.bind(MOUSEDOWN, events[PANEDOWN]).bind("" + MOUSEWHEEL + " " + DOMSCROLL, events[WHEEL]);
      }
      this.$content.bind("" + SCROLL + " " + MOUSEWHEEL + " " + DOMSCROLL + " " + TOUCHMOVE, events[SCROLL]);
    };


    /**
      Removes event listeners with jQuery.
      @method removeEvents
      @private
     */

    NanoScroll.prototype.removeEvents = function() {
      var events;
      events = this.events;
      this.win.unbind(RESIZE, events[RESIZE]);
      if (!this.iOSNativeScrolling) {
        this.slider.unbind();
        this.pane.unbind();
      }
      this.$content.unbind("" + SCROLL + " " + MOUSEWHEEL + " " + DOMSCROLL + " " + TOUCHMOVE, events[SCROLL]);
    };


    /**
      Generates nanoScroller's scrollbar and elements for it.
      @method generate
      @chainable
      @private
     */

    NanoScroll.prototype.generate = function() {
      var contentClass, cssRule, currentPadding, options, pane, paneClass, sliderClass;
      options = this.options;
      paneClass = options.paneClass, sliderClass = options.sliderClass, contentClass = options.contentClass;
      if (!(pane = this.$el.children("." + paneClass)).length && !pane.children("." + sliderClass).length) {
        this.$el.append("<div class=\"" + paneClass + "\"><div class=\"" + sliderClass + "\" /></div>");
      }
      this.pane = this.$el.children("." + paneClass);
      this.slider = this.pane.find("." + sliderClass);
      if (BROWSER_SCROLLBAR_WIDTH === 0 && isFFWithBuggyScrollbar()) {
        currentPadding = window.getComputedStyle(this.content, null).getPropertyValue('padding-right').replace(/[^0-9.]+/g, '');
        cssRule = {
          right: -14,
          paddingRight: +currentPadding + 14
        };
      } else if (BROWSER_SCROLLBAR_WIDTH) {
        cssRule = {
          right: -BROWSER_SCROLLBAR_WIDTH
        };
        this.$el.addClass('has-scrollbar');
      }
      if (cssRule != null) {
        this.$content.css(cssRule);
      }
      return this;
    };


    /**
      @method restore
      @private
     */

    NanoScroll.prototype.restore = function() {
      this.stopped = false;
      if (!this.iOSNativeScrolling) {
        this.pane.show();
      }
      this.addEvents();
    };


    /**
      Resets nanoScroller's scrollbar.
      @method reset
      @chainable
      @example
          $(".nano").nanoScroller();
     */

    NanoScroll.prototype.reset = function() {
      var content, contentHeight, contentPosition, contentStyle, contentStyleOverflowY, paneBottom, paneHeight, paneOuterHeight, paneTop, parentMaxHeight, right, sliderHeight;
      if (this.iOSNativeScrolling) {
        this.contentHeight = this.content.scrollHeight;
        return;
      }
      if (!this.$el.find("." + this.options.paneClass).length) {
        this.generate().stop();
      }
      if (this.stopped) {
        this.restore();
      }
      content = this.content;
      contentStyle = content.style;
      contentStyleOverflowY = contentStyle.overflowY;
      if (BROWSER_IS_IE7) {
        this.$content.css({
          height: this.$content.height()
        });
      }
      contentHeight = content.scrollHeight + BROWSER_SCROLLBAR_WIDTH;
      parentMaxHeight = parseInt(this.$el.css("max-height"), 10);
      if (parentMaxHeight > 0) {
        this.$el.height("");
        this.$el.height(content.scrollHeight > parentMaxHeight ? parentMaxHeight : content.scrollHeight);
      }
      paneHeight = this.pane.outerHeight(false);
      paneTop = parseInt(this.pane.css('top'), 10);
      paneBottom = parseInt(this.pane.css('bottom'), 10);
      paneOuterHeight = paneHeight + paneTop + paneBottom;
      sliderHeight = Math.round(paneOuterHeight / contentHeight * paneHeight);
      if (sliderHeight < this.options.sliderMinHeight) {
        sliderHeight = this.options.sliderMinHeight;
      } else if ((this.options.sliderMaxHeight != null) && sliderHeight > this.options.sliderMaxHeight) {
        sliderHeight = this.options.sliderMaxHeight;
      }
      if (contentStyleOverflowY === SCROLL && contentStyle.overflowX !== SCROLL) {
        sliderHeight += BROWSER_SCROLLBAR_WIDTH;
      }
      this.maxSliderTop = paneOuterHeight - sliderHeight;
      this.contentHeight = contentHeight;
      this.paneHeight = paneHeight;
      this.paneOuterHeight = paneOuterHeight;
      this.sliderHeight = sliderHeight;
      this.paneTop = paneTop;
      this.slider.height(sliderHeight);
      this.events.scroll();
      this.pane.show();
      this.isActive = true;
      if ((content.scrollHeight === content.clientHeight) || (this.pane.outerHeight(true) >= content.scrollHeight && contentStyleOverflowY !== SCROLL)) {
        this.pane.hide();
        this.isActive = false;
      } else if (this.el.clientHeight === content.scrollHeight && contentStyleOverflowY === SCROLL) {
        this.slider.hide();
      } else {
        this.slider.show();
      }
      this.pane.css({
        opacity: (this.options.alwaysVisible ? 1 : ''),
        visibility: (this.options.alwaysVisible ? 'visible' : '')
      });
      contentPosition = this.$content.css('position');
      if (contentPosition === 'static' || contentPosition === 'relative') {
        right = parseInt(this.$content.css('right'), 10);
        if (right) {
          this.$content.css({
            right: '',
            marginRight: right
          });
        }
      }
      return this;
    };


    /**
      @method scroll
      @private
      @example
          $(".nano").nanoScroller({ scroll: 'top' });
     */

    NanoScroll.prototype.scroll = function() {
      if (!this.isActive) {
        return;
      }
      this.sliderY = Math.max(0, this.sliderY);
      this.sliderY = Math.min(this.maxSliderTop, this.sliderY);
      this.$content.scrollTop(this.maxScrollTop * this.sliderY / this.maxSliderTop);
      if (!this.iOSNativeScrolling) {
        this.updateScrollValues();
        this.setOnScrollStyles();
      }
      return this;
    };


    /**
      Scroll at the bottom with an offset value
      @method scrollBottom
      @param offsetY {Number}
      @chainable
      @example
          $(".nano").nanoScroller({ scrollBottom: value });
     */

    NanoScroll.prototype.scrollBottom = function(offsetY) {
      if (!this.isActive) {
        return;
      }
      this.$content.scrollTop(this.contentHeight - this.$content.height() - offsetY).trigger(MOUSEWHEEL);
      this.stop().restore();
      return this;
    };


    /**
      Scroll at the top with an offset value
      @method scrollTop
      @param offsetY {Number}
      @chainable
      @example
          $(".nano").nanoScroller({ scrollTop: value });
     */

    NanoScroll.prototype.scrollTop = function(offsetY) {
      if (!this.isActive) {
        return;
      }
      this.$content.scrollTop(+offsetY).trigger(MOUSEWHEEL);
      this.stop().restore();
      return this;
    };


    /**
      Scroll to an element
      @method scrollTo
      @param node {Node} A node to scroll to.
      @chainable
      @example
          $(".nano").nanoScroller({ scrollTo: $('#a_node') });
     */

    NanoScroll.prototype.scrollTo = function(node) {
      if (!this.isActive) {
        return;
      }
      this.scrollTop(this.$el.find(node).get(0).offsetTop);
      return this;
    };


    /**
      To stop the operation.
      This option will tell the plugin to disable all event bindings and hide the gadget scrollbar from the UI.
      @method stop
      @chainable
      @example
          $(".nano").nanoScroller({ stop: true });
     */

    NanoScroll.prototype.stop = function() {
      if (cAF && this.scrollRAF) {
        cAF(this.scrollRAF);
        this.scrollRAF = null;
      }
      this.stopped = true;
      this.removeEvents();
      if (!this.iOSNativeScrolling) {
        this.pane.hide();
      }
      return this;
    };


    /**
      Destroys nanoScroller and restores browser's native scrollbar.
      @method destroy
      @chainable
      @example
          $(".nano").nanoScroller({ destroy: true });
     */

    NanoScroll.prototype.destroy = function() {
      if (!this.stopped) {
        this.stop();
      }
      if (!this.iOSNativeScrolling && this.pane.length) {
        this.pane.remove();
      }
      if (BROWSER_IS_IE7) {
        this.$content.height('');
      }
      this.$content.removeAttr('tabindex');
      if (this.$el.hasClass('has-scrollbar')) {
        this.$el.removeClass('has-scrollbar');
        this.$content.css({
          right: ''
        });
      }
      return this;
    };


    /**
      To flash the scrollbar gadget for an amount of time defined in plugin settings (defaults to 1,5s).
      Useful if you want to show the user (e.g. on pageload) that there is more content waiting for him.
      @method flash
      @chainable
      @example
          $(".nano").nanoScroller({ flash: true });
     */

    NanoScroll.prototype.flash = function() {
      if (this.iOSNativeScrolling) {
        return;
      }
      if (!this.isActive) {
        return;
      }
      this.reset();
      this.pane.addClass('flashed');
      setTimeout((function(_this) {
        return function() {
          _this.pane.removeClass('flashed');
        };
      })(this), this.options.flashDelay);
      return this;
    };

    return NanoScroll;

  })();
  $.fn.nanoScroller = function(settings) {
    return this.each(function() {
      var options, scrollbar;
      if (!(scrollbar = this.nanoscroller)) {
        options = $.extend({}, defaults, settings);
        this.nanoscroller = scrollbar = new NanoScroll(this, options);
      }
      if (settings && typeof settings === "object") {
        $.extend(scrollbar.options, settings);
        if (settings.scrollBottom != null) {
          return scrollbar.scrollBottom(settings.scrollBottom);
        }
        if (settings.scrollTop != null) {
          return scrollbar.scrollTop(settings.scrollTop);
        }
        if (settings.scrollTo) {
          return scrollbar.scrollTo(settings.scrollTo);
        }
        if (settings.scroll === 'bottom') {
          return scrollbar.scrollBottom(0);
        }
        if (settings.scroll === 'top') {
          return scrollbar.scrollTop(0);
        }
        if (settings.scroll && settings.scroll instanceof $) {
          return scrollbar.scrollTo(settings.scroll);
        }
        if (settings.stop) {
          return scrollbar.stop();
        }
        if (settings.destroy) {
          return scrollbar.destroy();
        }
        if (settings.flash) {
          return scrollbar.flash();
        }
      }
      return scrollbar.reset();
    });
  };
  $.fn.nanoScroller.Constructor = NanoScroll;
});

//# sourceMappingURL=jquery.nanoscroller.js.map

/*!
 * orchard-admin v1.3.0 (http://foxythemes.net/themes/amaretti)
 * Copyright 2014-2016 Foxy Themes 
 */
var App = (function () {
  'use strict';

  //Basic Config
  var config = {
    assetsPath: 'assets',
    imgPath: 'img',
    jsPath: 'js',
    libsPath: 'lib',
    leftSidebarSlideSpeed: 200,
    enableSwipe: true,
    swipeTreshold: 100,
    scrollTop: true,
    openLeftSidebarClass: 'open-left-sidebar',
    openRightSidebarClass: 'open-right-sidebar',
    removeLeftSidebarClass: 'or-nosidebar-left',
    openLeftSidebarOnClick: false,
    openLeftSidebarOnClickClass: 'or-left-sidebar--click',
    transitionClass: 'or-animate',
    openSidebarDelay: 400,
    syncSubMenuOnHover: false
  };

  var colors = {};
  var body = $("body");
  var wrapper = $(".or-wrapper");
  var leftSidebar = $(".or-left-sidebar");
  var rightSidebar = $(".or-right-sidebar");
  var openSidebar = false;
  var isRtl = $('html').hasClass('rtl');

  //Get the template css colors into js vars
  function getColor( c ){
    var tmp = $("<div>", { class: c }).appendTo("body");
    var color = tmp.css("background-color");
    tmp.remove();

    return color;
  }

  //Core private functions
  function leftSidebarInit(){

    var firstAnchor = $(".sidebar-elements > li > a", leftSidebar);
    var openLeftSidebarOnClick = leftSidebar.hasClass( config.openLeftSidebarOnClickClass ) || config.openLeftSidebarOnClick ? true : false;

    function syncSubMenu( item ){
      var elements = $(".sidebar-elements > li", leftSidebar);

      if( typeof item !== "undefined" ) {
        elements = item;
      }

      $.each( elements, function(i, v){

        var title = $(this).find("> a span").html();
        var ul = $(this).find("> ul");
        var subEls = $("> li", ul);
        var title = $('<li class="title">' + title + '</li>');
        var subContainer = $('<li class="nav-items"><div class="or-scroller nano"><div class="content nano-content"><ul></ul></div></div></li>');

        if( !ul.find("> li.title").length > 0 ){
         ul.prepend( title );
          subEls.appendTo( subContainer.find(".content ul") );
          subContainer.appendTo( ul );
        }
      });
    }

    /*Create sub menu elements*/
      syncSubMenu();

    function oSidebar(){
      body.addClass( config.openLeftSidebarClass + " " + config.transitionClass );
      openSidebar = true;
    }

    function cSidebar(){
      body.removeClass( config.openLeftSidebarClass ).addClass( config.transitionClass );
      sidebarDelay();
    }

    function openSubMenu( el, event, click ){
      var li = $(el).parent();
      var orScroller = li.find(".or-scroller");
      var subMenu = li.find("> ul");
      var isOpen = li.hasClass('open');

      //Show sub menu element
      if( !$.isXs() ){
        $("ul.visible", leftSidebar).removeClass("visible").parent().removeClass('open');

        //Add classes to create a delay on sub menu close action after mouse leave
        if( !click || ( click && !isOpen ) ){
          li.addClass('open');
          subMenu.addClass("visible");
        }
        subMenu.removeClass("hide");
      }

      //Renew nanoscroller
      orScroller.nanoScroller({ destroy: true });
      orScroller.nanoScroller();

      //Check if event is click or hover
      if( click ){
        //Stop click event when li has sub-menu
        if( li.hasClass('parent') ){
          event.preventDefault();
        }
      }else{
        //Create sub-menu elements
        if( config.syncSubMenuOnHover ){
          syncSubMenu( li );
        }
      }
    }

    /*Open-Sidebar when click on topbar button*/
      $('.or-toggle-left-sidebar').on("click", function(e){
        if( openSidebar && body.hasClass( config.openLeftSidebarClass ) ){
          cSidebar();
        }else if( !openSidebar ){
          oSidebar();
        }
        e.stopPropagation();
        e.preventDefault();
      });

    /*Close sidebar on click outside*/
      $(document).on("touchstart mousedown",function(e){
        if ( !$(e.target).closest(leftSidebar).length && body.hasClass( config.openLeftSidebarClass ) ) {
          cSidebar();
        }else if( !$(e.target).closest(leftSidebar).length && !$.isXs() ){
          $("ul.visible", leftSidebar).removeClass("visible").parent().removeClass('open');
        }
      });

    /*Open sub-menu functionality*/
      if( openLeftSidebarOnClick ){

        /*Open sub-menu on click*/
        firstAnchor.on('click',function( e ){
          if( !$.isXs() ){
            openSubMenu(this, e, true); 
          }
        });

      }else{

        /*Open sub-menu on hover*/
        firstAnchor.on('mouseover',function( e ){
          openSubMenu(this, e, false); 
        });

        /*Open sub-menu on click (fix for touch devices)*/
        firstAnchor.on('touchstart',function( e ){
          if( !$.isXs() ){
            openSubMenu(this, e, true);
          }
        });

        /*Sub-menu delay on mouse leave*/
        firstAnchor.on('mouseleave',function(){
          var _self = $(this);
          var _li = _self.parent();
          var subMenu = _li.find("> ul");
          if( !$.isXs() ){
            //If mouse is over sub menu attach an additional mouseleave event to submenu
            if ( subMenu.length > 0 ){
              setTimeout(function(){
                if( subMenu.is(':hover') ){
                  subMenu.on('mouseleave',function(){
                    setTimeout(function(){
                      if( !_self.is(':hover') ){
                        subMenu.removeClass('visible');
                        _li.removeClass('open');
                      }
                    }, 300);
                  });
                }else{
                  subMenu.removeClass('visible');
                  _li.removeClass('open');
                }
              }, 300);
            }else{
              _li.removeClass('open');
            }
          }
        });
      }

    /*Open sub-menu on small devices*/
      $(".sidebar-elements li a", leftSidebar).on("click",function( e ){
        if( $.isXs() ){
          var $el = $(this), $open, $speed = config.leftSidebarSlideSpeed;
          var $li = $el.parent();
          var $subMenu = $el.next();

          $open = $li.siblings(".open");

          if( $open ){
            $open.find('> ul:visible').slideUp({ duration: $speed, complete: function(){
              $open.toggleClass('open');
              $(this).removeAttr('style').removeClass('visible');
            }});
          }

          if( $li.hasClass('open') ){
            $subMenu.slideUp({ duration: $speed, complete: function(){
              $li.toggleClass('open');
              $(this).removeAttr('style').removeClass('visible');
            }});
          }else{
            $subMenu.slideDown({ duration: $speed, complete: function(){
              $li.toggleClass('open');
              $(this).removeAttr('style').addClass('visible');
            }});
          }

          if( $el.next().is('ul') ){
            e.preventDefault();
          }
        }else{
          //Close sub-menu on anchor click
          if( !openLeftSidebarOnClick ){
            var subMenu = $(".sidebar-elements > li > ul:visible", leftSidebar);
            subMenu.addClass('hide');
          }
        }
      });

    /*Calculate sidebar tree active & open classes*/
      $("li.active", leftSidebar).parents(".parent").addClass("active");

    /*Nanoscroller when left sidebar is fixed*/
      if( wrapper.hasClass("or-fixed-sidebar") ){
        var lsc = $(".or-left-sidebar > .content");
        lsc.wrap('<div class="or-scroller nano"></div>');
        lsc.addClass("nano-content");
        lsc.parent().nanoScroller();
      }

    /*On window resize check for small resolution classes to remove them*/
      $(window).resize(function () {
        waitForFinalEvent(function(){
          if( !$.isXs() ){
            var scroller = $(".or-scroller");
            $('.nano-content', scroller).css({'margin-right':0});
            scroller.nanoScroller({ destroy: true });
            scroller.nanoScroller();
          }
        }, 500, "am_check_phone_classes");
      });
  }

  function rightSidebarInit(){

    function oSidebar(){
      body.addClass( config.openRightSidebarClass  + " " + config.transitionClass );
      openSidebar = true;
    }

    function cSidebar(){
      body.removeClass( config.openRightSidebarClass ).addClass( config.transitionClass );
      sidebarDelay();
    }

    if( rightSidebar.length > 0 ){
      /*Open-Sidebar when click on topbar button*/
      $('.or-toggle-right-sidebar').on("click", function(e){
        if( openSidebar && body.hasClass( config.openRightSidebarClass ) ){
          cSidebar();
        }else if( !openSidebar ){
          oSidebar();
        }
        
        e.stopPropagation();
        e.preventDefault();
      });

      /*Close sidebar on click outside*/
      $( document ).on("mousedown touchstart",function( e ){
        if ( !$( e.target ).closest( rightSidebar ).length && body.hasClass( config.openRightSidebarClass ) ) {
          cSidebar();
        }
      });
    }
  }

  function sidebarDelay(){
    openSidebar = true;
    setTimeout(function(){
      openSidebar = false;
    }, config.openSidebarDelay );
  }

  function sidebarSwipe(){
    /*Open sidedar on swipe*/
    var cancelEvent = false;

    function openLeftSidebar(){
      if( !openSidebar && !wrapper.hasClass( config.removeLeftSidebarClass ) ){
        body.addClass( config.openLeftSidebarClass + " " + config.transitionClass );
        openSidebar = true;
      }
    }

    function openRightSidebar(){
      if( !openSidebar && rightSidebar.length > 0 ){
        body.addClass( config.openRightSidebarClass + " " + config.transitionClass );
        openSidebar = true;
      }
    }

    wrapper.swipe( {
      allowPageScroll: "vertical",
      preventDefaultEvents: false,
      fallbackToMouseEvents: false,
      swipeRight: function(e) {
        if( isRtl ) {
          openRightSidebar();
        } else {
          openLeftSidebar();
        }
      },
      swipeLeft: function(e){
        if( isRtl ) {
          openLeftSidebar();
        } else {
          openRightSidebar();
        }
      },
      swipeStatus: function(e, p){
        switch( p ){
          case 'start':
            if( openSidebar ){
              cancelEvent = true;
            }
          break;
          case 'end':
            if( cancelEvent ){
              cancelEvent = false;
              return false;
            }
          break;
          case 'cancel':
            cancelEvent = false;
          break;
        }
      },
      threshold: config.swipeTreshold
    });
  }

  function chatWidget(){
    var chat = $(".or-right-sidebar .tab-pane.chat");
    var contactsEl = $(".chat-contacts", chat);
    var conversationEl = $(".chat-window", chat);
    var messagesContainer = $(".chat-messages", conversationEl);
    var messagesList = $(".content > ul", messagesContainer);
    var messagesScrollContent = $(".nano-content", messagesContainer);
    var chatInputContainer = $(".chat-input", conversationEl);
    var chatInput = $("input", chatInputContainer);
    var chatInputSendButton = $(".send-msg", chatInputContainer);

    function openChatWindow(){
      if( !chat.hasClass("chat-opened") ){
        chat.addClass("chat-opened");
        $(".or-scroller", messagesContainer).nanoScroller();
      }
    }

    function closeChatWindow(){
      if( chat.hasClass("chat-opened") ){
        chat.removeClass("chat-opened");
      }
    }

    /*Open Conversation Window when click on chat user*/
    $(".user a", contactsEl).on('click',function( e ){
      $(".or-scroller", contactsEl).nanoScroller({ stop: true });
      openChatWindow();
      e.preventDefault();
    });

    /*Close chat conv window*/
    $(".title .return", conversationEl).on('click',function( e ){
      closeChatWindow();
      scrollerInit();
    });

    /*Send message*/
    function sendMsg(msg, self){
      var $message = $('<li class="' + ((self)?'self':'friend') + '"></li>');

      if( msg != '' ){
        $('<div class="msg">' + msg + '</div>').appendTo($message);
        $message.appendTo(messagesList);

        messagesScrollContent.stop().animate({
          'scrollTop': messagesScrollContent.prop("scrollHeight")
        }, 900, 'swing');

        scrollerInit();
      }
    }

    /*Send msg when click on 'send' button or press 'Enter'*/
      chatInput.keypress(function(event){
        var keycode = (event.keyCode ? event.keyCode : event.which);
        var msg = $(this).val();

        if(keycode == '13'){
          sendMsg(msg, true);
          $(this).val("");
        }
        event.stopPropagation();
      });

      chatInputSendButton.on('click',function(){
        var msg = chatInput.val();
        sendMsg(msg, true);
        chatInput.val("");
      });
  }

  function scrollerInit(){
    $(".or-scroller").nanoScroller();
  }

  function scrollTopButton(){
    var offset = 220;
    var duration = 500;
    var button = $('<div class="or-scroll-top"></div>');
    button.appendTo("body");
    
    $(window).on('scroll',function() {
      if ( $(this).scrollTop() > offset ) {
        button.fadeIn(duration);
      } else {
        button.fadeOut(duration);
      }
    });
  
    button.on('touchstart mouseup',function( e ) {
      $( 'html, body' ).animate({ scrollTop: 0 }, duration);
      e.preventDefault();
    });
  }

  //Wait for final event on window resize
  var waitForFinalEvent = (function () {
    var timers = {};
    return function (callback, ms, uniqueId) {
      if (!uniqueId) {
        uniqueId = "x1x2x3x4";
      }
      if (timers[uniqueId]) {
        clearTimeout (timers[uniqueId]);
      }
      timers[uniqueId] = setTimeout(callback, ms);
    };
  })();

  return {
    //General data
    conf: config,
    color: colors,

    //Init function
    init: function (options) {
      
      // Get the main elements when document is ready
      wrapper = $(".or-wrapper");
      leftSidebar = $(".or-left-sidebar");
      rightSidebar = $(".or-right-sidebar");
      body = $("body");

      //Extends basic config with options
        $.extend( config, options );

      /*Left Sidebar*/
        leftSidebarInit();

      /*FastClick on mobile*/
        FastClick.attach(document.body);
      
      /*Right Sidebar*/
        rightSidebarInit();
        chatWidget();

      /*Sidebars Swipe*/
        if( config.enableSwipe ){
          sidebarSwipe();
        }

      /*Body transition effect*/
        leftSidebar.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
          body.removeClass( config.transitionClass );
        });

      /*Scroll Top button*/
        if( config.scrollTop ){
          scrollTopButton();
        }

      /*Get colors*/
        colors.primary = getColor('clr-primary');
        colors.success = getColor('clr-success');
        colors.info    = getColor('clr-info');
        colors.warning = getColor('clr-warning');
        colors.danger  = getColor('clr-danger');
        colors.alt1    = getColor('clr-alt1');
        colors.alt2    = getColor('clr-alt2');
        colors.alt3    = getColor('clr-alt3');
        colors.alt4    = getColor('clr-alt4');

      //Prevent Connections Dropdown closes on click
        $(".or-connections").on("click",function( e ){
          e.stopPropagation();
        });

      //Nanoscroller init function
        scrollerInit();

      /*Bind plugins on hidden elements*/
      /*Dropdown shown event*/
        $('.dropdown').on('shown.bs.dropdown', function () {
          $(".or-scroller").nanoScroller();
        });
        
      /*Tabs refresh hidden elements*/
        $('.nav-tabs').on('shown.bs.tab', function (e) {
          $(".or-scroller").nanoScroller();
        });


      /*Tooltips*/
        $('[data-toggle="tooltip"]').tooltip();
      
      /*Popover*/
        $('[data-toggle="popover"]').popover();

      /*Bootstrap modal scroll top fix*/
        $('.modal').on('show.bs.modal', function(){
          $("html").addClass('or-modal-open');
        });

        $('.modal').on('hidden.bs.modal', function(){
          $("html").removeClass('or-modal-open');
        });
    },

    //Methods
    closeSubMenu: function(){
      var subMenu = $(".sidebar-elements > li > ul:visible", leftSidebar);
      subMenu.addClass('hide');
      setTimeout(function(){
        subMenu.removeClass('hide');
      }, 50);
    }
  };
 
})();
//FastClick
function FastClick(a,b){"use strict";function c(a,b){return function(){return a.apply(b,arguments)}}var d;if(b=b||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=b.touchBoundary||10,this.layer=a,this.tapDelay=b.tapDelay||200,!FastClick.notNeeded(a)){for(var e=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],f=this,g=0,h=e.length;g<h;g++)f[e[g]]=c(f[e[g]],f);deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(d=a.onclick,a.addEventListener("click",function(a){d(a)},!1),a.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d,e,f;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),f=b.changedTouches[0],e=document.createEvent("MouseEvents"),e.initMouseEvent("mousedown",!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),e.forwardedTouchEvent=!0,a.dispatchEvent(e),d=document.createEvent("MouseEvents"),d.initMouseEvent("mouseup",!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),d.forwardedTouchEvent=!0,a.dispatchEvent(d),c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c},FastClick.prototype.onTouchMove=function(a){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0)},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return!(!deviceIsIOS||deviceIsIOS4||(e=g.fastClickScrollParent,!e||e.fastClickLastScrollTop===e.scrollTop))||(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return!this.targetElement||(!!a.forwardedTouchEvent||(!a.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1))))},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail||(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c,d;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(d=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),d[1]>=10&&d[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction},FastClick.attach=function(a,b){"use strict";return new FastClick(a,b)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;
// TinyColor v1.2.1
// https://github.com/bgrins/TinyColor
// 2015-08-13, Brian Grinstead, MIT License
!function(){function tinycolor(color,opts){if(color=color?color:"",opts=opts||{},color instanceof tinycolor)return color;if(!(this instanceof tinycolor))return new tinycolor(color,opts);var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format,this._gradientType=opts.gradientType,this._r<1&&(this._r=mathRound(this._r)),this._g<1&&(this._g=mathRound(this._g)),this._b<1&&(this._b=mathRound(this._b)),this._ok=rgb.ok,this._tc_id=tinyCounter++}function inputToRGB(color){var rgb={r:0,g:0,b:0},a=1,ok=!1,format=!1;return"string"==typeof color&&(color=stringInputToObject(color)),"object"==typeof color&&(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")?(rgb=rgbToRgb(color.r,color.g,color.b),ok=!0,format="%"===String(color.r).substr(-1)?"prgb":"rgb"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")?(color.s=convertToPercentage(color.s),color.v=convertToPercentage(color.v),rgb=hsvToRgb(color.h,color.s,color.v),ok=!0,format="hsv"):color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")&&(color.s=convertToPercentage(color.s),color.l=convertToPercentage(color.l),rgb=hslToRgb(color.h,color.s,color.l),ok=!0,format="hsl"),color.hasOwnProperty("a")&&(a=color.a)),a=boundAlpha(a),{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}function rgbToRgb(r,g,b){return{r:255*bound01(r,255),g:255*bound01(g,255),b:255*bound01(b,255)}}function rgbToHsl(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,l:l}}function hslToRgb(h,s,l){function hue2rgb(p,q,t){return 0>t&&(t+=1),t>1&&(t-=1),1/6>t?p+6*(q-p)*t:.5>t?q:2/3>t?p+6*(q-p)*(2/3-t):p}var r,g,b;if(h=bound01(h,360),s=bound01(s,100),l=bound01(l,100),0===s)r=g=b=l;else{var q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return{r:255*r,g:255*g,b:255*b}}function rgbToHsv(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,v:v}}function hsvToRgb(h,s,v){h=6*bound01(h,360),s=bound01(s,100),v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:255*r,g:255*g,b:255*b}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)?hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0):hex.join("")}function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("")}function desaturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s-=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function saturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s+=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l+=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function brighten(color,amount){amount=0===amount?0:amount||10;var rgb=tinycolor(color).toRgb();return rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100)))),rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100)))),rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100)))),tinycolor(rgb)}function darken(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l-=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl(),hue=(mathRound(hsl.h)+amount)%360;return hsl.h=0>hue?360+hue:hue,tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();return hsl.h=(hsl.h+180)%360,tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6,slices=slices||30;var hsl=tinycolor(color).toHsl(),part=360/slices,ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;)hsl.h=(hsl.h+part)%360,ret.push(tinycolor(hsl));return ret}function monochromatic(color,results){results=results||6;for(var hsv=tinycolor(color).toHsv(),h=hsv.h,s=hsv.s,v=hsv.v,ret=[],modification=1/results;results--;)ret.push(tinycolor({h:h,s:s,v:v})),v=(v+modification)%1;return ret}function flip(o){var flipped={};for(var i in o)o.hasOwnProperty(i)&&(flipped[o[i]]=i);return flipped}function boundAlpha(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function bound01(n,max){isOnePointZero(n)&&(n="100%");var processPercent=isPercentage(n);return n=mathMin(max,mathMax(0,parseFloat(n))),processPercent&&(n=parseInt(n*max,10)/100),math.abs(n-max)<1e-6?1:n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function isOnePointZero(n){return"string"==typeof n&&-1!=n.indexOf(".")&&1===parseFloat(n)}function isPercentage(n){return"string"==typeof n&&-1!=n.indexOf("%")}function pad2(c){return 1==c.length?"0"+c:""+c}function convertToPercentage(n){return 1>=n&&(n=100*n+"%"),n}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}function stringInputToObject(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var named=!1;if(names[color])color=names[color],named=!0;else if("transparent"==color)return{r:0,g:0,b:0,a:0,format:"name"};var match;return(match=matchers.rgb.exec(color))?{r:match[1],g:match[2],b:match[3]}:(match=matchers.rgba.exec(color))?{r:match[1],g:match[2],b:match[3],a:match[4]}:(match=matchers.hsl.exec(color))?{h:match[1],s:match[2],l:match[3]}:(match=matchers.hsla.exec(color))?{h:match[1],s:match[2],l:match[3],a:match[4]}:(match=matchers.hsv.exec(color))?{h:match[1],s:match[2],v:match[3]}:(match=matchers.hsva.exec(color))?{h:match[1],s:match[2],v:match[3],a:match[4]}:(match=matchers.hex8.exec(color))?{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"}:(match=matchers.hex6.exec(color))?{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"}:(match=matchers.hex3.exec(color))?{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"}:!1}function validateWCAG2Parms(parms){var level,size;return parms=parms||{level:"AA",size:"small"},level=(parms.level||"AA").toUpperCase(),size=(parms.size||"small").toLowerCase(),"AA"!==level&&"AAA"!==level&&(level="AA"),"small"!==size&&"large"!==size&&(size="small"),{level:level,size:size}}var trimLeft=/^[\s,#]+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(299*rgb.r+587*rgb.g+114*rgb.b)/1e3},getLuminance:function(){var RsRGB,GsRGB,BsRGB,R,G,B,rgb=this.toRgb();return RsRGB=rgb.r/255,GsRGB=rgb.g/255,BsRGB=rgb.b/255,R=.03928>=RsRGB?RsRGB/12.92:Math.pow((RsRGB+.055)/1.055,2.4),G=.03928>=GsRGB?GsRGB/12.92:Math.pow((GsRGB+.055)/1.055,2.4),B=.03928>=BsRGB?BsRGB/12.92:Math.pow((BsRGB+.055)/1.055,2.4),.2126*R+.7152*G+.0722*B},setAlpha:function(value){return this._a=boundAlpha(value),this._roundA=mathRound(100*this._a)/100,this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:360*hsv.h,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b),h=mathRound(360*hsv.h),s=mathRound(100*hsv.s),v=mathRound(100*hsv.v);return 1==this._a?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:360*hsl.h,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b),h=mathRound(360*hsl.h),s=mathRound(100*hsl.s),l=mathRound(100*hsl.l);return 1==this._a?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:mathRound(100*bound01(this._r,255))+"%",g:mathRound(100*bound01(this._g,255))+"%",b:mathRound(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%)":"rgba("+mathRound(100*bound01(this._r,255))+"%, "+mathRound(100*bound01(this._g,255))+"%, "+mathRound(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function(secondColor){var hex8String="#"+rgbaToHex(this._r,this._g,this._b,this._a),secondHex8String=hex8String,gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=!1,hasAlpha=this._a<1&&this._a>=0,needsAlphaFormat=!formatSet&&hasAlpha&&("hex"===format||"hex6"===format||"hex3"===format||"name"===format);return needsAlphaFormat?"name"===format&&0===this._a?this.toName():this.toRgbString():("rgb"===format&&(formattedString=this.toRgbString()),"prgb"===format&&(formattedString=this.toPercentageRgbString()),("hex"===format||"hex6"===format)&&(formattedString=this.toHexString()),"hex3"===format&&(formattedString=this.toHexString(!0)),"hex8"===format&&(formattedString=this.toHex8String()),"name"===format&&(formattedString=this.toName()),"hsl"===format&&(formattedString=this.toHslString()),"hsv"===format&&(formattedString=this.toHsvString()),formattedString||this.toHexString())},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));return this._r=color._r,this._g=color._g,this._b=color._b,this.setAlpha(color._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(color,opts){if("object"==typeof color){var newColor={};for(var i in color)color.hasOwnProperty(i)&&(newColor[i]="a"===i?color[i]:convertToPercentage(color[i]));color=newColor}return tinycolor(color,opts)},tinycolor.equals=function(color1,color2){return color1&&color2?tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString():!1},tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})},tinycolor.mix=function(color1,color2,amount){amount=0===amount?0:amount||50;var w1,rgb1=tinycolor(color1).toRgb(),rgb2=tinycolor(color2).toRgb(),p=amount/100,w=2*p-1,a=rgb2.a-rgb1.a;w1=-1==w*a?w:(w+a)/(1+w*a),w1=(w1+1)/2;var w2=1-w1,rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba)},tinycolor.readability=function(color1,color2){var c1=tinycolor(color1),c2=tinycolor(color2);return(Math.max(c1.getLuminance(),c2.getLuminance())+.05)/(Math.min(c1.getLuminance(),c2.getLuminance())+.05)},tinycolor.isReadable=function(color1,color2,wcag2){var wcag2Parms,out,readability=tinycolor.readability(color1,color2);switch(out=!1,wcag2Parms=validateWCAG2Parms(wcag2),wcag2Parms.level+wcag2Parms.size){case"AAsmall":case"AAAlarge":out=readability>=4.5;break;case"AAlarge":out=readability>=3;break;case"AAAsmall":out=readability>=7}return out},tinycolor.mostReadable=function(baseColor,colorList,args){var readability,includeFallbackColors,level,size,bestColor=null,bestScore=0;args=args||{},includeFallbackColors=args.includeFallbackColors,level=args.level,size=args.size;for(var i=0;i<colorList.length;i++)readability=tinycolor.readability(baseColor,colorList[i]),readability>bestScore&&(bestScore=readability,bestColor=tinycolor(colorList[i]));return tinycolor.isReadable(baseColor,bestColor,{level:level,size:size})||!includeFallbackColors?bestColor:(args.includeFallbackColors=!1,tinycolor.mostReadable(baseColor,["#fff","#000"],args))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names),matchers=function(){var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")",PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=tinycolor:"function"==typeof define&&define.amd?define(function(){return tinycolor}):window.tinycolor=tinycolor}();
/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
!function(factory){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],factory):factory("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function($){"use strict";function init(options){return!options||void 0!==options.allowPageScroll||void 0===options.swipe&&void 0===options.swipeStatus||(options.allowPageScroll=NONE),void 0!==options.click&&void 0===options.tap&&(options.tap=options.click),options||(options={}),options=$.extend({},$.fn.swipe.defaults,options),this.each(function(){var $this=$(this),plugin=$this.data(PLUGIN_NS);plugin||(plugin=new TouchSwipe(this,options),$this.data(PLUGIN_NS,plugin))})}function TouchSwipe(element,options){function touchStart(jqEvent){if(!(getTouchInProgress()||$(jqEvent.target).closest(options.excludedElements,$element).length>0)){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(!event.pointerType||"mouse"!=event.pointerType||0!=options.fallbackToMouseEvents){var ret,touches=event.touches,evt=touches?touches[0]:event;return phase=PHASE_START,touches?fingerCount=touches.length:options.preventDefaultEvents!==!1&&jqEvent.preventDefault(),distance=0,direction=null,currentDirection=null,pinchDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,maximumsMap=createMaximumsData(),cancelMultiFingerRelease(),createFingerData(0,evt),!touches||fingerCount===options.fingers||options.fingers===ALL_FINGERS||hasPinches()?(startTime=getTimeStamp(),2==fingerCount&&(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)),(options.swipeStatus||options.pinchStatus)&&(ret=triggerHandler(event,phase))):ret=!1,ret===!1?(phase=PHASE_CANCEL,triggerHandler(event,phase),ret):(options.hold&&(holdTimeout=setTimeout($.proxy(function(){$element.trigger("hold",[event.target]),options.hold&&(ret=options.hold.call($element,event,event.target))},this),options.longTapThreshold)),setTouchInProgress(!0),null)}}}function touchMove(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(phase!==PHASE_END&&phase!==PHASE_CANCEL&&!inMultiFingerRelease()){var ret,touches=event.touches,evt=touches?touches[0]:event,currentFinger=updateFingerData(evt);if(endTime=getTimeStamp(),touches&&(fingerCount=touches.length),options.hold&&clearTimeout(holdTimeout),phase=PHASE_MOVE,2==fingerCount&&(0==startTouchesDistance?(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)):(updateFingerData(touches[1]),endTouchesDistance=calculateTouchesDistance(fingerData[0].end,fingerData[1].end),pinchDirection=calculatePinchDirection(fingerData[0].end,fingerData[1].end)),pinchZoom=calculatePinchZoom(startTouchesDistance,endTouchesDistance),pinchDistance=Math.abs(startTouchesDistance-endTouchesDistance)),fingerCount===options.fingers||options.fingers===ALL_FINGERS||!touches||hasPinches()){if(direction=calculateDirection(currentFinger.start,currentFinger.end),currentDirection=calculateDirection(currentFinger.last,currentFinger.end),validateDefaultEvent(jqEvent,currentDirection),distance=calculateDistance(currentFinger.start,currentFinger.end),duration=calculateDuration(),setMaxDistance(direction,distance),ret=triggerHandler(event,phase),!options.triggerOnTouchEnd||options.triggerOnTouchLeave){var inBounds=!0;if(options.triggerOnTouchLeave){var bounds=getbounds(this);inBounds=isInBounds(currentFinger.end,bounds)}!options.triggerOnTouchEnd&&inBounds?phase=getNextPhase(PHASE_MOVE):options.triggerOnTouchLeave&&!inBounds&&(phase=getNextPhase(PHASE_END)),phase!=PHASE_CANCEL&&phase!=PHASE_END||triggerHandler(event,phase)}}else phase=PHASE_CANCEL,triggerHandler(event,phase);ret===!1&&(phase=PHASE_CANCEL,triggerHandler(event,phase))}}function touchEnd(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent,touches=event.touches;if(touches){if(touches.length&&!inMultiFingerRelease())return startMultiFingerRelease(event),!0;if(touches.length&&inMultiFingerRelease())return!0}return inMultiFingerRelease()&&(fingerCount=fingerCountAtRelease),endTime=getTimeStamp(),duration=calculateDuration(),didSwipeBackToCancel()||!validateSwipeDistance()?(phase=PHASE_CANCEL,triggerHandler(event,phase)):options.triggerOnTouchEnd||options.triggerOnTouchEnd===!1&&phase===PHASE_MOVE?(options.preventDefaultEvents!==!1&&jqEvent.preventDefault(),phase=PHASE_END,triggerHandler(event,phase)):!options.triggerOnTouchEnd&&hasTap()?(phase=PHASE_END,triggerHandlerForGesture(event,phase,TAP)):phase===PHASE_MOVE&&(phase=PHASE_CANCEL,triggerHandler(event,phase)),setTouchInProgress(!1),null}function touchCancel(){fingerCount=0,endTime=0,startTime=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,cancelMultiFingerRelease(),setTouchInProgress(!1)}function touchLeave(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;options.triggerOnTouchLeave&&(phase=getNextPhase(PHASE_END),triggerHandler(event,phase))}function removeListeners(){$element.unbind(START_EV,touchStart),$element.unbind(CANCEL_EV,touchCancel),$element.unbind(MOVE_EV,touchMove),$element.unbind(END_EV,touchEnd),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave),setTouchInProgress(!1)}function getNextPhase(currentPhase){var nextPhase=currentPhase,validTime=validateSwipeTime(),validDistance=validateSwipeDistance(),didCancel=didSwipeBackToCancel();return!validTime||didCancel?nextPhase=PHASE_CANCEL:!validDistance||currentPhase!=PHASE_MOVE||options.triggerOnTouchEnd&&!options.triggerOnTouchLeave?!validDistance&&currentPhase==PHASE_END&&options.triggerOnTouchLeave&&(nextPhase=PHASE_CANCEL):nextPhase=PHASE_END,nextPhase}function triggerHandler(event,phase){var ret,touches=event.touches;return(didSwipe()||hasSwipes())&&(ret=triggerHandlerForGesture(event,phase,SWIPE)),(didPinch()||hasPinches())&&ret!==!1&&(ret=triggerHandlerForGesture(event,phase,PINCH)),didDoubleTap()&&ret!==!1?ret=triggerHandlerForGesture(event,phase,DOUBLE_TAP):didLongTap()&&ret!==!1?ret=triggerHandlerForGesture(event,phase,LONG_TAP):didTap()&&ret!==!1&&(ret=triggerHandlerForGesture(event,phase,TAP)),phase===PHASE_CANCEL&&touchCancel(event),phase===PHASE_END&&(touches?touches.length||touchCancel(event):touchCancel(event)),ret}function triggerHandlerForGesture(event,phase,gesture){var ret;if(gesture==SWIPE){if($element.trigger("swipeStatus",[phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection]),options.swipeStatus&&(ret=options.swipeStatus.call($element,event,phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection),ret===!1))return!1;if(phase==PHASE_END&&validateSwipe()){if(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),$element.trigger("swipe",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipe&&(ret=options.swipe.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection),ret===!1))return!1;switch(direction){case LEFT:$element.trigger("swipeLeft",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeLeft&&(ret=options.swipeLeft.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case RIGHT:$element.trigger("swipeRight",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeRight&&(ret=options.swipeRight.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case UP:$element.trigger("swipeUp",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeUp&&(ret=options.swipeUp.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case DOWN:$element.trigger("swipeDown",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeDown&&(ret=options.swipeDown.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection))}}}if(gesture==PINCH){if($element.trigger("pinchStatus",[phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchStatus&&(ret=options.pinchStatus.call($element,event,phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData),ret===!1))return!1;if(phase==PHASE_END&&validatePinch())switch(pinchDirection){case IN:$element.trigger("pinchIn",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchIn&&(ret=options.pinchIn.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData));break;case OUT:$element.trigger("pinchOut",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchOut&&(ret=options.pinchOut.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData))}}return gesture==TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),hasDoubleTap()&&!inDoubleTap()?(doubleTapStartTime=getTimeStamp(),singleTapTimeout=setTimeout($.proxy(function(){doubleTapStartTime=null,$element.trigger("tap",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target))},this),options.doubleTapThreshold)):(doubleTapStartTime=null,$element.trigger("tap",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target)))):gesture==DOUBLE_TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),doubleTapStartTime=null,$element.trigger("doubletap",[event.target]),options.doubleTap&&(ret=options.doubleTap.call($element,event,event.target))):gesture==LONG_TAP&&(phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),doubleTapStartTime=null,$element.trigger("longtap",[event.target]),options.longTap&&(ret=options.longTap.call($element,event,event.target)))),ret}function validateSwipeDistance(){var valid=!0;return null!==options.threshold&&(valid=distance>=options.threshold),valid}function didSwipeBackToCancel(){var cancelled=!1;return null!==options.cancelThreshold&&null!==direction&&(cancelled=getMaxDistance(direction)-distance>=options.cancelThreshold),cancelled}function validatePinchDistance(){return null!==options.pinchThreshold?pinchDistance>=options.pinchThreshold:!0}function validateSwipeTime(){var result;return result=options.maxTimeThreshold?!(duration>=options.maxTimeThreshold):!0}function validateDefaultEvent(jqEvent,direction){if(options.preventDefaultEvents!==!1)if(options.allowPageScroll===NONE)jqEvent.preventDefault();else{var auto=options.allowPageScroll===AUTO;switch(direction){case LEFT:(options.swipeLeft&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case RIGHT:(options.swipeRight&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case UP:(options.swipeUp&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case DOWN:(options.swipeDown&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case NONE:}}}function validatePinch(){var hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),hasCorrectDistance=validatePinchDistance();return hasCorrectFingerCount&&hasEndPoint&&hasCorrectDistance}function hasPinches(){return!!(options.pinchStatus||options.pinchIn||options.pinchOut)}function didPinch(){return!(!validatePinch()||!hasPinches())}function validateSwipe(){var hasValidTime=validateSwipeTime(),hasValidDistance=validateSwipeDistance(),hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),didCancel=didSwipeBackToCancel(),valid=!didCancel&&hasEndPoint&&hasCorrectFingerCount&&hasValidDistance&&hasValidTime;return valid}function hasSwipes(){return!!(options.swipe||options.swipeStatus||options.swipeLeft||options.swipeRight||options.swipeUp||options.swipeDown)}function didSwipe(){return!(!validateSwipe()||!hasSwipes())}function validateFingers(){return fingerCount===options.fingers||options.fingers===ALL_FINGERS||!SUPPORTS_TOUCH}function validateEndPoint(){return 0!==fingerData[0].end.x}function hasTap(){return!!options.tap}function hasDoubleTap(){return!!options.doubleTap}function hasLongTap(){return!!options.longTap}function validateDoubleTap(){if(null==doubleTapStartTime)return!1;var now=getTimeStamp();return hasDoubleTap()&&now-doubleTapStartTime<=options.doubleTapThreshold}function inDoubleTap(){return validateDoubleTap()}function validateTap(){return(1===fingerCount||!SUPPORTS_TOUCH)&&(isNaN(distance)||distance<options.threshold)}function validateLongTap(){return duration>options.longTapThreshold&&DOUBLE_TAP_THRESHOLD>distance}function didTap(){return!(!validateTap()||!hasTap())}function didDoubleTap(){return!(!validateDoubleTap()||!hasDoubleTap())}function didLongTap(){return!(!validateLongTap()||!hasLongTap())}function startMultiFingerRelease(event){previousTouchEndTime=getTimeStamp(),fingerCountAtRelease=event.touches.length+1}function cancelMultiFingerRelease(){previousTouchEndTime=0,fingerCountAtRelease=0}function inMultiFingerRelease(){var withinThreshold=!1;if(previousTouchEndTime){var diff=getTimeStamp()-previousTouchEndTime;diff<=options.fingerReleaseThreshold&&(withinThreshold=!0)}return withinThreshold}function getTouchInProgress(){return!($element.data(PLUGIN_NS+"_intouch")!==!0)}function setTouchInProgress(val){$element&&(val===!0?($element.bind(MOVE_EV,touchMove),$element.bind(END_EV,touchEnd),LEAVE_EV&&$element.bind(LEAVE_EV,touchLeave)):($element.unbind(MOVE_EV,touchMove,!1),$element.unbind(END_EV,touchEnd,!1),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave,!1)),$element.data(PLUGIN_NS+"_intouch",val===!0))}function createFingerData(id,evt){var f={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return f.start.x=f.last.x=f.end.x=evt.pageX||evt.clientX,f.start.y=f.last.y=f.end.y=evt.pageY||evt.clientY,fingerData[id]=f,f}function updateFingerData(evt){var id=void 0!==evt.identifier?evt.identifier:0,f=getFingerData(id);return null===f&&(f=createFingerData(id,evt)),f.last.x=f.end.x,f.last.y=f.end.y,f.end.x=evt.pageX||evt.clientX,f.end.y=evt.pageY||evt.clientY,f}function getFingerData(id){return fingerData[id]||null}function setMaxDistance(direction,distance){direction!=NONE&&(distance=Math.max(distance,getMaxDistance(direction)),maximumsMap[direction].distance=distance)}function getMaxDistance(direction){return maximumsMap[direction]?maximumsMap[direction].distance:void 0}function createMaximumsData(){var maxData={};return maxData[LEFT]=createMaximumVO(LEFT),maxData[RIGHT]=createMaximumVO(RIGHT),maxData[UP]=createMaximumVO(UP),maxData[DOWN]=createMaximumVO(DOWN),maxData}function createMaximumVO(dir){return{direction:dir,distance:0}}function calculateDuration(){return endTime-startTime}function calculateTouchesDistance(startPoint,endPoint){var diffX=Math.abs(startPoint.x-endPoint.x),diffY=Math.abs(startPoint.y-endPoint.y);return Math.round(Math.sqrt(diffX*diffX+diffY*diffY))}function calculatePinchZoom(startDistance,endDistance){var percent=endDistance/startDistance*1;return percent.toFixed(2)}function calculatePinchDirection(){return 1>pinchZoom?OUT:IN}function calculateDistance(startPoint,endPoint){return Math.round(Math.sqrt(Math.pow(endPoint.x-startPoint.x,2)+Math.pow(endPoint.y-startPoint.y,2)))}function calculateAngle(startPoint,endPoint){var x=startPoint.x-endPoint.x,y=endPoint.y-startPoint.y,r=Math.atan2(y,x),angle=Math.round(180*r/Math.PI);return 0>angle&&(angle=360-Math.abs(angle)),angle}function calculateDirection(startPoint,endPoint){if(comparePoints(startPoint,endPoint))return NONE;var angle=calculateAngle(startPoint,endPoint);return 45>=angle&&angle>=0?LEFT:360>=angle&&angle>=315?LEFT:angle>=135&&225>=angle?RIGHT:angle>45&&135>angle?DOWN:UP}function getTimeStamp(){var now=new Date;return now.getTime()}function getbounds(el){el=$(el);var offset=el.offset(),bounds={left:offset.left,right:offset.left+el.outerWidth(),top:offset.top,bottom:offset.top+el.outerHeight()};return bounds}function isInBounds(point,bounds){return point.x>bounds.left&&point.x<bounds.right&&point.y>bounds.top&&point.y<bounds.bottom}function comparePoints(pointA,pointB){return pointA.x==pointB.x&&pointA.y==pointB.y}var options=$.extend({},options),useTouchEvents=SUPPORTS_TOUCH||SUPPORTS_POINTER||!options.fallbackToMouseEvents,START_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerDown":"pointerdown":"touchstart":"mousedown",MOVE_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerMove":"pointermove":"touchmove":"mousemove",END_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerUp":"pointerup":"touchend":"mouseup",LEAVE_EV=useTouchEvents?SUPPORTS_POINTER?"mouseleave":null:"mouseleave",CANCEL_EV=SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?"MSPointerCancel":"pointercancel":"touchcancel",distance=0,direction=null,currentDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,pinchDirection=0,maximumsMap=null,$element=$(element),phase="start",fingerCount=0,fingerData={},startTime=0,endTime=0,previousTouchEndTime=0,fingerCountAtRelease=0,doubleTapStartTime=0,singleTapTimeout=null,holdTimeout=null;try{$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel)}catch(e){$.error("events not supported "+START_EV+","+CANCEL_EV+" on jQuery.swipe")}this.enable=function(){return this.disable(),$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel),$element},this.disable=function(){return removeListeners(),$element},this.destroy=function(){removeListeners(),$element.data(PLUGIN_NS,null),$element=null},this.option=function(property,value){if("object"==typeof property)options=$.extend(options,property);else if(void 0!==options[property]){if(void 0===value)return options[property];options[property]=value}else{if(!property)return options;$.error("Option "+property+" does not exist on jQuery.swipe.options")}return null}}var VERSION="1.6.18",LEFT="left",RIGHT="right",UP="up",DOWN="down",IN="in",OUT="out",NONE="none",AUTO="auto",SWIPE="swipe",PINCH="pinch",TAP="tap",DOUBLE_TAP="doubletap",LONG_TAP="longtap",HORIZONTAL="horizontal",VERTICAL="vertical",ALL_FINGERS="all",DOUBLE_TAP_THRESHOLD=10,PHASE_START="start",PHASE_MOVE="move",PHASE_END="end",PHASE_CANCEL="cancel",SUPPORTS_TOUCH="ontouchstart"in window,SUPPORTS_POINTER_IE10=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!SUPPORTS_TOUCH,SUPPORTS_POINTER=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!SUPPORTS_TOUCH,PLUGIN_NS="TouchSwipe",defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};$.fn.swipe=function(method){var $this=$(this),plugin=$this.data(PLUGIN_NS);if(plugin&&"string"==typeof method){if(plugin[method])return plugin[method].apply(plugin,Array.prototype.slice.call(arguments,1));$.error("Method "+method+" does not exist on jQuery.swipe")}else if(plugin&&"object"==typeof method)plugin.option.apply(plugin,arguments);else if(!(plugin||"object"!=typeof method&&method))return init.apply(this,arguments);return $this},$.fn.swipe.version=VERSION,$.fn.swipe.defaults=defaults,$.fn.swipe.phases={PHASE_START:PHASE_START,PHASE_MOVE:PHASE_MOVE,PHASE_END:PHASE_END,PHASE_CANCEL:PHASE_CANCEL},$.fn.swipe.directions={LEFT:LEFT,RIGHT:RIGHT,UP:UP,DOWN:DOWN,IN:IN,OUT:OUT},$.fn.swipe.pageScroll={NONE:NONE,HORIZONTAL:HORIZONTAL,VERTICAL:VERTICAL,AUTO:AUTO},$.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ALL_FINGERS}});
/*!
 * jQuery bootstrap 3 breakpoint check
 * Check the current visibility of bootstrap 3 breakpoints
 *
 * @example `$.isXs()` function alias for `$.isBreakpoint("xs")`
 * @example `$.isSm()` function alias for `$.isBreakpoint("sm")`
 * @example `$.isMd()` function alias for `$.isBreakpoint("md")`
 * @example `$.isLg()` function alias for `$.isBreakpoint("lg")`
 * @version 1.0.0
 * @copyright Jens A. (cakebake) and other contributors
 * @license Released under the MIT license
 */
!function(a){a.isBreakpoint=function(b){var c,d;return c=a("<div/>",{"class":"visible-"+b}).appendTo("body"),d=c.is(":visible"),c.remove(),d},a.extend(a,{isXs:function(){return a.isBreakpoint("xs")},isSm:function(){return a.isBreakpoint("sm")},isMd:function(){return a.isBreakpoint("md")},isLg:function(){return a.isBreakpoint("lg")}})}(jQuery);
(function ($) {
    // Handle hashes when page loads to offset against fixed top navbar
    // http://stackoverflow.com/a/39325205/156388
    function adjustAnchor() {
        const $anchor = $(':target');
        const fixedElementHeight = $('.navbar-fixed-top').outerHeight() + 20;
        if ($anchor.length > 0) {
            $('html, body')
                .stop()
                .animate({ scrollTop: $anchor.offset().top - fixedElementHeight }, 0);
        }
    }
    $(window).on('hashchange load', adjustAnchor);
    $('body').on('click', "a[href^='#']", function (ev) {
        if (window.location.hash === $(this).attr('href')) {
            ev.preventDefault();
            adjustAnchor();
        }
    });

    $(document).ready(function () {
        App.init();

        // Pagers.
        $("select.pager.selector").change(function () {
            window.location = $(this).attr("disabled", true).val();
        });

        // Auto-bulk actions.
        $(".bulk-actions-auto select").change(function () {
            $(this).closest("form").find(".apply-bulk-actions-auto:first").click();
        });

        // RemoveUrl and UnsafeUrl.
        $("body").on("click", "[itemprop~='RemoveUrl']", function () {
            // Don"t show the confirm dialog if the link is also UnsafeUrl, as it will already be handled in base.js.
            if ($(this).filter("[itemprop~='UnsafeUrl']").length === 1) {
                return false;
            }

            // Use a custom message if its set in data-message.
            var dataMessage = $(this).data("message");
            if (dataMessage === undefined) {
                dataMessage = $("[data-default-remove-confirmation-prompt]").data("default-remove-confirmation-prompt");
            }

            return confirm(dataMessage);
        });

        // Check all
        $(".check-all").change(function () {
            $("input[type=checkbox]:not(:disabled)").prop("checked", $(this).prop("checked"));
        });

        // Handle keypress events in bulk action fieldsets that are part of a single form.
        // This will make sure the expected action executes when pressing "enter" on a text field.
        $("form .bulk-actions").on("keypress", "input[type='text']", function (e) {
            if (e.which !== 13)
                return;

            var sender = $(this);
            var fieldset = sender.closest("fieldset.bulk-actions");
            var submitButton = fieldset.find("button[type='submit']");

            if (submitButton.length === 0)
                return;

            e.preventDefault();
            submitButton.click();
        });

        //more-actions
        function sortBy(prop) {
            return function (a, b) {
                var filter_a = parseInt($(a).attr(prop));
                var filter_b = parseInt($(b).attr(prop));
                if (isNaN(filter_a)) {
                    filter_a = -1;
                    return 1;
                }
                if (isNaN(filter_b)) {
                    filter_b = -1;
                    return -1;
                }
                //console.log(filter_a + " > " + filter_b);
                return filter_a > filter_b
                ? -1
                : (filter_a > filter_b ? 1 : 0);
            }
        }
        function sortDom(filter, elements) {
            //Transform our nodeList into array and apply sort function
            return [].map.call(elements, function (elm) {
                return elm;
            }).sort(sortBy(filter))
        }
        function last(array, n) {
            if (array === null)
                return void 0;
            if (n === null)
                return array[array.length - 1];
            return array.slice(Math.max(array.length - n, 0));
        };
        function init() {
            var links = $(".content-items-with-actions li > a");
            //sets the initial sort order
            $.each(links, function (i, el) {
                $(el).attr("data-id", "action-" + i);
            });
        }
        init();

        function renderContentItemActions() {
            var container = $(".content-items-with-actions li");
            var containerWidth = $(".content-items").outerWidth(true);
            $.each(container, function (i, c) {
                var dropdownToggleWidth = 37;// getElementMinWidth();
                var mainActions = $(c).find("ul.main-actions");
                var moreactions = $(c).find("ul.more-actions");
                $.each(mainActions, function (i, el) {
                    var $el = $(el);
                    var loop = 1;
                    do {
                        var mainActionsWidth = dropdownToggleWidth;
                        var links = $el.find("li:first-child > a:visible");
                        $.each(links, function (i, a) {
                            mainActionsWidth += getElementMinWidth($(a));
                        });
                        if (mainActionsWidth >= containerWidth) {
                            var last = $(sortDom("priority", links)).last();
                            if (last.length > 0) {
                                var li = $("<li>");
                                li.append(last.clone())
                                moreactions.prepend(li);
                                last.hide();
                                mainActionsWidth -= getElementMinWidth(last);
                            }
                        } else {
                            var first = moreactions.find("li:first > a").first();
                            if (first.length > 0) {
                                var actionId = first.attr("data-id");
                                var mainAction = mainActions
                                    .find("li a[data-id='" + actionId + "']");
                                mainAction.show()
                                first.parent("li").remove();
                                mainActionsWidth += getElementMinWidth(mainAction);
                            }
                        }
                        //var mainActionsWidth = dropdownToggleWidth;
                        //var links = $el.find("li:first-child > a:visible");
                        //$.each(links, function (i, a) {
                        //    mainActionsWidth += getElementMinWidth($(a));
                        //});
                        loop++;
                    } while (loop < 20 && mainActionsWidth > containerWidth)//(mainActionsWidth > containerWidth)
                });

                $.each(moreactions, function (i, el) {
                    var $el = $(el);
                    if ($el.find("li").length > 0) {
                        $(c).find(".more-actions-dropdown").show();
                    }
                    else {
                        $(c).find(".more-actions-dropdown").hide();
                    }
                });
            });
        }

        function getElementMinWidth(el) {
            var props = { position: "absolute", visibility: "hidden", display: "inline-block" };
            var itemWidth = 0;
            if (el !== undefined) {
                $.swap(el[0], props, function () {
                    itemWidth = el.outerWidth();
                });
            }
            return itemWidth;
        }
        var id;
        var startWidth = window.innerWidth; //get the original screen width

        renderContentItemActions();
        $(window).resize(function () {
            clearTimeout(id);
            id = setTimeout(doneResizing, 200);
        });

        function doneResizing() {
            renderContentItemActions();
        }

        // Verify if object exist
        jQuery.fn.exists = function () { return this.length > 0; }

        // Bootstrap modal confirmation.
        $("[data-confirm]").unbind('click');
        $("[data-confirm]").click(function (e) {
            var href = $(this).attr("href");
            var dialog = $("#confirmationDialog").clone();

            $("body").append(dialog);
            dialog.find(".modal-body").text($(this).data("confirm"));
            dialog.find(".dialog-command-yes").attr("href", href);
            dialog.modal({ show: true });

            dialog.find(".dialog-command-yes").on("click", function (e) {
                
                var magicToken = $("input[name='__RequestVerificationToken']").first();
                if (!magicToken) { return; } // No sense in continuing if form POSTS will fail.

                var form = $("<form action=\"" + href + "\" method=\"POST\" />");
                form.append(magicToken.clone());
                form.css({ "position": "absolute", "left": "-9999em" });
                $("body").append(form);

                form.submit();
                e.preventDefault();
            });

            e.preventDefault();
        });

        // Bulk action confirmation.
        $("[data-bulk-action]").unbind('click');
        $("[data-bulk-action]").click(function (e) {
            var trigger = $(this);
            var action = trigger.data("bulk-action");
            $("#bulkActions").val(action);

            var dialog = $("#confirmationDialog").clone();

            $("body").append(dialog);
            dialog.find(".modal-body").text($(this).data("bulk-action-confirm"));
            dialog.modal({ show: true });

            dialog.find(".dialog-command-yes").on("click", function (e) {
                submitForm(action); //replace trigger.closest("form").submit(); unless we remove the controller FormValueRequired everywhere
                e.preventDefault();
            });

            e.preventDefault();
        });

        //We need to click the hidden submit button to POST the form.
        //It is needed for the controller action(s) to be hit
        function submitForm(action) {
            //verify the use of one name or the other
            //TODO standardize name in all views and controllers
            if ($('button[name="submit.BulkEdit"]').exists()) {
                var button = $('button[name="submit.BulkEdit"]').click();
            }
            else if ($('button[name="submit.BulkExecute"]').exists()) {
                var button = $('button[name="submit.BulkExecute"]').click();
            }
        }

        // End Bulk edit bootstrap dropdown button actions
    });
})(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRoZUFkbWluLmpzIiwianF1ZXJ5Lm5hbm9zY3JvbGxlci5qcyIsIm1haW4uanMiLCJvcmNoYXJkLWFkbWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6bEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiVGhlQWRtaW4uanMiLCJzb3VyY2VzQ29udGVudCI6W251bGwsIi8qISBuYW5vU2Nyb2xsZXJKUyAtIHYwLjguNyAtIDIwMTVcclxuKiBodHRwOi8vamFtZXNmbG9yZW50aW5vLmdpdGh1Yi5jb20vbmFub1Njcm9sbGVySlMvXHJcbiogQ29weXJpZ2h0IChjKSAyMDE1IEphbWVzIEZsb3JlbnRpbm87IExpY2Vuc2VkIE1JVCAqL1xyXG4oZnVuY3Rpb24oZmFjdG9yeSkge1xyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgIHJldHVybiBkZWZpbmUoWydqcXVlcnknXSwgZnVuY3Rpb24oJCkge1xyXG4gICAgICByZXR1cm4gZmFjdG9yeSgkLCB3aW5kb3csIGRvY3VtZW50KTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCB3aW5kb3csIGRvY3VtZW50KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhY3RvcnkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuICB9XHJcbn0pKGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQpIHtcclxuICBcInVzZSBzdHJpY3RcIjtcclxuICB2YXIgQlJPV1NFUl9JU19JRTcsIEJST1dTRVJfU0NST0xMQkFSX1dJRFRILCBET01TQ1JPTEwsIERPV04sIERSQUcsIEVOVEVSLCBLRVlET1dOLCBLRVlVUCwgTU9VU0VET1dOLCBNT1VTRUVOVEVSLCBNT1VTRU1PVkUsIE1PVVNFVVAsIE1PVVNFV0hFRUwsIE5hbm9TY3JvbGwsIFBBTkVET1dOLCBSRVNJWkUsIFNDUk9MTCwgU0NST0xMQkFSLCBUT1VDSE1PVkUsIFVQLCBXSEVFTCwgY0FGLCBkZWZhdWx0cywgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoLCBoYXNUcmFuc2Zvcm0sIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIsIHJBRiwgdHJhbnNmb3JtLCBfZWxlbWVudFN0eWxlLCBfcHJlZml4U3R5bGUsIF92ZW5kb3I7XHJcbiAgZGVmYXVsdHMgPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgcGFuZSBlbGVtZW50LlxyXG4gICAgICBAcHJvcGVydHkgcGFuZUNsYXNzXHJcbiAgICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgICBAZGVmYXVsdCAnbmFuby1wYW5lJ1xyXG4gICAgICovXHJcbiAgICBwYW5lQ2xhc3M6ICduYW5vLXBhbmUnLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIHNsaWRlciBlbGVtZW50LlxyXG4gICAgICBAcHJvcGVydHkgc2xpZGVyQ2xhc3NcclxuICAgICAgQHR5cGUgU3RyaW5nXHJcbiAgICAgIEBkZWZhdWx0ICduYW5vLXNsaWRlcidcclxuICAgICAqL1xyXG4gICAgc2xpZGVyQ2xhc3M6ICduYW5vLXNsaWRlcicsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgY29udGVudCBlbGVtZW50LlxyXG4gICAgICBAcHJvcGVydHkgY29udGVudENsYXNzXHJcbiAgICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgICBAZGVmYXVsdCAnbmFuby1jb250ZW50J1xyXG4gICAgICovXHJcbiAgICBjb250ZW50Q2xhc3M6ICduYW5vLWNvbnRlbnQnLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICBhIHNldHRpbmcgdG8gZW5hYmxlIG5hdGl2ZSBzY3JvbGxpbmcgaW4gaU9TIGRldmljZXMuXHJcbiAgICAgIEBwcm9wZXJ0eSBpT1NOYXRpdmVTY3JvbGxpbmdcclxuICAgICAgQHR5cGUgQm9vbGVhblxyXG4gICAgICBAZGVmYXVsdCBmYWxzZVxyXG4gICAgICovXHJcbiAgICBpT1NOYXRpdmVTY3JvbGxpbmc6IGZhbHNlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICBhIHNldHRpbmcgdG8gcHJldmVudCB0aGUgcmVzdCBvZiB0aGUgcGFnZSBiZWluZ1xyXG4gICAgICBzY3JvbGxlZCB3aGVuIHVzZXIgc2Nyb2xscyB0aGUgYC5jb250ZW50YCBlbGVtZW50LlxyXG4gICAgICBAcHJvcGVydHkgcHJldmVudFBhZ2VTY3JvbGxpbmdcclxuICAgICAgQHR5cGUgQm9vbGVhblxyXG4gICAgICBAZGVmYXVsdCBmYWxzZVxyXG4gICAgICovXHJcbiAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogZmFsc2UsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIGEgc2V0dGluZyB0byBkaXNhYmxlIGJpbmRpbmcgdG8gdGhlIHJlc2l6ZSBldmVudC5cclxuICAgICAgQHByb3BlcnR5IGRpc2FibGVSZXNpemVcclxuICAgICAgQHR5cGUgQm9vbGVhblxyXG4gICAgICBAZGVmYXVsdCBmYWxzZVxyXG4gICAgICovXHJcbiAgICBkaXNhYmxlUmVzaXplOiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAgYSBzZXR0aW5nIHRvIG1ha2UgdGhlIHNjcm9sbGJhciBhbHdheXMgdmlzaWJsZS5cclxuICAgICAgQHByb3BlcnR5IGFsd2F5c1Zpc2libGVcclxuICAgICAgQHR5cGUgQm9vbGVhblxyXG4gICAgICBAZGVmYXVsdCBmYWxzZVxyXG4gICAgICovXHJcbiAgICBhbHdheXNWaXNpYmxlOiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAgYSBkZWZhdWx0IHRpbWVvdXQgZm9yIHRoZSBgZmxhc2goKWAgbWV0aG9kLlxyXG4gICAgICBAcHJvcGVydHkgZmxhc2hEZWxheVxyXG4gICAgICBAdHlwZSBOdW1iZXJcclxuICAgICAgQGRlZmF1bHQgMTUwMFxyXG4gICAgICovXHJcbiAgICBmbGFzaERlbGF5OiAxNTAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICBhIG1pbmltdW0gaGVpZ2h0IGZvciB0aGUgYC5zbGlkZXJgIGVsZW1lbnQuXHJcbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJNaW5IZWlnaHRcclxuICAgICAgQHR5cGUgTnVtYmVyXHJcbiAgICAgIEBkZWZhdWx0IDIwXHJcbiAgICAgKi9cclxuICAgIHNsaWRlck1pbkhlaWdodDogMjAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIGEgbWF4aW11bSBoZWlnaHQgZm9yIHRoZSBgLnNsaWRlcmAgZWxlbWVudC5cclxuICAgICAgQHByb3BlcnR5IHNsaWRlck1heEhlaWdodFxyXG4gICAgICBAdHlwZSBOdW1iZXJcclxuICAgICAgQGRlZmF1bHQgbnVsbFxyXG4gICAgICovXHJcbiAgICBzbGlkZXJNYXhIZWlnaHQ6IG51bGwsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIGFuIGFsdGVybmF0ZSBkb2N1bWVudCBjb250ZXh0LlxyXG4gICAgICBAcHJvcGVydHkgZG9jdW1lbnRDb250ZXh0XHJcbiAgICAgIEB0eXBlIERvY3VtZW50XHJcbiAgICAgIEBkZWZhdWx0IG51bGxcclxuICAgICAqL1xyXG4gICAgZG9jdW1lbnRDb250ZXh0OiBudWxsLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICBhbiBhbHRlcm5hdGUgd2luZG93IGNvbnRleHQuXHJcbiAgICAgIEBwcm9wZXJ0eSB3aW5kb3dDb250ZXh0XHJcbiAgICAgIEB0eXBlIFdpbmRvd1xyXG4gICAgICBAZGVmYXVsdCBudWxsXHJcbiAgICAgKi9cclxuICAgIHdpbmRvd0NvbnRleHQ6IG51bGxcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBTQ1JPTExCQVJcclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIFNDUk9MTEJBUiA9ICdzY3JvbGxiYXInO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBTQ1JPTExcclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIFNDUk9MTCA9ICdzY3JvbGwnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBNT1VTRURPV05cclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIE1PVVNFRE9XTiA9ICdtb3VzZWRvd24nO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBNT1VTRUVOVEVSXHJcbiAgICBAdHlwZSBTdHJpbmdcclxuICAgIEBmaW5hbFxyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBNT1VTRUVOVEVSID0gJ21vdXNlZW50ZXInO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBNT1VTRU1PVkVcclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIE1PVVNFTU9WRSA9ICdtb3VzZW1vdmUnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBNT1VTRVdIRUVMXHJcbiAgICBAdHlwZSBTdHJpbmdcclxuICAgIEBmaW5hbFxyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBNT1VTRVdIRUVMID0gJ21vdXNld2hlZWwnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBNT1VTRVVQXHJcbiAgICBAdHlwZSBTdHJpbmdcclxuICAgIEBzdGF0aWNcclxuICAgIEBmaW5hbFxyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBNT1VTRVVQID0gJ21vdXNldXAnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBSRVNJWkVcclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIFJFU0laRSA9ICdyZXNpemUnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBEUkFHXHJcbiAgICBAdHlwZSBTdHJpbmdcclxuICAgIEBzdGF0aWNcclxuICAgIEBmaW5hbFxyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBEUkFHID0gJ2RyYWcnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBFTlRFUlxyXG4gICAgQHR5cGUgU3RyaW5nXHJcbiAgICBAc3RhdGljXHJcbiAgICBAZmluYWxcclxuICAgIEBwcml2YXRlXHJcbiAgICovXHJcbiAgRU5URVIgPSAnZW50ZXInO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBVUFxyXG4gICAgQHR5cGUgU3RyaW5nXHJcbiAgICBAc3RhdGljXHJcbiAgICBAZmluYWxcclxuICAgIEBwcml2YXRlXHJcbiAgICovXHJcbiAgVVAgPSAndXAnO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBQQU5FRE9XTlxyXG4gICAgQHR5cGUgU3RyaW5nXHJcbiAgICBAc3RhdGljXHJcbiAgICBAZmluYWxcclxuICAgIEBwcml2YXRlXHJcbiAgICovXHJcbiAgUEFORURPV04gPSAncGFuZWRvd24nO1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBET01TQ1JPTExcclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIERPTVNDUk9MTCA9ICdET01Nb3VzZVNjcm9sbCc7XHJcblxyXG4gIC8qKlxyXG4gICAgQHByb3BlcnR5IERPV05cclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIERPV04gPSAnZG93bic7XHJcblxyXG4gIC8qKlxyXG4gICAgQHByb3BlcnR5IFdIRUVMXHJcbiAgICBAdHlwZSBTdHJpbmdcclxuICAgIEBzdGF0aWNcclxuICAgIEBmaW5hbFxyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBXSEVFTCA9ICd3aGVlbCc7XHJcblxyXG4gIC8qKlxyXG4gICAgQHByb3BlcnR5IEtFWURPV05cclxuICAgIEB0eXBlIFN0cmluZ1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQGZpbmFsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIEtFWURPV04gPSAna2V5ZG93bic7XHJcblxyXG4gIC8qKlxyXG4gICAgQHByb3BlcnR5IEtFWVVQXHJcbiAgICBAdHlwZSBTdHJpbmdcclxuICAgIEBzdGF0aWNcclxuICAgIEBmaW5hbFxyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBLRVlVUCA9ICdrZXl1cCc7XHJcblxyXG4gIC8qKlxyXG4gICAgQHByb3BlcnR5IFRPVUNITU9WRVxyXG4gICAgQHR5cGUgU3RyaW5nXHJcbiAgICBAc3RhdGljXHJcbiAgICBAZmluYWxcclxuICAgIEBwcml2YXRlXHJcbiAgICovXHJcbiAgVE9VQ0hNT1ZFID0gJ3RvdWNobW92ZSc7XHJcblxyXG4gIC8qKlxyXG4gICAgQHByb3BlcnR5IEJST1dTRVJfSVNfSUU3XHJcbiAgICBAdHlwZSBCb29sZWFuXHJcbiAgICBAc3RhdGljXHJcbiAgICBAZmluYWxcclxuICAgIEBwcml2YXRlXHJcbiAgICovXHJcbiAgQlJPV1NFUl9JU19JRTcgPSB3aW5kb3cubmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInICYmIC9tc2llIDcuL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24pICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0O1xyXG5cclxuICAvKipcclxuICAgIEBwcm9wZXJ0eSBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSFxyXG4gICAgQHR5cGUgTnVtYmVyXHJcbiAgICBAc3RhdGljXHJcbiAgICBAZGVmYXVsdCBudWxsXHJcbiAgICBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID0gbnVsbDtcclxuICByQUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG4gIGNBRiA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZTtcclxuICBfZWxlbWVudFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XHJcbiAgX3ZlbmRvciA9IChmdW5jdGlvbigpIHtcclxuICAgIHZhciBpLCB0cmFuc2Zvcm0sIHZlbmRvciwgdmVuZG9ycywgX2ksIF9sZW47XHJcbiAgICB2ZW5kb3JzID0gWyd0JywgJ3dlYmtpdFQnLCAnTW96VCcsICdtc1QnLCAnT1QnXTtcclxuICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IHZlbmRvcnMubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XHJcbiAgICAgIHZlbmRvciA9IHZlbmRvcnNbaV07XHJcbiAgICAgIHRyYW5zZm9ybSA9IHZlbmRvcnNbaV0gKyAncmFuc2Zvcm0nO1xyXG4gICAgICBpZiAodHJhbnNmb3JtIGluIF9lbGVtZW50U3R5bGUpIHtcclxuICAgICAgICByZXR1cm4gdmVuZG9yc1tpXS5zdWJzdHIoMCwgdmVuZG9yc1tpXS5sZW5ndGggLSAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pKCk7XHJcbiAgX3ByZWZpeFN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHtcclxuICAgIGlmIChfdmVuZG9yID09PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoX3ZlbmRvciA9PT0gJycpIHtcclxuICAgICAgcmV0dXJuIHN0eWxlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF92ZW5kb3IgKyBzdHlsZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0eWxlLnN1YnN0cigxKTtcclxuICB9O1xyXG4gIHRyYW5zZm9ybSA9IF9wcmVmaXhTdHlsZSgndHJhbnNmb3JtJyk7XHJcbiAgaGFzVHJhbnNmb3JtID0gdHJhbnNmb3JtICE9PSBmYWxzZTtcclxuXHJcbiAgLyoqXHJcbiAgICBSZXR1cm5zIGJyb3dzZXIncyBuYXRpdmUgc2Nyb2xsYmFyIHdpZHRoXHJcbiAgICBAbWV0aG9kIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aFxyXG4gICAgQHJldHVybiB7TnVtYmVyfSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGluIHBpeGVsc1xyXG4gICAgQHN0YXRpY1xyXG4gICAgQHByaXZhdGVcclxuICAgKi9cclxuICBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBvdXRlciwgb3V0ZXJTdHlsZSwgc2Nyb2xsYmFyV2lkdGg7XHJcbiAgICBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgb3V0ZXJTdHlsZSA9IG91dGVyLnN0eWxlO1xyXG4gICAgb3V0ZXJTdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICBvdXRlclN0eWxlLndpZHRoID0gJzEwMHB4JztcclxuICAgIG91dGVyU3R5bGUuaGVpZ2h0ID0gJzEwMHB4JztcclxuICAgIG91dGVyU3R5bGUub3ZlcmZsb3cgPSBTQ1JPTEw7XHJcbiAgICBvdXRlclN0eWxlLnRvcCA9ICctOTk5OXB4JztcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXIpO1xyXG4gICAgc2Nyb2xsYmFyV2lkdGggPSBvdXRlci5vZmZzZXRXaWR0aCAtIG91dGVyLmNsaWVudFdpZHRoO1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XHJcbiAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XHJcbiAgfTtcclxuICBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaXNPU1hGRiwgdWEsIHZlcnNpb247XHJcbiAgICB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xyXG4gICAgaXNPU1hGRiA9IC8oPz0uK01hYyBPUyBYKSg/PS4rRmlyZWZveCkvLnRlc3QodWEpO1xyXG4gICAgaWYgKCFpc09TWEZGKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZlcnNpb24gPSAvRmlyZWZveFxcL1xcZHsyfVxcLi8uZXhlYyh1YSk7XHJcbiAgICBpZiAodmVyc2lvbikge1xyXG4gICAgICB2ZXJzaW9uID0gdmVyc2lvblswXS5yZXBsYWNlKC9cXEQrL2csICcnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpc09TWEZGICYmICt2ZXJzaW9uID4gMjM7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICBAY2xhc3MgTmFub1Njcm9sbFxyXG4gICAgQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50fE5vZGV9IHRoZSBtYWluIGVsZW1lbnRcclxuICAgIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IG5hbm9TY3JvbGxlcidzIG9wdGlvbnNcclxuICAgIEBjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG4gIE5hbm9TY3JvbGwgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBmdW5jdGlvbiBOYW5vU2Nyb2xsKGVsLCBvcHRpb25zKSB7XHJcbiAgICAgIHRoaXMuZWwgPSBlbDtcclxuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggfHwgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID0gZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoKCkpO1xyXG4gICAgICB0aGlzLiRlbCA9ICQodGhpcy5lbCk7XHJcbiAgICAgIHRoaXMuZG9jID0gJCh0aGlzLm9wdGlvbnMuZG9jdW1lbnRDb250ZXh0IHx8IGRvY3VtZW50KTtcclxuICAgICAgdGhpcy53aW4gPSAkKHRoaXMub3B0aW9ucy53aW5kb3dDb250ZXh0IHx8IHdpbmRvdyk7XHJcbiAgICAgIHRoaXMuYm9keSA9IHRoaXMuZG9jLmZpbmQoJ2JvZHknKTtcclxuICAgICAgdGhpcy4kY29udGVudCA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgdGhpcy5vcHRpb25zLmNvbnRlbnRDbGFzcyk7XHJcbiAgICAgIHRoaXMuJGNvbnRlbnQuYXR0cigndGFiaW5kZXgnLCB0aGlzLm9wdGlvbnMudGFiSW5kZXggfHwgMCk7XHJcbiAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuJGNvbnRlbnRbMF07XHJcbiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IDA7XHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaU9TTmF0aXZlU2Nyb2xsaW5nICYmICh0aGlzLmVsLnN0eWxlLldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nICE9IG51bGwpKSB7XHJcbiAgICAgICAgdGhpcy5uYXRpdmVTY3JvbGxpbmcoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jcmVhdGVFdmVudHMoKTtcclxuICAgICAgdGhpcy5hZGRFdmVudHMoKTtcclxuICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgUHJldmVudHMgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgYmVpbmcgc2Nyb2xsZWRcclxuICAgICAgd2hlbiB1c2VyIHNjcm9sbHMgdGhlIGAubmFuby1jb250ZW50YCBlbGVtZW50LlxyXG4gICAgICBAbWV0aG9kIHByZXZlbnRTY3JvbGxpbmdcclxuICAgICAgQHBhcmFtIGV2ZW50IHtFdmVudH1cclxuICAgICAgQHBhcmFtIGRpcmVjdGlvbiB7U3RyaW5nfSBTY3JvbGwgZGlyZWN0aW9uICh1cCBvciBkb3duKVxyXG4gICAgICBAcHJpdmF0ZVxyXG4gICAgICovXHJcblxyXG4gICAgTmFub1Njcm9sbC5wcm90b3R5cGUucHJldmVudFNjcm9sbGluZyA9IGZ1bmN0aW9uKGUsIGRpcmVjdGlvbikge1xyXG4gICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGUudHlwZSA9PT0gRE9NU0NST0xMKSB7XHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRE9XTiAmJiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsID4gMCB8fCBkaXJlY3Rpb24gPT09IFVQICYmIGUub3JpZ2luYWxFdmVudC5kZXRhaWwgPCAwKSB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gTU9VU0VXSEVFTCkge1xyXG4gICAgICAgIGlmICghZS5vcmlnaW5hbEV2ZW50IHx8ICFlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBET1dOICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhIDwgMCB8fCBkaXJlY3Rpb24gPT09IFVQICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCkge1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIEVuYWJsZSBpT1MgbmF0aXZlIHNjcm9sbGluZ1xyXG4gICAgICBAbWV0aG9kIG5hdGl2ZVNjcm9sbGluZ1xyXG4gICAgICBAcHJpdmF0ZVxyXG4gICAgICovXHJcblxyXG4gICAgTmFub1Njcm9sbC5wcm90b3R5cGUubmF0aXZlU2Nyb2xsaW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcclxuICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogJ3RvdWNoJ1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICBVcGRhdGVzIHRob3NlIG5hbm9TY3JvbGxlciBwcm9wZXJ0aWVzIHRoYXRcclxuICAgICAgYXJlIHJlbGF0ZWQgdG8gY3VycmVudCBzY3JvbGxiYXIgcG9zaXRpb24uXHJcbiAgICAgIEBtZXRob2QgdXBkYXRlU2Nyb2xsVmFsdWVzXHJcbiAgICAgIEBwcml2YXRlXHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS51cGRhdGVTY3JvbGxWYWx1ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGNvbnRlbnQsIGRpcmVjdGlvbjtcclxuICAgICAgY29udGVudCA9IHRoaXMuY29udGVudDtcclxuICAgICAgdGhpcy5tYXhTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbEhlaWdodCAtIGNvbnRlbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICB0aGlzLnByZXZTY3JvbGxUb3AgPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgfHwgMDtcclxuICAgICAgdGhpcy5jb250ZW50U2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxUb3A7XHJcbiAgICAgIGRpcmVjdGlvbiA9IHRoaXMuY29udGVudFNjcm9sbFRvcCA+IHRoaXMucHJldmlvdXNQb3NpdGlvbiA/IFwiZG93blwiIDogdGhpcy5jb250ZW50U2Nyb2xsVG9wIDwgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID8gXCJ1cFwiIDogXCJzYW1lXCI7XHJcbiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IHRoaXMuY29udGVudFNjcm9sbFRvcDtcclxuICAgICAgaWYgKGRpcmVjdGlvbiAhPT0gXCJzYW1lXCIpIHtcclxuICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCd1cGRhdGUnLCB7XHJcbiAgICAgICAgICBwb3NpdGlvbjogdGhpcy5jb250ZW50U2Nyb2xsVG9wLFxyXG4gICAgICAgICAgbWF4aW11bTogdGhpcy5tYXhTY3JvbGxUb3AsXHJcbiAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcclxuICAgICAgICB0aGlzLm1heFNsaWRlclRvcCA9IHRoaXMucGFuZUhlaWdodCAtIHRoaXMuc2xpZGVySGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc2xpZGVyVG9wID0gdGhpcy5tYXhTY3JvbGxUb3AgPT09IDAgPyAwIDogdGhpcy5jb250ZW50U2Nyb2xsVG9wICogdGhpcy5tYXhTbGlkZXJUb3AgLyB0aGlzLm1heFNjcm9sbFRvcDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIFVwZGF0ZXMgQ1NTIHN0eWxlcyBmb3IgY3VycmVudCBzY3JvbGwgcG9zaXRpb24uXHJcbiAgICAgIFVzZXMgQ1NTIDJkIHRyYW5zZnJvbXMgYW5kIGB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBpZiBhdmFpbGFibGUuXHJcbiAgICAgIEBtZXRob2Qgc2V0T25TY3JvbGxTdHlsZXNcclxuICAgICAgQHByaXZhdGVcclxuICAgICAqL1xyXG5cclxuICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNldE9uU2Nyb2xsU3R5bGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBjc3NWYWx1ZTtcclxuICAgICAgaWYgKGhhc1RyYW5zZm9ybSkge1xyXG4gICAgICAgIGNzc1ZhbHVlID0ge307XHJcbiAgICAgICAgY3NzVmFsdWVbdHJhbnNmb3JtXSA9IFwidHJhbnNsYXRlKDAsIFwiICsgdGhpcy5zbGlkZXJUb3AgKyBcInB4KVwiO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNzc1ZhbHVlID0ge1xyXG4gICAgICAgICAgdG9wOiB0aGlzLnNsaWRlclRvcFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJBRikge1xyXG4gICAgICAgIGlmIChjQUYgJiYgdGhpcy5zY3JvbGxSQUYpIHtcclxuICAgICAgICAgIGNBRih0aGlzLnNjcm9sbFJBRik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2Nyb2xsUkFGID0gckFGKChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zY3JvbGxSQUYgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2xpZGVyLmNzcyhjc3NWYWx1ZSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNsaWRlci5jc3MoY3NzVmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgQ3JlYXRlcyBldmVudCByZWxhdGVkIG1ldGhvZHNcclxuICAgICAgQG1ldGhvZCBjcmVhdGVFdmVudHNcclxuICAgICAgQHByaXZhdGVcclxuICAgICAqL1xyXG5cclxuICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmNyZWF0ZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmV2ZW50cyA9IHtcclxuICAgICAgICBkb3duOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmlzQmVpbmdEcmFnZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMub2Zmc2V0WSA9IGUucGFnZVkgLSBfdGhpcy5zbGlkZXIub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLnNsaWRlci5pcyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRZID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5wYW5lLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgX3RoaXMuZG9jLmJpbmQoTU9VU0VNT1ZFLCBfdGhpcy5ldmVudHNbRFJBR10pLmJpbmQoTU9VU0VVUCwgX3RoaXMuZXZlbnRzW1VQXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmJvZHkuYmluZChNT1VTRUVOVEVSLCBfdGhpcy5ldmVudHNbRU5URVJdKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICBkcmFnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSBlLnBhZ2VZIC0gX3RoaXMuJGVsLm9mZnNldCgpLnRvcCAtIF90aGlzLnBhbmVUb3AgLSAoX3RoaXMub2Zmc2V0WSB8fCBfdGhpcy5zbGlkZXJIZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPj0gX3RoaXMubWF4U2Nyb2xsVG9wICYmIF90aGlzLnByZXZTY3JvbGxUb3AgIT09IF90aGlzLm1heFNjcm9sbFRvcCkge1xyXG4gICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGxlbmQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID09PSAwICYmIF90aGlzLnByZXZTY3JvbGxUb3AgIT09IDApIHtcclxuICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsdG9wJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICB1cDogKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBfdGhpcy5wYW5lLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgX3RoaXMuZG9jLnVuYmluZChNT1VTRU1PVkUsIF90aGlzLmV2ZW50c1tEUkFHXSkudW5iaW5kKE1PVVNFVVAsIF90aGlzLmV2ZW50c1tVUF0pO1xyXG4gICAgICAgICAgICBfdGhpcy5ib2R5LnVuYmluZChNT1VTRUVOVEVSLCBfdGhpcy5ldmVudHNbRU5URVJdKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICByZXNpemU6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVzZXQoKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgcGFuZWRvd246IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IChlLm9mZnNldFkgfHwgZS5vcmlnaW5hbEV2ZW50LmxheWVyWSkgLSAoX3RoaXMuc2xpZGVySGVpZ2h0ICogMC41KTtcclxuICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XHJcbiAgICAgICAgICAgIF90aGlzLmV2ZW50cy5kb3duKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpLFxyXG4gICAgICAgIHNjcm9sbDogKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVTY3JvbGxWYWx1ZXMoKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzQmVpbmdEcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IF90aGlzLnNsaWRlclRvcDtcclxuICAgICAgICAgICAgICBfdGhpcy5zZXRPblNjcm9sbFN0eWxlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPj0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XHJcbiAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMucHJldmVudFBhZ2VTY3JvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnByZXZlbnRTY3JvbGxpbmcoZSwgRE9XTik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGxlbmQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnByZXZlbnRQYWdlU2Nyb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5wcmV2ZW50U2Nyb2xsaW5nKGUsIFVQKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZTY3JvbGxUb3AgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGx0b3AnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgd2hlZWw6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGRlbHRhO1xyXG4gICAgICAgICAgICBpZiAoZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlbHRhID0gZS5kZWx0YSB8fCBlLndoZWVsRGVsdGEgfHwgKGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkgfHwgLWUuZGV0YWlsIHx8IChlLm9yaWdpbmFsRXZlbnQgJiYgLWUub3JpZ2luYWxFdmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICBpZiAoZGVsdGEpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZICs9IC1kZWx0YSAvIDM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgZW50ZXI6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIF9yZWY7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNCZWluZ0RyYWdnZWQpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChlLmJ1dHRvbnMgfHwgZS53aGljaCkgIT09IDEpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gKF9yZWYgPSBfdGhpcy5ldmVudHMpW1VQXS5hcHBseShfcmVmLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpXHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgQWRkcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBqUXVlcnkuXHJcbiAgICAgIEBtZXRob2QgYWRkRXZlbnRzXHJcbiAgICAgIEBwcml2YXRlXHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGV2ZW50cztcclxuICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcclxuICAgICAgZXZlbnRzID0gdGhpcy5ldmVudHM7XHJcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVSZXNpemUpIHtcclxuICAgICAgICB0aGlzLndpbi5iaW5kKFJFU0laRSwgZXZlbnRzW1JFU0laRV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcclxuICAgICAgICB0aGlzLnNsaWRlci5iaW5kKE1PVVNFRE9XTiwgZXZlbnRzW0RPV05dKTtcclxuICAgICAgICB0aGlzLnBhbmUuYmluZChNT1VTRURPV04sIGV2ZW50c1tQQU5FRE9XTl0pLmJpbmQoXCJcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCwgZXZlbnRzW1dIRUVMXSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy4kY29udGVudC5iaW5kKFwiXCIgKyBTQ1JPTEwgKyBcIiBcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCArIFwiIFwiICsgVE9VQ0hNT1ZFLCBldmVudHNbU0NST0xMXSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgUmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBqUXVlcnkuXHJcbiAgICAgIEBtZXRob2QgcmVtb3ZlRXZlbnRzXHJcbiAgICAgIEBwcml2YXRlXHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGV2ZW50cztcclxuICAgICAgZXZlbnRzID0gdGhpcy5ldmVudHM7XHJcbiAgICAgIHRoaXMud2luLnVuYmluZChSRVNJWkUsIGV2ZW50c1tSRVNJWkVdKTtcclxuICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xyXG4gICAgICAgIHRoaXMuc2xpZGVyLnVuYmluZCgpO1xyXG4gICAgICAgIHRoaXMucGFuZS51bmJpbmQoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLiRjb250ZW50LnVuYmluZChcIlwiICsgU0NST0xMICsgXCIgXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwgKyBcIiBcIiArIFRPVUNITU9WRSwgZXZlbnRzW1NDUk9MTF0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIEdlbmVyYXRlcyBuYW5vU2Nyb2xsZXIncyBzY3JvbGxiYXIgYW5kIGVsZW1lbnRzIGZvciBpdC5cclxuICAgICAgQG1ldGhvZCBnZW5lcmF0ZVxyXG4gICAgICBAY2hhaW5hYmxlXHJcbiAgICAgIEBwcml2YXRlXHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgY29udGVudENsYXNzLCBjc3NSdWxlLCBjdXJyZW50UGFkZGluZywgb3B0aW9ucywgcGFuZSwgcGFuZUNsYXNzLCBzbGlkZXJDbGFzcztcclxuICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuICAgICAgcGFuZUNsYXNzID0gb3B0aW9ucy5wYW5lQ2xhc3MsIHNsaWRlckNsYXNzID0gb3B0aW9ucy5zbGlkZXJDbGFzcywgY29udGVudENsYXNzID0gb3B0aW9ucy5jb250ZW50Q2xhc3M7XHJcbiAgICAgIGlmICghKHBhbmUgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIHBhbmVDbGFzcykpLmxlbmd0aCAmJiAhcGFuZS5jaGlsZHJlbihcIi5cIiArIHNsaWRlckNsYXNzKS5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoXCI8ZGl2IGNsYXNzPVxcXCJcIiArIHBhbmVDbGFzcyArIFwiXFxcIj48ZGl2IGNsYXNzPVxcXCJcIiArIHNsaWRlckNsYXNzICsgXCJcXFwiIC8+PC9kaXY+XCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucGFuZSA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgcGFuZUNsYXNzKTtcclxuICAgICAgdGhpcy5zbGlkZXIgPSB0aGlzLnBhbmUuZmluZChcIi5cIiArIHNsaWRlckNsYXNzKTtcclxuICAgICAgaWYgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID09PSAwICYmIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIoKSkge1xyXG4gICAgICAgIGN1cnJlbnRQYWRkaW5nID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jb250ZW50LCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykucmVwbGFjZSgvW14wLTkuXSsvZywgJycpO1xyXG4gICAgICAgIGNzc1J1bGUgPSB7XHJcbiAgICAgICAgICByaWdodDogLTE0LFxyXG4gICAgICAgICAgcGFkZGluZ1JpZ2h0OiArY3VycmVudFBhZGRpbmcgKyAxNFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSBpZiAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEgpIHtcclxuICAgICAgICBjc3NSdWxlID0ge1xyXG4gICAgICAgICAgcmlnaHQ6IC1CUk9XU0VSX1NDUk9MTEJBUl9XSURUSFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY3NzUnVsZSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy4kY29udGVudC5jc3MoY3NzUnVsZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgQG1ldGhvZCByZXN0b3JlXHJcbiAgICAgIEBwcml2YXRlXHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xyXG4gICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XHJcbiAgICAgICAgdGhpcy5wYW5lLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmFkZEV2ZW50cygpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIFJlc2V0cyBuYW5vU2Nyb2xsZXIncyBzY3JvbGxiYXIuXHJcbiAgICAgIEBtZXRob2QgcmVzZXRcclxuICAgICAgQGNoYWluYWJsZVxyXG4gICAgICBAZXhhbXBsZVxyXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcigpO1xyXG4gICAgICovXHJcblxyXG4gICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGNvbnRlbnQsIGNvbnRlbnRIZWlnaHQsIGNvbnRlbnRQb3NpdGlvbiwgY29udGVudFN0eWxlLCBjb250ZW50U3R5bGVPdmVyZmxvd1ksIHBhbmVCb3R0b20sIHBhbmVIZWlnaHQsIHBhbmVPdXRlckhlaWdodCwgcGFuZVRvcCwgcGFyZW50TWF4SGVpZ2h0LCByaWdodCwgc2xpZGVySGVpZ2h0O1xyXG4gICAgICBpZiAodGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuJGVsLmZpbmQoXCIuXCIgKyB0aGlzLm9wdGlvbnMucGFuZUNsYXNzKS5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlKCkuc3RvcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcclxuICAgICAgICB0aGlzLnJlc3RvcmUoKTtcclxuICAgICAgfVxyXG4gICAgICBjb250ZW50ID0gdGhpcy5jb250ZW50O1xyXG4gICAgICBjb250ZW50U3R5bGUgPSBjb250ZW50LnN0eWxlO1xyXG4gICAgICBjb250ZW50U3R5bGVPdmVyZmxvd1kgPSBjb250ZW50U3R5bGUub3ZlcmZsb3dZO1xyXG4gICAgICBpZiAoQlJPV1NFUl9JU19JRTcpIHtcclxuICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XHJcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGNvbnRlbnQuaGVpZ2h0KClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBjb250ZW50SGVpZ2h0ID0gY29udGVudC5zY3JvbGxIZWlnaHQgKyBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSDtcclxuICAgICAgcGFyZW50TWF4SGVpZ2h0ID0gcGFyc2VJbnQodGhpcy4kZWwuY3NzKFwibWF4LWhlaWdodFwiKSwgMTApO1xyXG4gICAgICBpZiAocGFyZW50TWF4SGVpZ2h0ID4gMCkge1xyXG4gICAgICAgIHRoaXMuJGVsLmhlaWdodChcIlwiKTtcclxuICAgICAgICB0aGlzLiRlbC5oZWlnaHQoY29udGVudC5zY3JvbGxIZWlnaHQgPiBwYXJlbnRNYXhIZWlnaHQgPyBwYXJlbnRNYXhIZWlnaHQgOiBjb250ZW50LnNjcm9sbEhlaWdodCk7XHJcbiAgICAgIH1cclxuICAgICAgcGFuZUhlaWdodCA9IHRoaXMucGFuZS5vdXRlckhlaWdodChmYWxzZSk7XHJcbiAgICAgIHBhbmVUb3AgPSBwYXJzZUludCh0aGlzLnBhbmUuY3NzKCd0b3AnKSwgMTApO1xyXG4gICAgICBwYW5lQm90dG9tID0gcGFyc2VJbnQodGhpcy5wYW5lLmNzcygnYm90dG9tJyksIDEwKTtcclxuICAgICAgcGFuZU91dGVySGVpZ2h0ID0gcGFuZUhlaWdodCArIHBhbmVUb3AgKyBwYW5lQm90dG9tO1xyXG4gICAgICBzbGlkZXJIZWlnaHQgPSBNYXRoLnJvdW5kKHBhbmVPdXRlckhlaWdodCAvIGNvbnRlbnRIZWlnaHQgKiBwYW5lSGVpZ2h0KTtcclxuICAgICAgaWYgKHNsaWRlckhlaWdodCA8IHRoaXMub3B0aW9ucy5zbGlkZXJNaW5IZWlnaHQpIHtcclxuICAgICAgICBzbGlkZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuc2xpZGVyTWluSGVpZ2h0O1xyXG4gICAgICB9IGVsc2UgaWYgKCh0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0ICE9IG51bGwpICYmIHNsaWRlckhlaWdodCA+IHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQpIHtcclxuICAgICAgICBzbGlkZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb250ZW50U3R5bGVPdmVyZmxvd1kgPT09IFNDUk9MTCAmJiBjb250ZW50U3R5bGUub3ZlcmZsb3dYICE9PSBTQ1JPTEwpIHtcclxuICAgICAgICBzbGlkZXJIZWlnaHQgKz0gQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEg7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5tYXhTbGlkZXJUb3AgPSBwYW5lT3V0ZXJIZWlnaHQgLSBzbGlkZXJIZWlnaHQ7XHJcbiAgICAgIHRoaXMuY29udGVudEhlaWdodCA9IGNvbnRlbnRIZWlnaHQ7XHJcbiAgICAgIHRoaXMucGFuZUhlaWdodCA9IHBhbmVIZWlnaHQ7XHJcbiAgICAgIHRoaXMucGFuZU91dGVySGVpZ2h0ID0gcGFuZU91dGVySGVpZ2h0O1xyXG4gICAgICB0aGlzLnNsaWRlckhlaWdodCA9IHNsaWRlckhlaWdodDtcclxuICAgICAgdGhpcy5wYW5lVG9wID0gcGFuZVRvcDtcclxuICAgICAgdGhpcy5zbGlkZXIuaGVpZ2h0KHNsaWRlckhlaWdodCk7XHJcbiAgICAgIHRoaXMuZXZlbnRzLnNjcm9sbCgpO1xyXG4gICAgICB0aGlzLnBhbmUuc2hvdygpO1xyXG4gICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgaWYgKChjb250ZW50LnNjcm9sbEhlaWdodCA9PT0gY29udGVudC5jbGllbnRIZWlnaHQpIHx8ICh0aGlzLnBhbmUub3V0ZXJIZWlnaHQodHJ1ZSkgPj0gY29udGVudC5zY3JvbGxIZWlnaHQgJiYgY29udGVudFN0eWxlT3ZlcmZsb3dZICE9PSBTQ1JPTEwpKSB7XHJcbiAgICAgICAgdGhpcy5wYW5lLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5lbC5jbGllbnRIZWlnaHQgPT09IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICYmIGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9PT0gU0NST0xMKSB7XHJcbiAgICAgICAgdGhpcy5zbGlkZXIuaGlkZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2xpZGVyLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnBhbmUuY3NzKHtcclxuICAgICAgICBvcGFjaXR5OiAodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUgPyAxIDogJycpLFxyXG4gICAgICAgIHZpc2liaWxpdHk6ICh0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZSA/ICd2aXNpYmxlJyA6ICcnKVxyXG4gICAgICB9KTtcclxuICAgICAgY29udGVudFBvc2l0aW9uID0gdGhpcy4kY29udGVudC5jc3MoJ3Bvc2l0aW9uJyk7XHJcbiAgICAgIGlmIChjb250ZW50UG9zaXRpb24gPT09ICdzdGF0aWMnIHx8IGNvbnRlbnRQb3NpdGlvbiA9PT0gJ3JlbGF0aXZlJykge1xyXG4gICAgICAgIHJpZ2h0ID0gcGFyc2VJbnQodGhpcy4kY29udGVudC5jc3MoJ3JpZ2h0JyksIDEwKTtcclxuICAgICAgICBpZiAocmlnaHQpIHtcclxuICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcclxuICAgICAgICAgICAgcmlnaHQ6ICcnLFxyXG4gICAgICAgICAgICBtYXJnaW5SaWdodDogcmlnaHRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICBAbWV0aG9kIHNjcm9sbFxyXG4gICAgICBAcHJpdmF0ZVxyXG4gICAgICBAZXhhbXBsZVxyXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbDogJ3RvcCcgfSk7XHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2xpZGVyWSA9IE1hdGgubWF4KDAsIHRoaXMuc2xpZGVyWSk7XHJcbiAgICAgIHRoaXMuc2xpZGVyWSA9IE1hdGgubWluKHRoaXMubWF4U2xpZGVyVG9wLCB0aGlzLnNsaWRlclkpO1xyXG4gICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCh0aGlzLm1heFNjcm9sbFRvcCAqIHRoaXMuc2xpZGVyWSAvIHRoaXMubWF4U2xpZGVyVG9wKTtcclxuICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsVmFsdWVzKCk7XHJcbiAgICAgICAgdGhpcy5zZXRPblNjcm9sbFN0eWxlcygpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgIFNjcm9sbCBhdCB0aGUgYm90dG9tIHdpdGggYW4gb2Zmc2V0IHZhbHVlXHJcbiAgICAgIEBtZXRob2Qgc2Nyb2xsQm90dG9tXHJcbiAgICAgIEBwYXJhbSBvZmZzZXRZIHtOdW1iZXJ9XHJcbiAgICAgIEBjaGFpbmFibGVcclxuICAgICAgQGV4YW1wbGVcclxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxCb3R0b206IHZhbHVlIH0pO1xyXG4gICAgICovXHJcblxyXG4gICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsQm90dG9tID0gZnVuY3Rpb24ob2Zmc2V0WSkge1xyXG4gICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AodGhpcy5jb250ZW50SGVpZ2h0IC0gdGhpcy4kY29udGVudC5oZWlnaHQoKSAtIG9mZnNldFkpLnRyaWdnZXIoTU9VU0VXSEVFTCk7XHJcbiAgICAgIHRoaXMuc3RvcCgpLnJlc3RvcmUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgU2Nyb2xsIGF0IHRoZSB0b3Agd2l0aCBhbiBvZmZzZXQgdmFsdWVcclxuICAgICAgQG1ldGhvZCBzY3JvbGxUb3BcclxuICAgICAgQHBhcmFtIG9mZnNldFkge051bWJlcn1cclxuICAgICAgQGNoYWluYWJsZVxyXG4gICAgICBAZXhhbXBsZVxyXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbFRvcDogdmFsdWUgfSk7XHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxUb3AgPSBmdW5jdGlvbihvZmZzZXRZKSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCgrb2Zmc2V0WSkudHJpZ2dlcihNT1VTRVdIRUVMKTtcclxuICAgICAgdGhpcy5zdG9wKCkucmVzdG9yZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICBTY3JvbGwgdG8gYW4gZWxlbWVudFxyXG4gICAgICBAbWV0aG9kIHNjcm9sbFRvXHJcbiAgICAgIEBwYXJhbSBub2RlIHtOb2RlfSBBIG5vZGUgdG8gc2Nyb2xsIHRvLlxyXG4gICAgICBAY2hhaW5hYmxlXHJcbiAgICAgIEBleGFtcGxlXHJcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsVG86ICQoJyNhX25vZGUnKSB9KTtcclxuICAgICAqL1xyXG5cclxuICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbFRvID0gZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zY3JvbGxUb3AodGhpcy4kZWwuZmluZChub2RlKS5nZXQoMCkub2Zmc2V0VG9wKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgVG8gc3RvcCB0aGUgb3BlcmF0aW9uLlxyXG4gICAgICBUaGlzIG9wdGlvbiB3aWxsIHRlbGwgdGhlIHBsdWdpbiB0byBkaXNhYmxlIGFsbCBldmVudCBiaW5kaW5ncyBhbmQgaGlkZSB0aGUgZ2FkZ2V0IHNjcm9sbGJhciBmcm9tIHRoZSBVSS5cclxuICAgICAgQG1ldGhvZCBzdG9wXHJcbiAgICAgIEBjaGFpbmFibGVcclxuICAgICAgQGV4YW1wbGVcclxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzdG9wOiB0cnVlIH0pO1xyXG4gICAgICovXHJcblxyXG4gICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoY0FGICYmIHRoaXMuc2Nyb2xsUkFGKSB7XHJcbiAgICAgICAgY0FGKHRoaXMuc2Nyb2xsUkFGKTtcclxuICAgICAgICB0aGlzLnNjcm9sbFJBRiA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcclxuICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xyXG4gICAgICAgIHRoaXMucGFuZS5oaWRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgRGVzdHJveXMgbmFub1Njcm9sbGVyIGFuZCByZXN0b3JlcyBicm93c2VyJ3MgbmF0aXZlIHNjcm9sbGJhci5cclxuICAgICAgQG1ldGhvZCBkZXN0cm95XHJcbiAgICAgIEBjaGFpbmFibGVcclxuICAgICAgQGV4YW1wbGVcclxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBkZXN0cm95OiB0cnVlIH0pO1xyXG4gICAgICovXHJcblxyXG4gICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoIXRoaXMuc3RvcHBlZCkge1xyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcgJiYgdGhpcy5wYW5lLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMucGFuZS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoQlJPV1NFUl9JU19JRTcpIHtcclxuICAgICAgICB0aGlzLiRjb250ZW50LmhlaWdodCgnJyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy4kY29udGVudC5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xyXG4gICAgICBpZiAodGhpcy4kZWwuaGFzQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKSkge1xyXG4gICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdoYXMtc2Nyb2xsYmFyJyk7XHJcbiAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xyXG4gICAgICAgICAgcmlnaHQ6ICcnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgVG8gZmxhc2ggdGhlIHNjcm9sbGJhciBnYWRnZXQgZm9yIGFuIGFtb3VudCBvZiB0aW1lIGRlZmluZWQgaW4gcGx1Z2luIHNldHRpbmdzIChkZWZhdWx0cyB0byAxLDVzKS5cclxuICAgICAgVXNlZnVsIGlmIHlvdSB3YW50IHRvIHNob3cgdGhlIHVzZXIgKGUuZy4gb24gcGFnZWxvYWQpIHRoYXQgdGhlcmUgaXMgbW9yZSBjb250ZW50IHdhaXRpbmcgZm9yIGhpbS5cclxuICAgICAgQG1ldGhvZCBmbGFzaFxyXG4gICAgICBAY2hhaW5hYmxlXHJcbiAgICAgIEBleGFtcGxlXHJcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgZmxhc2g6IHRydWUgfSk7XHJcbiAgICAgKi9cclxuXHJcbiAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5mbGFzaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgdGhpcy5wYW5lLmFkZENsYXNzKCdmbGFzaGVkJyk7XHJcbiAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgX3RoaXMucGFuZS5yZW1vdmVDbGFzcygnZmxhc2hlZCcpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pKHRoaXMpLCB0aGlzLm9wdGlvbnMuZmxhc2hEZWxheSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gTmFub1Njcm9sbDtcclxuXHJcbiAgfSkoKTtcclxuICAkLmZuLm5hbm9TY3JvbGxlciA9IGZ1bmN0aW9uKHNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgb3B0aW9ucywgc2Nyb2xsYmFyO1xyXG4gICAgICBpZiAoIShzY3JvbGxiYXIgPSB0aGlzLm5hbm9zY3JvbGxlcikpIHtcclxuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5uYW5vc2Nyb2xsZXIgPSBzY3JvbGxiYXIgPSBuZXcgTmFub1Njcm9sbCh0aGlzLCBvcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2V0dGluZ3MgJiYgdHlwZW9mIHNldHRpbmdzID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgJC5leHRlbmQoc2Nyb2xsYmFyLm9wdGlvbnMsIHNldHRpbmdzKTtcclxuICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsQm90dG9tICE9IG51bGwpIHtcclxuICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsQm90dG9tKHNldHRpbmdzLnNjcm9sbEJvdHRvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxUb3AgIT0gbnVsbCkge1xyXG4gICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUb3Aoc2V0dGluZ3Muc2Nyb2xsVG9wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbFRvKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvKHNldHRpbmdzLnNjcm9sbFRvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsQm90dG9tKDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsID09PSAndG9wJykge1xyXG4gICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUb3AoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgJiYgc2V0dGluZ3Muc2Nyb2xsIGluc3RhbmNlb2YgJCkge1xyXG4gICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUbyhzZXR0aW5ncy5zY3JvbGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2V0dGluZ3Muc3RvcCkge1xyXG4gICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5kZXN0cm95KSB7XHJcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmZsYXNoKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLmZsYXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzY3JvbGxiYXIucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgJC5mbi5uYW5vU2Nyb2xsZXIuQ29uc3RydWN0b3IgPSBOYW5vU2Nyb2xsO1xyXG59KTtcclxuXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS5uYW5vc2Nyb2xsZXIuanMubWFwXHJcbiIsIi8qIVxyXG4gKiBvcmNoYXJkLWFkbWluIHYxLjMuMCAoaHR0cDovL2ZveHl0aGVtZXMubmV0L3RoZW1lcy9hbWFyZXR0aSlcclxuICogQ29weXJpZ2h0IDIwMTQtMjAxNiBGb3h5IFRoZW1lcyBcclxuICovXHJcbnZhciBBcHAgPSAoZnVuY3Rpb24gKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgLy9CYXNpYyBDb25maWdcclxuICB2YXIgY29uZmlnID0ge1xyXG4gICAgYXNzZXRzUGF0aDogJ2Fzc2V0cycsXHJcbiAgICBpbWdQYXRoOiAnaW1nJyxcclxuICAgIGpzUGF0aDogJ2pzJyxcclxuICAgIGxpYnNQYXRoOiAnbGliJyxcclxuICAgIGxlZnRTaWRlYmFyU2xpZGVTcGVlZDogMjAwLFxyXG4gICAgZW5hYmxlU3dpcGU6IHRydWUsXHJcbiAgICBzd2lwZVRyZXNob2xkOiAxMDAsXHJcbiAgICBzY3JvbGxUb3A6IHRydWUsXHJcbiAgICBvcGVuTGVmdFNpZGViYXJDbGFzczogJ29wZW4tbGVmdC1zaWRlYmFyJyxcclxuICAgIG9wZW5SaWdodFNpZGViYXJDbGFzczogJ29wZW4tcmlnaHQtc2lkZWJhcicsXHJcbiAgICByZW1vdmVMZWZ0U2lkZWJhckNsYXNzOiAnb3Itbm9zaWRlYmFyLWxlZnQnLFxyXG4gICAgb3BlbkxlZnRTaWRlYmFyT25DbGljazogZmFsc2UsXHJcbiAgICBvcGVuTGVmdFNpZGViYXJPbkNsaWNrQ2xhc3M6ICdvci1sZWZ0LXNpZGViYXItLWNsaWNrJyxcclxuICAgIHRyYW5zaXRpb25DbGFzczogJ29yLWFuaW1hdGUnLFxyXG4gICAgb3BlblNpZGViYXJEZWxheTogNDAwLFxyXG4gICAgc3luY1N1Yk1lbnVPbkhvdmVyOiBmYWxzZVxyXG4gIH07XHJcblxyXG4gIHZhciBjb2xvcnMgPSB7fTtcclxuICB2YXIgYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gIHZhciB3cmFwcGVyID0gJChcIi5vci13cmFwcGVyXCIpO1xyXG4gIHZhciBsZWZ0U2lkZWJhciA9ICQoXCIub3ItbGVmdC1zaWRlYmFyXCIpO1xyXG4gIHZhciByaWdodFNpZGViYXIgPSAkKFwiLm9yLXJpZ2h0LXNpZGViYXJcIik7XHJcbiAgdmFyIG9wZW5TaWRlYmFyID0gZmFsc2U7XHJcbiAgdmFyIGlzUnRsID0gJCgnaHRtbCcpLmhhc0NsYXNzKCdydGwnKTtcclxuXHJcbiAgLy9HZXQgdGhlIHRlbXBsYXRlIGNzcyBjb2xvcnMgaW50byBqcyB2YXJzXHJcbiAgZnVuY3Rpb24gZ2V0Q29sb3IoIGMgKXtcclxuICAgIHZhciB0bXAgPSAkKFwiPGRpdj5cIiwgeyBjbGFzczogYyB9KS5hcHBlbmRUbyhcImJvZHlcIik7XHJcbiAgICB2YXIgY29sb3IgPSB0bXAuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiKTtcclxuICAgIHRtcC5yZW1vdmUoKTtcclxuXHJcbiAgICByZXR1cm4gY29sb3I7XHJcbiAgfVxyXG5cclxuICAvL0NvcmUgcHJpdmF0ZSBmdW5jdGlvbnNcclxuICBmdW5jdGlvbiBsZWZ0U2lkZWJhckluaXQoKXtcclxuXHJcbiAgICB2YXIgZmlyc3RBbmNob3IgPSAkKFwiLnNpZGViYXItZWxlbWVudHMgPiBsaSA+IGFcIiwgbGVmdFNpZGViYXIpO1xyXG4gICAgdmFyIG9wZW5MZWZ0U2lkZWJhck9uQ2xpY2sgPSBsZWZ0U2lkZWJhci5oYXNDbGFzcyggY29uZmlnLm9wZW5MZWZ0U2lkZWJhck9uQ2xpY2tDbGFzcyApIHx8IGNvbmZpZy5vcGVuTGVmdFNpZGViYXJPbkNsaWNrID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIHN5bmNTdWJNZW51KCBpdGVtICl7XHJcbiAgICAgIHZhciBlbGVtZW50cyA9ICQoXCIuc2lkZWJhci1lbGVtZW50cyA+IGxpXCIsIGxlZnRTaWRlYmFyKTtcclxuXHJcbiAgICAgIGlmKCB0eXBlb2YgaXRlbSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuICAgICAgICBlbGVtZW50cyA9IGl0ZW07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQuZWFjaCggZWxlbWVudHMsIGZ1bmN0aW9uKGksIHYpe1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSAkKHRoaXMpLmZpbmQoXCI+IGEgc3BhblwiKS5odG1sKCk7XHJcbiAgICAgICAgdmFyIHVsID0gJCh0aGlzKS5maW5kKFwiPiB1bFwiKTtcclxuICAgICAgICB2YXIgc3ViRWxzID0gJChcIj4gbGlcIiwgdWwpO1xyXG4gICAgICAgIHZhciB0aXRsZSA9ICQoJzxsaSBjbGFzcz1cInRpdGxlXCI+JyArIHRpdGxlICsgJzwvbGk+Jyk7XHJcbiAgICAgICAgdmFyIHN1YkNvbnRhaW5lciA9ICQoJzxsaSBjbGFzcz1cIm5hdi1pdGVtc1wiPjxkaXYgY2xhc3M9XCJvci1zY3JvbGxlciBuYW5vXCI+PGRpdiBjbGFzcz1cImNvbnRlbnQgbmFuby1jb250ZW50XCI+PHVsPjwvdWw+PC9kaXY+PC9kaXY+PC9saT4nKTtcclxuXHJcbiAgICAgICAgaWYoICF1bC5maW5kKFwiPiBsaS50aXRsZVwiKS5sZW5ndGggPiAwICl7XHJcbiAgICAgICAgIHVsLnByZXBlbmQoIHRpdGxlICk7XHJcbiAgICAgICAgICBzdWJFbHMuYXBwZW5kVG8oIHN1YkNvbnRhaW5lci5maW5kKFwiLmNvbnRlbnQgdWxcIikgKTtcclxuICAgICAgICAgIHN1YkNvbnRhaW5lci5hcHBlbmRUbyggdWwgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQ3JlYXRlIHN1YiBtZW51IGVsZW1lbnRzKi9cclxuICAgICAgc3luY1N1Yk1lbnUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBvU2lkZWJhcigpe1xyXG4gICAgICBib2R5LmFkZENsYXNzKCBjb25maWcub3BlbkxlZnRTaWRlYmFyQ2xhc3MgKyBcIiBcIiArIGNvbmZpZy50cmFuc2l0aW9uQ2xhc3MgKTtcclxuICAgICAgb3BlblNpZGViYXIgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNTaWRlYmFyKCl7XHJcbiAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoIGNvbmZpZy5vcGVuTGVmdFNpZGViYXJDbGFzcyApLmFkZENsYXNzKCBjb25maWcudHJhbnNpdGlvbkNsYXNzICk7XHJcbiAgICAgIHNpZGViYXJEZWxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9wZW5TdWJNZW51KCBlbCwgZXZlbnQsIGNsaWNrICl7XHJcbiAgICAgIHZhciBsaSA9ICQoZWwpLnBhcmVudCgpO1xyXG4gICAgICB2YXIgb3JTY3JvbGxlciA9IGxpLmZpbmQoXCIub3Itc2Nyb2xsZXJcIik7XHJcbiAgICAgIHZhciBzdWJNZW51ID0gbGkuZmluZChcIj4gdWxcIik7XHJcbiAgICAgIHZhciBpc09wZW4gPSBsaS5oYXNDbGFzcygnb3BlbicpO1xyXG5cclxuICAgICAgLy9TaG93IHN1YiBtZW51IGVsZW1lbnRcclxuICAgICAgaWYoICEkLmlzWHMoKSApe1xyXG4gICAgICAgICQoXCJ1bC52aXNpYmxlXCIsIGxlZnRTaWRlYmFyKS5yZW1vdmVDbGFzcyhcInZpc2libGVcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgLy9BZGQgY2xhc3NlcyB0byBjcmVhdGUgYSBkZWxheSBvbiBzdWIgbWVudSBjbG9zZSBhY3Rpb24gYWZ0ZXIgbW91c2UgbGVhdmVcclxuICAgICAgICBpZiggIWNsaWNrIHx8ICggY2xpY2sgJiYgIWlzT3BlbiApICl7XHJcbiAgICAgICAgICBsaS5hZGRDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgc3ViTWVudS5hZGRDbGFzcyhcInZpc2libGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1Yk1lbnUucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL1JlbmV3IG5hbm9zY3JvbGxlclxyXG4gICAgICBvclNjcm9sbGVyLm5hbm9TY3JvbGxlcih7IGRlc3Ryb3k6IHRydWUgfSk7XHJcbiAgICAgIG9yU2Nyb2xsZXIubmFub1Njcm9sbGVyKCk7XHJcblxyXG4gICAgICAvL0NoZWNrIGlmIGV2ZW50IGlzIGNsaWNrIG9yIGhvdmVyXHJcbiAgICAgIGlmKCBjbGljayApe1xyXG4gICAgICAgIC8vU3RvcCBjbGljayBldmVudCB3aGVuIGxpIGhhcyBzdWItbWVudVxyXG4gICAgICAgIGlmKCBsaS5oYXNDbGFzcygncGFyZW50JykgKXtcclxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICAvL0NyZWF0ZSBzdWItbWVudSBlbGVtZW50c1xyXG4gICAgICAgIGlmKCBjb25maWcuc3luY1N1Yk1lbnVPbkhvdmVyICl7XHJcbiAgICAgICAgICBzeW5jU3ViTWVudSggbGkgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKk9wZW4tU2lkZWJhciB3aGVuIGNsaWNrIG9uIHRvcGJhciBidXR0b24qL1xyXG4gICAgICAkKCcub3ItdG9nZ2xlLWxlZnQtc2lkZWJhcicpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgaWYoIG9wZW5TaWRlYmFyICYmIGJvZHkuaGFzQ2xhc3MoIGNvbmZpZy5vcGVuTGVmdFNpZGViYXJDbGFzcyApICl7XHJcbiAgICAgICAgICBjU2lkZWJhcigpO1xyXG4gICAgICAgIH1lbHNlIGlmKCAhb3BlblNpZGViYXIgKXtcclxuICAgICAgICAgIG9TaWRlYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvKkNsb3NlIHNpZGViYXIgb24gY2xpY2sgb3V0c2lkZSovXHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKFwidG91Y2hzdGFydCBtb3VzZWRvd25cIixmdW5jdGlvbihlKXtcclxuICAgICAgICBpZiAoICEkKGUudGFyZ2V0KS5jbG9zZXN0KGxlZnRTaWRlYmFyKS5sZW5ndGggJiYgYm9keS5oYXNDbGFzcyggY29uZmlnLm9wZW5MZWZ0U2lkZWJhckNsYXNzICkgKSB7XHJcbiAgICAgICAgICBjU2lkZWJhcigpO1xyXG4gICAgICAgIH1lbHNlIGlmKCAhJChlLnRhcmdldCkuY2xvc2VzdChsZWZ0U2lkZWJhcikubGVuZ3RoICYmICEkLmlzWHMoKSApe1xyXG4gICAgICAgICAgJChcInVsLnZpc2libGVcIiwgbGVmdFNpZGViYXIpLnJlbW92ZUNsYXNzKFwidmlzaWJsZVwiKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgLypPcGVuIHN1Yi1tZW51IGZ1bmN0aW9uYWxpdHkqL1xyXG4gICAgICBpZiggb3BlbkxlZnRTaWRlYmFyT25DbGljayApe1xyXG5cclxuICAgICAgICAvKk9wZW4gc3ViLW1lbnUgb24gY2xpY2sqL1xyXG4gICAgICAgIGZpcnN0QW5jaG9yLm9uKCdjbGljaycsZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgIGlmKCAhJC5pc1hzKCkgKXtcclxuICAgICAgICAgICAgb3BlblN1Yk1lbnUodGhpcywgZSwgdHJ1ZSk7IFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfWVsc2V7XHJcblxyXG4gICAgICAgIC8qT3BlbiBzdWItbWVudSBvbiBob3ZlciovXHJcbiAgICAgICAgZmlyc3RBbmNob3Iub24oJ21vdXNlb3ZlcicsZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgIG9wZW5TdWJNZW51KHRoaXMsIGUsIGZhbHNlKTsgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qT3BlbiBzdWItbWVudSBvbiBjbGljayAoZml4IGZvciB0b3VjaCBkZXZpY2VzKSovXHJcbiAgICAgICAgZmlyc3RBbmNob3Iub24oJ3RvdWNoc3RhcnQnLGZ1bmN0aW9uKCBlICl7XHJcbiAgICAgICAgICBpZiggISQuaXNYcygpICl7XHJcbiAgICAgICAgICAgIG9wZW5TdWJNZW51KHRoaXMsIGUsIHRydWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKlN1Yi1tZW51IGRlbGF5IG9uIG1vdXNlIGxlYXZlKi9cclxuICAgICAgICBmaXJzdEFuY2hvci5vbignbW91c2VsZWF2ZScsZnVuY3Rpb24oKXtcclxuICAgICAgICAgIHZhciBfc2VsZiA9ICQodGhpcyk7XHJcbiAgICAgICAgICB2YXIgX2xpID0gX3NlbGYucGFyZW50KCk7XHJcbiAgICAgICAgICB2YXIgc3ViTWVudSA9IF9saS5maW5kKFwiPiB1bFwiKTtcclxuICAgICAgICAgIGlmKCAhJC5pc1hzKCkgKXtcclxuICAgICAgICAgICAgLy9JZiBtb3VzZSBpcyBvdmVyIHN1YiBtZW51IGF0dGFjaCBhbiBhZGRpdGlvbmFsIG1vdXNlbGVhdmUgZXZlbnQgdG8gc3VibWVudVxyXG4gICAgICAgICAgICBpZiAoIHN1Yk1lbnUubGVuZ3RoID4gMCApe1xyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKCBzdWJNZW51LmlzKCc6aG92ZXInKSApe1xyXG4gICAgICAgICAgICAgICAgICBzdWJNZW51Lm9uKCdtb3VzZWxlYXZlJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmKCAhX3NlbGYuaXMoJzpob3ZlcicpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnUucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgc3ViTWVudS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICBfbGkucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICBfbGkucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgLypPcGVuIHN1Yi1tZW51IG9uIHNtYWxsIGRldmljZXMqL1xyXG4gICAgICAkKFwiLnNpZGViYXItZWxlbWVudHMgbGkgYVwiLCBsZWZ0U2lkZWJhcikub24oXCJjbGlja1wiLGZ1bmN0aW9uKCBlICl7XHJcbiAgICAgICAgaWYoICQuaXNYcygpICl7XHJcbiAgICAgICAgICB2YXIgJGVsID0gJCh0aGlzKSwgJG9wZW4sICRzcGVlZCA9IGNvbmZpZy5sZWZ0U2lkZWJhclNsaWRlU3BlZWQ7XHJcbiAgICAgICAgICB2YXIgJGxpID0gJGVsLnBhcmVudCgpO1xyXG4gICAgICAgICAgdmFyICRzdWJNZW51ID0gJGVsLm5leHQoKTtcclxuXHJcbiAgICAgICAgICAkb3BlbiA9ICRsaS5zaWJsaW5ncyhcIi5vcGVuXCIpO1xyXG5cclxuICAgICAgICAgIGlmKCAkb3BlbiApe1xyXG4gICAgICAgICAgICAkb3Blbi5maW5kKCc+IHVsOnZpc2libGUnKS5zbGlkZVVwKHsgZHVyYXRpb246ICRzcGVlZCwgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJG9wZW4udG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUF0dHIoJ3N0eWxlJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgfX0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmKCAkbGkuaGFzQ2xhc3MoJ29wZW4nKSApe1xyXG4gICAgICAgICAgICAkc3ViTWVudS5zbGlkZVVwKHsgZHVyYXRpb246ICRzcGVlZCwgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJGxpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgIH19KTtcclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkc3ViTWVudS5zbGlkZURvd24oeyBkdXJhdGlvbjogJHNwZWVkLCBjb21wbGV0ZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAkbGkudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUF0dHIoJ3N0eWxlJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgfX0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmKCAkZWwubmV4dCgpLmlzKCd1bCcpICl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIC8vQ2xvc2Ugc3ViLW1lbnUgb24gYW5jaG9yIGNsaWNrXHJcbiAgICAgICAgICBpZiggIW9wZW5MZWZ0U2lkZWJhck9uQ2xpY2sgKXtcclxuICAgICAgICAgICAgdmFyIHN1Yk1lbnUgPSAkKFwiLnNpZGViYXItZWxlbWVudHMgPiBsaSA+IHVsOnZpc2libGVcIiwgbGVmdFNpZGViYXIpO1xyXG4gICAgICAgICAgICBzdWJNZW51LmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAvKkNhbGN1bGF0ZSBzaWRlYmFyIHRyZWUgYWN0aXZlICYgb3BlbiBjbGFzc2VzKi9cclxuICAgICAgJChcImxpLmFjdGl2ZVwiLCBsZWZ0U2lkZWJhcikucGFyZW50cyhcIi5wYXJlbnRcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblxyXG4gICAgLypOYW5vc2Nyb2xsZXIgd2hlbiBsZWZ0IHNpZGViYXIgaXMgZml4ZWQqL1xyXG4gICAgICBpZiggd3JhcHBlci5oYXNDbGFzcyhcIm9yLWZpeGVkLXNpZGViYXJcIikgKXtcclxuICAgICAgICB2YXIgbHNjID0gJChcIi5vci1sZWZ0LXNpZGViYXIgPiAuY29udGVudFwiKTtcclxuICAgICAgICBsc2Mud3JhcCgnPGRpdiBjbGFzcz1cIm9yLXNjcm9sbGVyIG5hbm9cIj48L2Rpdj4nKTtcclxuICAgICAgICBsc2MuYWRkQ2xhc3MoXCJuYW5vLWNvbnRlbnRcIik7XHJcbiAgICAgICAgbHNjLnBhcmVudCgpLm5hbm9TY3JvbGxlcigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgLypPbiB3aW5kb3cgcmVzaXplIGNoZWNrIGZvciBzbWFsbCByZXNvbHV0aW9uIGNsYXNzZXMgdG8gcmVtb3ZlIHRoZW0qL1xyXG4gICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3YWl0Rm9yRmluYWxFdmVudChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgaWYoICEkLmlzWHMoKSApe1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsZXIgPSAkKFwiLm9yLXNjcm9sbGVyXCIpO1xyXG4gICAgICAgICAgICAkKCcubmFuby1jb250ZW50Jywgc2Nyb2xsZXIpLmNzcyh7J21hcmdpbi1yaWdodCc6MH0pO1xyXG4gICAgICAgICAgICBzY3JvbGxlci5uYW5vU2Nyb2xsZXIoeyBkZXN0cm95OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICBzY3JvbGxlci5uYW5vU2Nyb2xsZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCA1MDAsIFwiYW1fY2hlY2tfcGhvbmVfY2xhc3Nlc1wiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByaWdodFNpZGViYXJJbml0KCl7XHJcblxyXG4gICAgZnVuY3Rpb24gb1NpZGViYXIoKXtcclxuICAgICAgYm9keS5hZGRDbGFzcyggY29uZmlnLm9wZW5SaWdodFNpZGViYXJDbGFzcyAgKyBcIiBcIiArIGNvbmZpZy50cmFuc2l0aW9uQ2xhc3MgKTtcclxuICAgICAgb3BlblNpZGViYXIgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNTaWRlYmFyKCl7XHJcbiAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoIGNvbmZpZy5vcGVuUmlnaHRTaWRlYmFyQ2xhc3MgKS5hZGRDbGFzcyggY29uZmlnLnRyYW5zaXRpb25DbGFzcyApO1xyXG4gICAgICBzaWRlYmFyRGVsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiggcmlnaHRTaWRlYmFyLmxlbmd0aCA+IDAgKXtcclxuICAgICAgLypPcGVuLVNpZGViYXIgd2hlbiBjbGljayBvbiB0b3BiYXIgYnV0dG9uKi9cclxuICAgICAgJCgnLm9yLXRvZ2dsZS1yaWdodC1zaWRlYmFyJykub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBpZiggb3BlblNpZGViYXIgJiYgYm9keS5oYXNDbGFzcyggY29uZmlnLm9wZW5SaWdodFNpZGViYXJDbGFzcyApICl7XHJcbiAgICAgICAgICBjU2lkZWJhcigpO1xyXG4gICAgICAgIH1lbHNlIGlmKCAhb3BlblNpZGViYXIgKXtcclxuICAgICAgICAgIG9TaWRlYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qQ2xvc2Ugc2lkZWJhciBvbiBjbGljayBvdXRzaWRlKi9cclxuICAgICAgJCggZG9jdW1lbnQgKS5vbihcIm1vdXNlZG93biB0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICBpZiAoICEkKCBlLnRhcmdldCApLmNsb3Nlc3QoIHJpZ2h0U2lkZWJhciApLmxlbmd0aCAmJiBib2R5Lmhhc0NsYXNzKCBjb25maWcub3BlblJpZ2h0U2lkZWJhckNsYXNzICkgKSB7XHJcbiAgICAgICAgICBjU2lkZWJhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaWRlYmFyRGVsYXkoKXtcclxuICAgIG9wZW5TaWRlYmFyID0gdHJ1ZTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgb3BlblNpZGViYXIgPSBmYWxzZTtcclxuICAgIH0sIGNvbmZpZy5vcGVuU2lkZWJhckRlbGF5ICk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaWRlYmFyU3dpcGUoKXtcclxuICAgIC8qT3BlbiBzaWRlZGFyIG9uIHN3aXBlKi9cclxuICAgIHZhciBjYW5jZWxFdmVudCA9IGZhbHNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9wZW5MZWZ0U2lkZWJhcigpe1xyXG4gICAgICBpZiggIW9wZW5TaWRlYmFyICYmICF3cmFwcGVyLmhhc0NsYXNzKCBjb25maWcucmVtb3ZlTGVmdFNpZGViYXJDbGFzcyApICl7XHJcbiAgICAgICAgYm9keS5hZGRDbGFzcyggY29uZmlnLm9wZW5MZWZ0U2lkZWJhckNsYXNzICsgXCIgXCIgKyBjb25maWcudHJhbnNpdGlvbkNsYXNzICk7XHJcbiAgICAgICAgb3BlblNpZGViYXIgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb3BlblJpZ2h0U2lkZWJhcigpe1xyXG4gICAgICBpZiggIW9wZW5TaWRlYmFyICYmIHJpZ2h0U2lkZWJhci5sZW5ndGggPiAwICl7XHJcbiAgICAgICAgYm9keS5hZGRDbGFzcyggY29uZmlnLm9wZW5SaWdodFNpZGViYXJDbGFzcyArIFwiIFwiICsgY29uZmlnLnRyYW5zaXRpb25DbGFzcyApO1xyXG4gICAgICAgIG9wZW5TaWRlYmFyID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdyYXBwZXIuc3dpcGUoIHtcclxuICAgICAgYWxsb3dQYWdlU2Nyb2xsOiBcInZlcnRpY2FsXCIsXHJcbiAgICAgIHByZXZlbnREZWZhdWx0RXZlbnRzOiBmYWxzZSxcclxuICAgICAgZmFsbGJhY2tUb01vdXNlRXZlbnRzOiBmYWxzZSxcclxuICAgICAgc3dpcGVSaWdodDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmKCBpc1J0bCApIHtcclxuICAgICAgICAgIG9wZW5SaWdodFNpZGViYXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb3BlbkxlZnRTaWRlYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzd2lwZUxlZnQ6IGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGlmKCBpc1J0bCApIHtcclxuICAgICAgICAgIG9wZW5MZWZ0U2lkZWJhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvcGVuUmlnaHRTaWRlYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzd2lwZVN0YXR1czogZnVuY3Rpb24oZSwgcCl7XHJcbiAgICAgICAgc3dpdGNoKCBwICl7XHJcbiAgICAgICAgICBjYXNlICdzdGFydCc6XHJcbiAgICAgICAgICAgIGlmKCBvcGVuU2lkZWJhciApe1xyXG4gICAgICAgICAgICAgIGNhbmNlbEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdlbmQnOlxyXG4gICAgICAgICAgICBpZiggY2FuY2VsRXZlbnQgKXtcclxuICAgICAgICAgICAgICBjYW5jZWxFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdjYW5jZWwnOlxyXG4gICAgICAgICAgICBjYW5jZWxFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0aHJlc2hvbGQ6IGNvbmZpZy5zd2lwZVRyZXNob2xkXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoYXRXaWRnZXQoKXtcclxuICAgIHZhciBjaGF0ID0gJChcIi5vci1yaWdodC1zaWRlYmFyIC50YWItcGFuZS5jaGF0XCIpO1xyXG4gICAgdmFyIGNvbnRhY3RzRWwgPSAkKFwiLmNoYXQtY29udGFjdHNcIiwgY2hhdCk7XHJcbiAgICB2YXIgY29udmVyc2F0aW9uRWwgPSAkKFwiLmNoYXQtd2luZG93XCIsIGNoYXQpO1xyXG4gICAgdmFyIG1lc3NhZ2VzQ29udGFpbmVyID0gJChcIi5jaGF0LW1lc3NhZ2VzXCIsIGNvbnZlcnNhdGlvbkVsKTtcclxuICAgIHZhciBtZXNzYWdlc0xpc3QgPSAkKFwiLmNvbnRlbnQgPiB1bFwiLCBtZXNzYWdlc0NvbnRhaW5lcik7XHJcbiAgICB2YXIgbWVzc2FnZXNTY3JvbGxDb250ZW50ID0gJChcIi5uYW5vLWNvbnRlbnRcIiwgbWVzc2FnZXNDb250YWluZXIpO1xyXG4gICAgdmFyIGNoYXRJbnB1dENvbnRhaW5lciA9ICQoXCIuY2hhdC1pbnB1dFwiLCBjb252ZXJzYXRpb25FbCk7XHJcbiAgICB2YXIgY2hhdElucHV0ID0gJChcImlucHV0XCIsIGNoYXRJbnB1dENvbnRhaW5lcik7XHJcbiAgICB2YXIgY2hhdElucHV0U2VuZEJ1dHRvbiA9ICQoXCIuc2VuZC1tc2dcIiwgY2hhdElucHV0Q29udGFpbmVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBvcGVuQ2hhdFdpbmRvdygpe1xyXG4gICAgICBpZiggIWNoYXQuaGFzQ2xhc3MoXCJjaGF0LW9wZW5lZFwiKSApe1xyXG4gICAgICAgIGNoYXQuYWRkQ2xhc3MoXCJjaGF0LW9wZW5lZFwiKTtcclxuICAgICAgICAkKFwiLm9yLXNjcm9sbGVyXCIsIG1lc3NhZ2VzQ29udGFpbmVyKS5uYW5vU2Nyb2xsZXIoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlQ2hhdFdpbmRvdygpe1xyXG4gICAgICBpZiggY2hhdC5oYXNDbGFzcyhcImNoYXQtb3BlbmVkXCIpICl7XHJcbiAgICAgICAgY2hhdC5yZW1vdmVDbGFzcyhcImNoYXQtb3BlbmVkXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypPcGVuIENvbnZlcnNhdGlvbiBXaW5kb3cgd2hlbiBjbGljayBvbiBjaGF0IHVzZXIqL1xyXG4gICAgJChcIi51c2VyIGFcIiwgY29udGFjdHNFbCkub24oJ2NsaWNrJyxmdW5jdGlvbiggZSApe1xyXG4gICAgICAkKFwiLm9yLXNjcm9sbGVyXCIsIGNvbnRhY3RzRWwpLm5hbm9TY3JvbGxlcih7IHN0b3A6IHRydWUgfSk7XHJcbiAgICAgIG9wZW5DaGF0V2luZG93KCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qQ2xvc2UgY2hhdCBjb252IHdpbmRvdyovXHJcbiAgICAkKFwiLnRpdGxlIC5yZXR1cm5cIiwgY29udmVyc2F0aW9uRWwpLm9uKCdjbGljaycsZnVuY3Rpb24oIGUgKXtcclxuICAgICAgY2xvc2VDaGF0V2luZG93KCk7XHJcbiAgICAgIHNjcm9sbGVySW5pdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypTZW5kIG1lc3NhZ2UqL1xyXG4gICAgZnVuY3Rpb24gc2VuZE1zZyhtc2csIHNlbGYpe1xyXG4gICAgICB2YXIgJG1lc3NhZ2UgPSAkKCc8bGkgY2xhc3M9XCInICsgKChzZWxmKT8nc2VsZic6J2ZyaWVuZCcpICsgJ1wiPjwvbGk+Jyk7XHJcblxyXG4gICAgICBpZiggbXNnICE9ICcnICl7XHJcbiAgICAgICAgJCgnPGRpdiBjbGFzcz1cIm1zZ1wiPicgKyBtc2cgKyAnPC9kaXY+JykuYXBwZW5kVG8oJG1lc3NhZ2UpO1xyXG4gICAgICAgICRtZXNzYWdlLmFwcGVuZFRvKG1lc3NhZ2VzTGlzdCk7XHJcblxyXG4gICAgICAgIG1lc3NhZ2VzU2Nyb2xsQ29udGVudC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAnc2Nyb2xsVG9wJzogbWVzc2FnZXNTY3JvbGxDb250ZW50LnByb3AoXCJzY3JvbGxIZWlnaHRcIilcclxuICAgICAgICB9LCA5MDAsICdzd2luZycpO1xyXG5cclxuICAgICAgICBzY3JvbGxlckluaXQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qU2VuZCBtc2cgd2hlbiBjbGljayBvbiAnc2VuZCcgYnV0dG9uIG9yIHByZXNzICdFbnRlcicqL1xyXG4gICAgICBjaGF0SW5wdXQua2V5cHJlc3MoZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIHZhciBrZXljb2RlID0gKGV2ZW50LmtleUNvZGUgPyBldmVudC5rZXlDb2RlIDogZXZlbnQud2hpY2gpO1xyXG4gICAgICAgIHZhciBtc2cgPSAkKHRoaXMpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZihrZXljb2RlID09ICcxMycpe1xyXG4gICAgICAgICAgc2VuZE1zZyhtc2csIHRydWUpO1xyXG4gICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNoYXRJbnB1dFNlbmRCdXR0b24ub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBtc2cgPSBjaGF0SW5wdXQudmFsKCk7XHJcbiAgICAgICAgc2VuZE1zZyhtc2csIHRydWUpO1xyXG4gICAgICAgIGNoYXRJbnB1dC52YWwoXCJcIik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2Nyb2xsZXJJbml0KCl7XHJcbiAgICAkKFwiLm9yLXNjcm9sbGVyXCIpLm5hbm9TY3JvbGxlcigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2Nyb2xsVG9wQnV0dG9uKCl7XHJcbiAgICB2YXIgb2Zmc2V0ID0gMjIwO1xyXG4gICAgdmFyIGR1cmF0aW9uID0gNTAwO1xyXG4gICAgdmFyIGJ1dHRvbiA9ICQoJzxkaXYgY2xhc3M9XCJvci1zY3JvbGwtdG9wXCI+PC9kaXY+Jyk7XHJcbiAgICBidXR0b24uYXBwZW5kVG8oXCJib2R5XCIpO1xyXG4gICAgXHJcbiAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICggJCh0aGlzKS5zY3JvbGxUb3AoKSA+IG9mZnNldCApIHtcclxuICAgICAgICBidXR0b24uZmFkZUluKGR1cmF0aW9uKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBidXR0b24uZmFkZU91dChkdXJhdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIFxyXG4gICAgYnV0dG9uLm9uKCd0b3VjaHN0YXJ0IG1vdXNldXAnLGZ1bmN0aW9uKCBlICkge1xyXG4gICAgICAkKCAnaHRtbCwgYm9keScgKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sIGR1cmF0aW9uKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL1dhaXQgZm9yIGZpbmFsIGV2ZW50IG9uIHdpbmRvdyByZXNpemVcclxuICB2YXIgd2FpdEZvckZpbmFsRXZlbnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHRpbWVycyA9IHt9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaywgbXMsIHVuaXF1ZUlkKSB7XHJcbiAgICAgIGlmICghdW5pcXVlSWQpIHtcclxuICAgICAgICB1bmlxdWVJZCA9IFwieDF4MngzeDRcIjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGltZXJzW3VuaXF1ZUlkXSkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCAodGltZXJzW3VuaXF1ZUlkXSk7XHJcbiAgICAgIH1cclxuICAgICAgdGltZXJzW3VuaXF1ZUlkXSA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8vR2VuZXJhbCBkYXRhXHJcbiAgICBjb25mOiBjb25maWcsXHJcbiAgICBjb2xvcjogY29sb3JzLFxyXG5cclxuICAgIC8vSW5pdCBmdW5jdGlvblxyXG4gICAgaW5pdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCB0aGUgbWFpbiBlbGVtZW50cyB3aGVuIGRvY3VtZW50IGlzIHJlYWR5XHJcbiAgICAgIHdyYXBwZXIgPSAkKFwiLm9yLXdyYXBwZXJcIik7XHJcbiAgICAgIGxlZnRTaWRlYmFyID0gJChcIi5vci1sZWZ0LXNpZGViYXJcIik7XHJcbiAgICAgIHJpZ2h0U2lkZWJhciA9ICQoXCIub3ItcmlnaHQtc2lkZWJhclwiKTtcclxuICAgICAgYm9keSA9ICQoXCJib2R5XCIpO1xyXG5cclxuICAgICAgLy9FeHRlbmRzIGJhc2ljIGNvbmZpZyB3aXRoIG9wdGlvbnNcclxuICAgICAgICAkLmV4dGVuZCggY29uZmlnLCBvcHRpb25zICk7XHJcblxyXG4gICAgICAvKkxlZnQgU2lkZWJhciovXHJcbiAgICAgICAgbGVmdFNpZGViYXJJbml0KCk7XHJcblxyXG4gICAgICAvKkZhc3RDbGljayBvbiBtb2JpbGUqL1xyXG4gICAgICAgIEZhc3RDbGljay5hdHRhY2goZG9jdW1lbnQuYm9keSk7XHJcbiAgICAgIFxyXG4gICAgICAvKlJpZ2h0IFNpZGViYXIqL1xyXG4gICAgICAgIHJpZ2h0U2lkZWJhckluaXQoKTtcclxuICAgICAgICBjaGF0V2lkZ2V0KCk7XHJcblxyXG4gICAgICAvKlNpZGViYXJzIFN3aXBlKi9cclxuICAgICAgICBpZiggY29uZmlnLmVuYWJsZVN3aXBlICl7XHJcbiAgICAgICAgICBzaWRlYmFyU3dpcGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAvKkJvZHkgdHJhbnNpdGlvbiBlZmZlY3QqL1xyXG4gICAgICAgIGxlZnRTaWRlYmFyLm9uKFwidHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoIGNvbmZpZy50cmFuc2l0aW9uQ2xhc3MgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8qU2Nyb2xsIFRvcCBidXR0b24qL1xyXG4gICAgICAgIGlmKCBjb25maWcuc2Nyb2xsVG9wICl7XHJcbiAgICAgICAgICBzY3JvbGxUb3BCdXR0b24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAvKkdldCBjb2xvcnMqL1xyXG4gICAgICAgIGNvbG9ycy5wcmltYXJ5ID0gZ2V0Q29sb3IoJ2Nsci1wcmltYXJ5Jyk7XHJcbiAgICAgICAgY29sb3JzLnN1Y2Nlc3MgPSBnZXRDb2xvcignY2xyLXN1Y2Nlc3MnKTtcclxuICAgICAgICBjb2xvcnMuaW5mbyAgICA9IGdldENvbG9yKCdjbHItaW5mbycpO1xyXG4gICAgICAgIGNvbG9ycy53YXJuaW5nID0gZ2V0Q29sb3IoJ2Nsci13YXJuaW5nJyk7XHJcbiAgICAgICAgY29sb3JzLmRhbmdlciAgPSBnZXRDb2xvcignY2xyLWRhbmdlcicpO1xyXG4gICAgICAgIGNvbG9ycy5hbHQxICAgID0gZ2V0Q29sb3IoJ2Nsci1hbHQxJyk7XHJcbiAgICAgICAgY29sb3JzLmFsdDIgICAgPSBnZXRDb2xvcignY2xyLWFsdDInKTtcclxuICAgICAgICBjb2xvcnMuYWx0MyAgICA9IGdldENvbG9yKCdjbHItYWx0MycpO1xyXG4gICAgICAgIGNvbG9ycy5hbHQ0ICAgID0gZ2V0Q29sb3IoJ2Nsci1hbHQ0Jyk7XHJcblxyXG4gICAgICAvL1ByZXZlbnQgQ29ubmVjdGlvbnMgRHJvcGRvd24gY2xvc2VzIG9uIGNsaWNrXHJcbiAgICAgICAgJChcIi5vci1jb25uZWN0aW9uc1wiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oIGUgKXtcclxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAvL05hbm9zY3JvbGxlciBpbml0IGZ1bmN0aW9uXHJcbiAgICAgICAgc2Nyb2xsZXJJbml0KCk7XHJcblxyXG4gICAgICAvKkJpbmQgcGx1Z2lucyBvbiBoaWRkZW4gZWxlbWVudHMqL1xyXG4gICAgICAvKkRyb3Bkb3duIHNob3duIGV2ZW50Ki9cclxuICAgICAgICAkKCcuZHJvcGRvd24nKS5vbignc2hvd24uYnMuZHJvcGRvd24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAkKFwiLm9yLXNjcm9sbGVyXCIpLm5hbm9TY3JvbGxlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAvKlRhYnMgcmVmcmVzaCBoaWRkZW4gZWxlbWVudHMqL1xyXG4gICAgICAgICQoJy5uYXYtdGFicycpLm9uKCdzaG93bi5icy50YWInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgJChcIi5vci1zY3JvbGxlclwiKS5uYW5vU2Nyb2xsZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvKlRvb2x0aXBzKi9cclxuICAgICAgICAkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpO1xyXG4gICAgICBcclxuICAgICAgLypQb3BvdmVyKi9cclxuICAgICAgICAkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcigpO1xyXG5cclxuICAgICAgLypCb290c3RyYXAgbW9kYWwgc2Nyb2xsIHRvcCBmaXgqL1xyXG4gICAgICAgICQoJy5tb2RhbCcpLm9uKCdzaG93LmJzLm1vZGFsJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICQoXCJodG1sXCIpLmFkZENsYXNzKCdvci1tb2RhbC1vcGVuJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5tb2RhbCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgJChcImh0bWxcIikucmVtb3ZlQ2xhc3MoJ29yLW1vZGFsLW9wZW4nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy9NZXRob2RzXHJcbiAgICBjbG9zZVN1Yk1lbnU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciBzdWJNZW51ID0gJChcIi5zaWRlYmFyLWVsZW1lbnRzID4gbGkgPiB1bDp2aXNpYmxlXCIsIGxlZnRTaWRlYmFyKTtcclxuICAgICAgc3ViTWVudS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc3ViTWVudS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICB9LCA1MCk7XHJcbiAgICB9XHJcbiAgfTtcclxuIFxyXG59KSgpO1xyXG4vL0Zhc3RDbGlja1xyXG5mdW5jdGlvbiBGYXN0Q2xpY2soYSxiKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX12YXIgZDtpZihiPWJ8fHt9LHRoaXMudHJhY2tpbmdDbGljaz0hMSx0aGlzLnRyYWNraW5nQ2xpY2tTdGFydD0wLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLHRoaXMudG91Y2hTdGFydFg9MCx0aGlzLnRvdWNoU3RhcnRZPTAsdGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyPTAsdGhpcy50b3VjaEJvdW5kYXJ5PWIudG91Y2hCb3VuZGFyeXx8MTAsdGhpcy5sYXllcj1hLHRoaXMudGFwRGVsYXk9Yi50YXBEZWxheXx8MjAwLCFGYXN0Q2xpY2subm90TmVlZGVkKGEpKXtmb3IodmFyIGU9W1wib25Nb3VzZVwiLFwib25DbGlja1wiLFwib25Ub3VjaFN0YXJ0XCIsXCJvblRvdWNoTW92ZVwiLFwib25Ub3VjaEVuZFwiLFwib25Ub3VjaENhbmNlbFwiXSxmPXRoaXMsZz0wLGg9ZS5sZW5ndGg7ZzxoO2crKylmW2VbZ11dPWMoZltlW2ddXSxmKTtkZXZpY2VJc0FuZHJvaWQmJihhLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIix0aGlzLm9uTW91c2UsITApLGEuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZSwhMCksYS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZSwhMCkpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLCEwKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUsITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaENhbmNlbCwhMSksRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbnx8KGEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCl7dmFyIGU9Tm9kZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcImNsaWNrXCI9PT1iP2UuY2FsbChhLGIsYy5oaWphY2tlZHx8YyxkKTplLmNhbGwoYSxiLGMsZCl9LGEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihiLGMsZCl7dmFyIGU9Tm9kZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcImNsaWNrXCI9PT1iP2UuY2FsbChhLGIsYy5oaWphY2tlZHx8KGMuaGlqYWNrZWQ9ZnVuY3Rpb24oYSl7YS5wcm9wYWdhdGlvblN0b3BwZWR8fGMoYSl9KSxkKTplLmNhbGwoYSxiLGMsZCl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLm9uY2xpY2smJihkPWEub25jbGljayxhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2QoYSl9LCExKSxhLm9uY2xpY2s9bnVsbCl9fXZhciBkZXZpY2VJc0FuZHJvaWQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiQW5kcm9pZFwiKT4wLGRldmljZUlzSU9TPS9pUChhZHxob25lfG9kKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxkZXZpY2VJc0lPUzQ9ZGV2aWNlSXNJT1MmJi9PUyA0X1xcZChfXFxkKT8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZGV2aWNlSXNJT1NXaXRoQmFkVGFyZ2V0PWRldmljZUlzSU9TJiYvT1MgKFs2LTldfFxcZHsyfSlfXFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGRldmljZUlzQmxhY2tCZXJyeTEwPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkJCMTBcIik+MDtGYXN0Q2xpY2sucHJvdG90eXBlLm5lZWRzQ2xpY2s9ZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7c3dpdGNoKGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Y2FzZVwiYnV0dG9uXCI6Y2FzZVwic2VsZWN0XCI6Y2FzZVwidGV4dGFyZWFcIjppZihhLmRpc2FibGVkKXJldHVybiEwO2JyZWFrO2Nhc2VcImlucHV0XCI6aWYoZGV2aWNlSXNJT1MmJlwiZmlsZVwiPT09YS50eXBlfHxhLmRpc2FibGVkKXJldHVybiEwO2JyZWFrO2Nhc2VcImxhYmVsXCI6Y2FzZVwidmlkZW9cIjpyZXR1cm4hMH1yZXR1cm4vXFxibmVlZHNjbGlja1xcYi8udGVzdChhLmNsYXNzTmFtZSl9LEZhc3RDbGljay5wcm90b3R5cGUubmVlZHNGb2N1cz1mdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtzd2l0Y2goYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJ0ZXh0YXJlYVwiOnJldHVybiEwO2Nhc2VcInNlbGVjdFwiOnJldHVybiFkZXZpY2VJc0FuZHJvaWQ7Y2FzZVwiaW5wdXRcIjpzd2l0Y2goYS50eXBlKXtjYXNlXCJidXR0b25cIjpjYXNlXCJjaGVja2JveFwiOmNhc2VcImZpbGVcIjpjYXNlXCJpbWFnZVwiOmNhc2VcInJhZGlvXCI6Y2FzZVwic3VibWl0XCI6cmV0dXJuITF9cmV0dXJuIWEuZGlzYWJsZWQmJiFhLnJlYWRPbmx5O2RlZmF1bHQ6cmV0dXJuL1xcYm5lZWRzZm9jdXNcXGIvLnRlc3QoYS5jbGFzc05hbWUpfX0sRmFzdENsaWNrLnByb3RvdHlwZS5zZW5kQ2xpY2s9ZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjt2YXIgYyxkLGUsZjtkb2N1bWVudC5hY3RpdmVFbGVtZW50JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50IT09YSYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksZj1iLmNoYW5nZWRUb3VjaGVzWzBdLGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKSxlLmluaXRNb3VzZUV2ZW50KFwibW91c2Vkb3duXCIsITAsITAsd2luZG93LDEsZi5zY3JlZW5YLGYuc2NyZWVuWSxmLmNsaWVudFgsZi5jbGllbnRZLCExLCExLCExLCExLDAsbnVsbCksZS5mb3J3YXJkZWRUb3VjaEV2ZW50PSEwLGEuZGlzcGF0Y2hFdmVudChlKSxkPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIiksZC5pbml0TW91c2VFdmVudChcIm1vdXNldXBcIiwhMCwhMCx3aW5kb3csMSxmLnNjcmVlblgsZi5zY3JlZW5ZLGYuY2xpZW50WCxmLmNsaWVudFksITEsITEsITEsITEsMCxudWxsKSxkLmZvcndhcmRlZFRvdWNoRXZlbnQ9ITAsYS5kaXNwYXRjaEV2ZW50KGQpLGM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKSxjLmluaXRNb3VzZUV2ZW50KHRoaXMuZGV0ZXJtaW5lRXZlbnRUeXBlKGEpLCEwLCEwLHdpbmRvdywxLGYuc2NyZWVuWCxmLnNjcmVlblksZi5jbGllbnRYLGYuY2xpZW50WSwhMSwhMSwhMSwhMSwwLG51bGwpLGMuZm9yd2FyZGVkVG91Y2hFdmVudD0hMCxhLmRpc3BhdGNoRXZlbnQoYyl9LEZhc3RDbGljay5wcm90b3R5cGUuZGV0ZXJtaW5lRXZlbnRUeXBlPWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3JldHVybiBkZXZpY2VJc0FuZHJvaWQmJlwic2VsZWN0XCI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKT9cIm1vdXNlZG93blwiOlwiY2xpY2tcIn0sRmFzdENsaWNrLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYjtkZXZpY2VJc0lPUyYmYS5zZXRTZWxlY3Rpb25SYW5nZSYmMCE9PWEudHlwZS5pbmRleE9mKFwiZGF0ZVwiKSYmXCJ0aW1lXCIhPT1hLnR5cGU/KGI9YS52YWx1ZS5sZW5ndGgsYS5zZXRTZWxlY3Rpb25SYW5nZShiLGIpKTphLmZvY3VzKCl9LEZhc3RDbGljay5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUGFyZW50PWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3ZhciBiLGM7aWYoYj1hLmZhc3RDbGlja1Njcm9sbFBhcmVudCwhYnx8IWIuY29udGFpbnMoYSkpe2M9YTtkb3tpZihjLnNjcm9sbEhlaWdodD5jLm9mZnNldEhlaWdodCl7Yj1jLGEuZmFzdENsaWNrU2Nyb2xsUGFyZW50PWM7YnJlYWt9Yz1jLnBhcmVudEVsZW1lbnR9d2hpbGUoYyl9YiYmKGIuZmFzdENsaWNrTGFzdFNjcm9sbFRvcD1iLnNjcm9sbFRvcCl9LEZhc3RDbGljay5wcm90b3R5cGUuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldD1mdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFP2EucGFyZW50Tm9kZTphfSxGYXN0Q2xpY2sucHJvdG90eXBlLm9uVG91Y2hTdGFydD1mdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYixjLGQ7aWYoYS50YXJnZXRUb3VjaGVzLmxlbmd0aD4xKXJldHVybiEwO2lmKGI9dGhpcy5nZXRUYXJnZXRFbGVtZW50RnJvbUV2ZW50VGFyZ2V0KGEudGFyZ2V0KSxjPWEudGFyZ2V0VG91Y2hlc1swXSxkZXZpY2VJc0lPUyl7aWYoZD13aW5kb3cuZ2V0U2VsZWN0aW9uKCksZC5yYW5nZUNvdW50JiYhZC5pc0NvbGxhcHNlZClyZXR1cm4hMDtpZighZGV2aWNlSXNJT1M0KXtpZihjLmlkZW50aWZpZXImJmMuaWRlbnRpZmllcj09PXRoaXMubGFzdFRvdWNoSWRlbnRpZmllcilyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpLCExO3RoaXMubGFzdFRvdWNoSWRlbnRpZmllcj1jLmlkZW50aWZpZXIsdGhpcy51cGRhdGVTY3JvbGxQYXJlbnQoYil9fXJldHVybiB0aGlzLnRyYWNraW5nQ2xpY2s9ITAsdGhpcy50cmFja2luZ0NsaWNrU3RhcnQ9YS50aW1lU3RhbXAsdGhpcy50YXJnZXRFbGVtZW50PWIsdGhpcy50b3VjaFN0YXJ0WD1jLnBhZ2VYLHRoaXMudG91Y2hTdGFydFk9Yy5wYWdlWSxhLnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU8dGhpcy50YXBEZWxheSYmYS5wcmV2ZW50RGVmYXVsdCgpLCEwfSxGYXN0Q2xpY2sucHJvdG90eXBlLnRvdWNoSGFzTW92ZWQ9ZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9YS5jaGFuZ2VkVG91Y2hlc1swXSxjPXRoaXMudG91Y2hCb3VuZGFyeTtyZXR1cm4gTWF0aC5hYnMoYi5wYWdlWC10aGlzLnRvdWNoU3RhcnRYKT5jfHxNYXRoLmFicyhiLnBhZ2VZLXRoaXMudG91Y2hTdGFydFkpPmN9LEZhc3RDbGljay5wcm90b3R5cGUub25Ub3VjaE1vdmU9ZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIXRoaXMudHJhY2tpbmdDbGlja3x8KCh0aGlzLnRhcmdldEVsZW1lbnQhPT10aGlzLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQoYS50YXJnZXQpfHx0aGlzLnRvdWNoSGFzTW92ZWQoYSkpJiYodGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsKSwhMCl9LEZhc3RDbGljay5wcm90b3R5cGUuZmluZENvbnRyb2w9ZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHZvaWQgMCE9PWEuY29udHJvbD9hLmNvbnRyb2w6YS5odG1sRm9yP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaHRtbEZvcik6YS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uLCBpbnB1dDpub3QoW3R5cGU9aGlkZGVuXSksIGtleWdlbiwgbWV0ZXIsIG91dHB1dCwgcHJvZ3Jlc3MsIHNlbGVjdCwgdGV4dGFyZWFcIil9LEZhc3RDbGljay5wcm90b3R5cGUub25Ub3VjaEVuZD1mdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgYixjLGQsZSxmLGc9dGhpcy50YXJnZXRFbGVtZW50O2lmKCF0aGlzLnRyYWNraW5nQ2xpY2spcmV0dXJuITA7aWYoYS50aW1lU3RhbXAtdGhpcy5sYXN0Q2xpY2tUaW1lPHRoaXMudGFwRGVsYXkpcmV0dXJuIHRoaXMuY2FuY2VsTmV4dENsaWNrPSEwLCEwO2lmKHRoaXMuY2FuY2VsTmV4dENsaWNrPSExLHRoaXMubGFzdENsaWNrVGltZT1hLnRpbWVTdGFtcCxjPXRoaXMudHJhY2tpbmdDbGlja1N0YXJ0LHRoaXMudHJhY2tpbmdDbGljaz0hMSx0aGlzLnRyYWNraW5nQ2xpY2tTdGFydD0wLGRldmljZUlzSU9TV2l0aEJhZFRhcmdldCYmKGY9YS5jaGFuZ2VkVG91Y2hlc1swXSxnPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZi5wYWdlWC13aW5kb3cucGFnZVhPZmZzZXQsZi5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpfHxnLGcuZmFzdENsaWNrU2Nyb2xsUGFyZW50PXRoaXMudGFyZ2V0RWxlbWVudC5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQpLGQ9Zy50YWdOYW1lLnRvTG93ZXJDYXNlKCksXCJsYWJlbFwiPT09ZCl7aWYoYj10aGlzLmZpbmRDb250cm9sKGcpKXtpZih0aGlzLmZvY3VzKGcpLGRldmljZUlzQW5kcm9pZClyZXR1cm4hMTtnPWJ9fWVsc2UgaWYodGhpcy5uZWVkc0ZvY3VzKGcpKXJldHVybiBhLnRpbWVTdGFtcC1jPjEwMHx8ZGV2aWNlSXNJT1MmJndpbmRvdy50b3AhPT13aW5kb3cmJlwiaW5wdXRcIj09PWQ/KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLCExKToodGhpcy5mb2N1cyhnKSx0aGlzLnNlbmRDbGljayhnLGEpLGRldmljZUlzSU9TJiZcInNlbGVjdFwiPT09ZHx8KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLGEucHJldmVudERlZmF1bHQoKSksITEpO3JldHVybiEoIWRldmljZUlzSU9TfHxkZXZpY2VJc0lPUzR8fChlPWcuZmFzdENsaWNrU2Nyb2xsUGFyZW50LCFlfHxlLmZhc3RDbGlja0xhc3RTY3JvbGxUb3A9PT1lLnNjcm9sbFRvcCkpfHwodGhpcy5uZWVkc0NsaWNrKGcpfHwoYS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc2VuZENsaWNrKGcsYSkpLCExKX0sRmFzdENsaWNrLnByb3RvdHlwZS5vblRvdWNoQ2FuY2VsPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsfSxGYXN0Q2xpY2sucHJvdG90eXBlLm9uTW91c2U9ZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIXRoaXMudGFyZ2V0RWxlbWVudHx8KCEhYS5mb3J3YXJkZWRUb3VjaEV2ZW50fHwoIWEuY2FuY2VsYWJsZXx8KCEoIXRoaXMubmVlZHNDbGljayh0aGlzLnRhcmdldEVsZW1lbnQpfHx0aGlzLmNhbmNlbE5leHRDbGljayl8fChhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj9hLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOmEucHJvcGFnYXRpb25TdG9wcGVkPSEwLGEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpLCExKSkpKX0sRmFzdENsaWNrLnByb3RvdHlwZS5vbkNsaWNrPWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3ZhciBiO3JldHVybiB0aGlzLnRyYWNraW5nQ2xpY2s/KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLHRoaXMudHJhY2tpbmdDbGljaz0hMSwhMCk6XCJzdWJtaXRcIj09PWEudGFyZ2V0LnR5cGUmJjA9PT1hLmRldGFpbHx8KGI9dGhpcy5vbk1vdXNlKGEpLGJ8fCh0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCksYil9LEZhc3RDbGljay5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBhPXRoaXMubGF5ZXI7ZGV2aWNlSXNBbmRyb2lkJiYoYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsdGhpcy5vbk1vdXNlLCEwKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uTW91c2UsITApLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uTW91c2UsITApKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljaywhMCksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0LCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm9uVG91Y2hNb3ZlLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMub25Ub3VjaEVuZCwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIix0aGlzLm9uVG91Y2hDYW5jZWwsITEpfSxGYXN0Q2xpY2subm90TmVlZGVkPWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3ZhciBiLGMsZDtpZihcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydClyZXR1cm4hMDtpZihjPSsoL0Nocm9tZVxcLyhbMC05XSspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbLDBdKVsxXSl7aWYoIWRldmljZUlzQW5kcm9pZClyZXR1cm4hMDtpZihiPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpKXtpZihiLmNvbnRlbnQuaW5kZXhPZihcInVzZXItc2NhbGFibGU9bm9cIikhPT0tMSlyZXR1cm4hMDtpZihjPjMxJiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg8PXdpbmRvdy5vdXRlcldpZHRoKXJldHVybiEwfX1pZihkZXZpY2VJc0JsYWNrQmVycnkxMCYmKGQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhbMC05XSopXFwuKFswLTldKikvKSxkWzFdPj0xMCYmZFsyXT49MyYmKGI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpKSl7aWYoYi5jb250ZW50LmluZGV4T2YoXCJ1c2VyLXNjYWxhYmxlPW5vXCIpIT09LTEpcmV0dXJuITA7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoPD13aW5kb3cub3V0ZXJXaWR0aClyZXR1cm4hMH1yZXR1cm5cIm5vbmVcIj09PWEuc3R5bGUubXNUb3VjaEFjdGlvbn0sRmFzdENsaWNrLmF0dGFjaD1mdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO3JldHVybiBuZXcgRmFzdENsaWNrKGEsYil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmXCJvYmplY3RcIj09dHlwZW9mIGRlZmluZS5hbWQmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIEZhc3RDbGlja30pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzPyhtb2R1bGUuZXhwb3J0cz1GYXN0Q2xpY2suYXR0YWNoLG1vZHVsZS5leHBvcnRzLkZhc3RDbGljaz1GYXN0Q2xpY2spOndpbmRvdy5GYXN0Q2xpY2s9RmFzdENsaWNrO1xyXG4vLyBUaW55Q29sb3IgdjEuMi4xXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZ3JpbnMvVGlueUNvbG9yXHJcbi8vIDIwMTUtMDgtMTMsIEJyaWFuIEdyaW5zdGVhZCwgTUlUIExpY2Vuc2VcclxuIWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdGlueWNvbG9yKGNvbG9yLG9wdHMpe2lmKGNvbG9yPWNvbG9yP2NvbG9yOlwiXCIsb3B0cz1vcHRzfHx7fSxjb2xvciBpbnN0YW5jZW9mIHRpbnljb2xvcilyZXR1cm4gY29sb3I7aWYoISh0aGlzIGluc3RhbmNlb2YgdGlueWNvbG9yKSlyZXR1cm4gbmV3IHRpbnljb2xvcihjb2xvcixvcHRzKTt2YXIgcmdiPWlucHV0VG9SR0IoY29sb3IpO3RoaXMuX29yaWdpbmFsSW5wdXQ9Y29sb3IsdGhpcy5fcj1yZ2Iucix0aGlzLl9nPXJnYi5nLHRoaXMuX2I9cmdiLmIsdGhpcy5fYT1yZ2IuYSx0aGlzLl9yb3VuZEE9bWF0aFJvdW5kKDEwMCp0aGlzLl9hKS8xMDAsdGhpcy5fZm9ybWF0PW9wdHMuZm9ybWF0fHxyZ2IuZm9ybWF0LHRoaXMuX2dyYWRpZW50VHlwZT1vcHRzLmdyYWRpZW50VHlwZSx0aGlzLl9yPDEmJih0aGlzLl9yPW1hdGhSb3VuZCh0aGlzLl9yKSksdGhpcy5fZzwxJiYodGhpcy5fZz1tYXRoUm91bmQodGhpcy5fZykpLHRoaXMuX2I8MSYmKHRoaXMuX2I9bWF0aFJvdW5kKHRoaXMuX2IpKSx0aGlzLl9vaz1yZ2Iub2ssdGhpcy5fdGNfaWQ9dGlueUNvdW50ZXIrK31mdW5jdGlvbiBpbnB1dFRvUkdCKGNvbG9yKXt2YXIgcmdiPXtyOjAsZzowLGI6MH0sYT0xLG9rPSExLGZvcm1hdD0hMTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgY29sb3ImJihjb2xvcj1zdHJpbmdJbnB1dFRvT2JqZWN0KGNvbG9yKSksXCJvYmplY3RcIj09dHlwZW9mIGNvbG9yJiYoY29sb3IuaGFzT3duUHJvcGVydHkoXCJyXCIpJiZjb2xvci5oYXNPd25Qcm9wZXJ0eShcImdcIikmJmNvbG9yLmhhc093blByb3BlcnR5KFwiYlwiKT8ocmdiPXJnYlRvUmdiKGNvbG9yLnIsY29sb3IuZyxjb2xvci5iKSxvaz0hMCxmb3JtYXQ9XCIlXCI9PT1TdHJpbmcoY29sb3Iucikuc3Vic3RyKC0xKT9cInByZ2JcIjpcInJnYlwiKTpjb2xvci5oYXNPd25Qcm9wZXJ0eShcImhcIikmJmNvbG9yLmhhc093blByb3BlcnR5KFwic1wiKSYmY29sb3IuaGFzT3duUHJvcGVydHkoXCJ2XCIpPyhjb2xvci5zPWNvbnZlcnRUb1BlcmNlbnRhZ2UoY29sb3IucyksY29sb3Iudj1jb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLnYpLHJnYj1oc3ZUb1JnYihjb2xvci5oLGNvbG9yLnMsY29sb3Iudiksb2s9ITAsZm9ybWF0PVwiaHN2XCIpOmNvbG9yLmhhc093blByb3BlcnR5KFwiaFwiKSYmY29sb3IuaGFzT3duUHJvcGVydHkoXCJzXCIpJiZjb2xvci5oYXNPd25Qcm9wZXJ0eShcImxcIikmJihjb2xvci5zPWNvbnZlcnRUb1BlcmNlbnRhZ2UoY29sb3IucyksY29sb3IubD1jb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLmwpLHJnYj1oc2xUb1JnYihjb2xvci5oLGNvbG9yLnMsY29sb3IubCksb2s9ITAsZm9ybWF0PVwiaHNsXCIpLGNvbG9yLmhhc093blByb3BlcnR5KFwiYVwiKSYmKGE9Y29sb3IuYSkpLGE9Ym91bmRBbHBoYShhKSx7b2s6b2ssZm9ybWF0OmNvbG9yLmZvcm1hdHx8Zm9ybWF0LHI6bWF0aE1pbigyNTUsbWF0aE1heChyZ2IuciwwKSksZzptYXRoTWluKDI1NSxtYXRoTWF4KHJnYi5nLDApKSxiOm1hdGhNaW4oMjU1LG1hdGhNYXgocmdiLmIsMCkpLGE6YX19ZnVuY3Rpb24gcmdiVG9SZ2IocixnLGIpe3JldHVybntyOjI1NSpib3VuZDAxKHIsMjU1KSxnOjI1NSpib3VuZDAxKGcsMjU1KSxiOjI1NSpib3VuZDAxKGIsMjU1KX19ZnVuY3Rpb24gcmdiVG9Ic2wocixnLGIpe3I9Ym91bmQwMShyLDI1NSksZz1ib3VuZDAxKGcsMjU1KSxiPWJvdW5kMDEoYiwyNTUpO3ZhciBoLHMsbWF4PW1hdGhNYXgocixnLGIpLG1pbj1tYXRoTWluKHIsZyxiKSxsPShtYXgrbWluKS8yO2lmKG1heD09bWluKWg9cz0wO2Vsc2V7dmFyIGQ9bWF4LW1pbjtzd2l0Y2gocz1sPi41P2QvKDItbWF4LW1pbik6ZC8obWF4K21pbiksbWF4KXtjYXNlIHI6aD0oZy1iKS9kKyhiPmc/NjowKTticmVhaztjYXNlIGc6aD0oYi1yKS9kKzI7YnJlYWs7Y2FzZSBiOmg9KHItZykvZCs0fWgvPTZ9cmV0dXJue2g6aCxzOnMsbDpsfX1mdW5jdGlvbiBoc2xUb1JnYihoLHMsbCl7ZnVuY3Rpb24gaHVlMnJnYihwLHEsdCl7cmV0dXJuIDA+dCYmKHQrPTEpLHQ+MSYmKHQtPTEpLDEvNj50P3ArNioocS1wKSp0Oi41PnQ/cToyLzM+dD9wKzYqKHEtcCkqKDIvMy10KTpwfXZhciByLGcsYjtpZihoPWJvdW5kMDEoaCwzNjApLHM9Ym91bmQwMShzLDEwMCksbD1ib3VuZDAxKGwsMTAwKSwwPT09cylyPWc9Yj1sO2Vsc2V7dmFyIHE9LjU+bD9sKigxK3MpOmwrcy1sKnMscD0yKmwtcTtyPWh1ZTJyZ2IocCxxLGgrMS8zKSxnPWh1ZTJyZ2IocCxxLGgpLGI9aHVlMnJnYihwLHEsaC0xLzMpfXJldHVybntyOjI1NSpyLGc6MjU1KmcsYjoyNTUqYn19ZnVuY3Rpb24gcmdiVG9Ic3YocixnLGIpe3I9Ym91bmQwMShyLDI1NSksZz1ib3VuZDAxKGcsMjU1KSxiPWJvdW5kMDEoYiwyNTUpO3ZhciBoLHMsbWF4PW1hdGhNYXgocixnLGIpLG1pbj1tYXRoTWluKHIsZyxiKSx2PW1heCxkPW1heC1taW47aWYocz0wPT09bWF4PzA6ZC9tYXgsbWF4PT1taW4paD0wO2Vsc2V7c3dpdGNoKG1heCl7Y2FzZSByOmg9KGctYikvZCsoYj5nPzY6MCk7YnJlYWs7Y2FzZSBnOmg9KGItcikvZCsyO2JyZWFrO2Nhc2UgYjpoPShyLWcpL2QrNH1oLz02fXJldHVybntoOmgsczpzLHY6dn19ZnVuY3Rpb24gaHN2VG9SZ2IoaCxzLHYpe2g9Nipib3VuZDAxKGgsMzYwKSxzPWJvdW5kMDEocywxMDApLHY9Ym91bmQwMSh2LDEwMCk7dmFyIGk9bWF0aC5mbG9vcihoKSxmPWgtaSxwPXYqKDEtcykscT12KigxLWYqcyksdD12KigxLSgxLWYpKnMpLG1vZD1pJTYscj1bdixxLHAscCx0LHZdW21vZF0sZz1bdCx2LHYscSxwLHBdW21vZF0sYj1bcCxwLHQsdix2LHFdW21vZF07cmV0dXJue3I6MjU1KnIsZzoyNTUqZyxiOjI1NSpifX1mdW5jdGlvbiByZ2JUb0hleChyLGcsYixhbGxvdzNDaGFyKXt2YXIgaGV4PVtwYWQyKG1hdGhSb3VuZChyKS50b1N0cmluZygxNikpLHBhZDIobWF0aFJvdW5kKGcpLnRvU3RyaW5nKDE2KSkscGFkMihtYXRoUm91bmQoYikudG9TdHJpbmcoMTYpKV07cmV0dXJuIGFsbG93M0NoYXImJmhleFswXS5jaGFyQXQoMCk9PWhleFswXS5jaGFyQXQoMSkmJmhleFsxXS5jaGFyQXQoMCk9PWhleFsxXS5jaGFyQXQoMSkmJmhleFsyXS5jaGFyQXQoMCk9PWhleFsyXS5jaGFyQXQoMSk/aGV4WzBdLmNoYXJBdCgwKStoZXhbMV0uY2hhckF0KDApK2hleFsyXS5jaGFyQXQoMCk6aGV4LmpvaW4oXCJcIil9ZnVuY3Rpb24gcmdiYVRvSGV4KHIsZyxiLGEpe3ZhciBoZXg9W3BhZDIoY29udmVydERlY2ltYWxUb0hleChhKSkscGFkMihtYXRoUm91bmQocikudG9TdHJpbmcoMTYpKSxwYWQyKG1hdGhSb3VuZChnKS50b1N0cmluZygxNikpLHBhZDIobWF0aFJvdW5kKGIpLnRvU3RyaW5nKDE2KSldO3JldHVybiBoZXguam9pbihcIlwiKX1mdW5jdGlvbiBkZXNhdHVyYXRlKGNvbG9yLGFtb3VudCl7YW1vdW50PTA9PT1hbW91bnQ/MDphbW91bnR8fDEwO3ZhciBoc2w9dGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO3JldHVybiBoc2wucy09YW1vdW50LzEwMCxoc2wucz1jbGFtcDAxKGhzbC5zKSx0aW55Y29sb3IoaHNsKX1mdW5jdGlvbiBzYXR1cmF0ZShjb2xvcixhbW91bnQpe2Ftb3VudD0wPT09YW1vdW50PzA6YW1vdW50fHwxMDt2YXIgaHNsPXRpbnljb2xvcihjb2xvcikudG9Ic2woKTtyZXR1cm4gaHNsLnMrPWFtb3VudC8xMDAsaHNsLnM9Y2xhbXAwMShoc2wucyksdGlueWNvbG9yKGhzbCl9ZnVuY3Rpb24gZ3JleXNjYWxlKGNvbG9yKXtyZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5kZXNhdHVyYXRlKDEwMCl9ZnVuY3Rpb24gbGlnaHRlbihjb2xvcixhbW91bnQpe2Ftb3VudD0wPT09YW1vdW50PzA6YW1vdW50fHwxMDt2YXIgaHNsPXRpbnljb2xvcihjb2xvcikudG9Ic2woKTtyZXR1cm4gaHNsLmwrPWFtb3VudC8xMDAsaHNsLmw9Y2xhbXAwMShoc2wubCksdGlueWNvbG9yKGhzbCl9ZnVuY3Rpb24gYnJpZ2h0ZW4oY29sb3IsYW1vdW50KXthbW91bnQ9MD09PWFtb3VudD8wOmFtb3VudHx8MTA7dmFyIHJnYj10aW55Y29sb3IoY29sb3IpLnRvUmdiKCk7cmV0dXJuIHJnYi5yPW1hdGhNYXgoMCxtYXRoTWluKDI1NSxyZ2Iuci1tYXRoUm91bmQoMjU1Ki0oYW1vdW50LzEwMCkpKSkscmdiLmc9bWF0aE1heCgwLG1hdGhNaW4oMjU1LHJnYi5nLW1hdGhSb3VuZCgyNTUqLShhbW91bnQvMTAwKSkpKSxyZ2IuYj1tYXRoTWF4KDAsbWF0aE1pbigyNTUscmdiLmItbWF0aFJvdW5kKDI1NSotKGFtb3VudC8xMDApKSkpLHRpbnljb2xvcihyZ2IpfWZ1bmN0aW9uIGRhcmtlbihjb2xvcixhbW91bnQpe2Ftb3VudD0wPT09YW1vdW50PzA6YW1vdW50fHwxMDt2YXIgaHNsPXRpbnljb2xvcihjb2xvcikudG9Ic2woKTtyZXR1cm4gaHNsLmwtPWFtb3VudC8xMDAsaHNsLmw9Y2xhbXAwMShoc2wubCksdGlueWNvbG9yKGhzbCl9ZnVuY3Rpb24gc3Bpbihjb2xvcixhbW91bnQpe3ZhciBoc2w9dGlueWNvbG9yKGNvbG9yKS50b0hzbCgpLGh1ZT0obWF0aFJvdW5kKGhzbC5oKSthbW91bnQpJTM2MDtyZXR1cm4gaHNsLmg9MD5odWU/MzYwK2h1ZTpodWUsdGlueWNvbG9yKGhzbCl9ZnVuY3Rpb24gY29tcGxlbWVudChjb2xvcil7dmFyIGhzbD10aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7cmV0dXJuIGhzbC5oPShoc2wuaCsxODApJTM2MCx0aW55Y29sb3IoaHNsKX1mdW5jdGlvbiB0cmlhZChjb2xvcil7dmFyIGhzbD10aW55Y29sb3IoY29sb3IpLnRvSHNsKCksaD1oc2wuaDtyZXR1cm5bdGlueWNvbG9yKGNvbG9yKSx0aW55Y29sb3Ioe2g6KGgrMTIwKSUzNjAsczpoc2wucyxsOmhzbC5sfSksdGlueWNvbG9yKHtoOihoKzI0MCklMzYwLHM6aHNsLnMsbDpoc2wubH0pXX1mdW5jdGlvbiB0ZXRyYWQoY29sb3Ipe3ZhciBoc2w9dGlueWNvbG9yKGNvbG9yKS50b0hzbCgpLGg9aHNsLmg7cmV0dXJuW3Rpbnljb2xvcihjb2xvciksdGlueWNvbG9yKHtoOihoKzkwKSUzNjAsczpoc2wucyxsOmhzbC5sfSksdGlueWNvbG9yKHtoOihoKzE4MCklMzYwLHM6aHNsLnMsbDpoc2wubH0pLHRpbnljb2xvcih7aDooaCsyNzApJTM2MCxzOmhzbC5zLGw6aHNsLmx9KV19ZnVuY3Rpb24gc3BsaXRjb21wbGVtZW50KGNvbG9yKXt2YXIgaHNsPXRpbnljb2xvcihjb2xvcikudG9Ic2woKSxoPWhzbC5oO3JldHVyblt0aW55Y29sb3IoY29sb3IpLHRpbnljb2xvcih7aDooaCs3MiklMzYwLHM6aHNsLnMsbDpoc2wubH0pLHRpbnljb2xvcih7aDooaCsyMTYpJTM2MCxzOmhzbC5zLGw6aHNsLmx9KV19ZnVuY3Rpb24gYW5hbG9nb3VzKGNvbG9yLHJlc3VsdHMsc2xpY2VzKXtyZXN1bHRzPXJlc3VsdHN8fDYsc2xpY2VzPXNsaWNlc3x8MzA7dmFyIGhzbD10aW55Y29sb3IoY29sb3IpLnRvSHNsKCkscGFydD0zNjAvc2xpY2VzLHJldD1bdGlueWNvbG9yKGNvbG9yKV07Zm9yKGhzbC5oPShoc2wuaC0ocGFydCpyZXN1bHRzPj4xKSs3MjApJTM2MDstLXJlc3VsdHM7KWhzbC5oPShoc2wuaCtwYXJ0KSUzNjAscmV0LnB1c2godGlueWNvbG9yKGhzbCkpO3JldHVybiByZXR9ZnVuY3Rpb24gbW9ub2Nocm9tYXRpYyhjb2xvcixyZXN1bHRzKXtyZXN1bHRzPXJlc3VsdHN8fDY7Zm9yKHZhciBoc3Y9dGlueWNvbG9yKGNvbG9yKS50b0hzdigpLGg9aHN2Lmgscz1oc3Yucyx2PWhzdi52LHJldD1bXSxtb2RpZmljYXRpb249MS9yZXN1bHRzO3Jlc3VsdHMtLTspcmV0LnB1c2godGlueWNvbG9yKHtoOmgsczpzLHY6dn0pKSx2PSh2K21vZGlmaWNhdGlvbiklMTtyZXR1cm4gcmV0fWZ1bmN0aW9uIGZsaXAobyl7dmFyIGZsaXBwZWQ9e307Zm9yKHZhciBpIGluIG8pby5oYXNPd25Qcm9wZXJ0eShpKSYmKGZsaXBwZWRbb1tpXV09aSk7cmV0dXJuIGZsaXBwZWR9ZnVuY3Rpb24gYm91bmRBbHBoYShhKXtyZXR1cm4gYT1wYXJzZUZsb2F0KGEpLChpc05hTihhKXx8MD5hfHxhPjEpJiYoYT0xKSxhfWZ1bmN0aW9uIGJvdW5kMDEobixtYXgpe2lzT25lUG9pbnRaZXJvKG4pJiYobj1cIjEwMCVcIik7dmFyIHByb2Nlc3NQZXJjZW50PWlzUGVyY2VudGFnZShuKTtyZXR1cm4gbj1tYXRoTWluKG1heCxtYXRoTWF4KDAscGFyc2VGbG9hdChuKSkpLHByb2Nlc3NQZXJjZW50JiYobj1wYXJzZUludChuKm1heCwxMCkvMTAwKSxtYXRoLmFicyhuLW1heCk8MWUtNj8xOm4lbWF4L3BhcnNlRmxvYXQobWF4KX1mdW5jdGlvbiBjbGFtcDAxKHZhbCl7cmV0dXJuIG1hdGhNaW4oMSxtYXRoTWF4KDAsdmFsKSl9ZnVuY3Rpb24gcGFyc2VJbnRGcm9tSGV4KHZhbCl7cmV0dXJuIHBhcnNlSW50KHZhbCwxNil9ZnVuY3Rpb24gaXNPbmVQb2ludFplcm8obil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG4mJi0xIT1uLmluZGV4T2YoXCIuXCIpJiYxPT09cGFyc2VGbG9hdChuKX1mdW5jdGlvbiBpc1BlcmNlbnRhZ2Uobil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG4mJi0xIT1uLmluZGV4T2YoXCIlXCIpfWZ1bmN0aW9uIHBhZDIoYyl7cmV0dXJuIDE9PWMubGVuZ3RoP1wiMFwiK2M6XCJcIitjfWZ1bmN0aW9uIGNvbnZlcnRUb1BlcmNlbnRhZ2Uobil7cmV0dXJuIDE+PW4mJihuPTEwMCpuK1wiJVwiKSxufWZ1bmN0aW9uIGNvbnZlcnREZWNpbWFsVG9IZXgoZCl7cmV0dXJuIE1hdGgucm91bmQoMjU1KnBhcnNlRmxvYXQoZCkpLnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBjb252ZXJ0SGV4VG9EZWNpbWFsKGgpe3JldHVybiBwYXJzZUludEZyb21IZXgoaCkvMjU1fWZ1bmN0aW9uIHN0cmluZ0lucHV0VG9PYmplY3QoY29sb3Ipe2NvbG9yPWNvbG9yLnJlcGxhY2UodHJpbUxlZnQsXCJcIikucmVwbGFjZSh0cmltUmlnaHQsXCJcIikudG9Mb3dlckNhc2UoKTt2YXIgbmFtZWQ9ITE7aWYobmFtZXNbY29sb3JdKWNvbG9yPW5hbWVzW2NvbG9yXSxuYW1lZD0hMDtlbHNlIGlmKFwidHJhbnNwYXJlbnRcIj09Y29sb3IpcmV0dXJue3I6MCxnOjAsYjowLGE6MCxmb3JtYXQ6XCJuYW1lXCJ9O3ZhciBtYXRjaDtyZXR1cm4obWF0Y2g9bWF0Y2hlcnMucmdiLmV4ZWMoY29sb3IpKT97cjptYXRjaFsxXSxnOm1hdGNoWzJdLGI6bWF0Y2hbM119OihtYXRjaD1tYXRjaGVycy5yZ2JhLmV4ZWMoY29sb3IpKT97cjptYXRjaFsxXSxnOm1hdGNoWzJdLGI6bWF0Y2hbM10sYTptYXRjaFs0XX06KG1hdGNoPW1hdGNoZXJzLmhzbC5leGVjKGNvbG9yKSk/e2g6bWF0Y2hbMV0sczptYXRjaFsyXSxsOm1hdGNoWzNdfToobWF0Y2g9bWF0Y2hlcnMuaHNsYS5leGVjKGNvbG9yKSk/e2g6bWF0Y2hbMV0sczptYXRjaFsyXSxsOm1hdGNoWzNdLGE6bWF0Y2hbNF19OihtYXRjaD1tYXRjaGVycy5oc3YuZXhlYyhjb2xvcikpP3toOm1hdGNoWzFdLHM6bWF0Y2hbMl0sdjptYXRjaFszXX06KG1hdGNoPW1hdGNoZXJzLmhzdmEuZXhlYyhjb2xvcikpP3toOm1hdGNoWzFdLHM6bWF0Y2hbMl0sdjptYXRjaFszXSxhOm1hdGNoWzRdfToobWF0Y2g9bWF0Y2hlcnMuaGV4OC5leGVjKGNvbG9yKSk/e2E6Y29udmVydEhleFRvRGVjaW1hbChtYXRjaFsxXSkscjpwYXJzZUludEZyb21IZXgobWF0Y2hbMl0pLGc6cGFyc2VJbnRGcm9tSGV4KG1hdGNoWzNdKSxiOnBhcnNlSW50RnJvbUhleChtYXRjaFs0XSksZm9ybWF0Om5hbWVkP1wibmFtZVwiOlwiaGV4OFwifToobWF0Y2g9bWF0Y2hlcnMuaGV4Ni5leGVjKGNvbG9yKSk/e3I6cGFyc2VJbnRGcm9tSGV4KG1hdGNoWzFdKSxnOnBhcnNlSW50RnJvbUhleChtYXRjaFsyXSksYjpwYXJzZUludEZyb21IZXgobWF0Y2hbM10pLGZvcm1hdDpuYW1lZD9cIm5hbWVcIjpcImhleFwifToobWF0Y2g9bWF0Y2hlcnMuaGV4My5leGVjKGNvbG9yKSk/e3I6cGFyc2VJbnRGcm9tSGV4KG1hdGNoWzFdK1wiXCIrbWF0Y2hbMV0pLGc6cGFyc2VJbnRGcm9tSGV4KG1hdGNoWzJdK1wiXCIrbWF0Y2hbMl0pLGI6cGFyc2VJbnRGcm9tSGV4KG1hdGNoWzNdK1wiXCIrbWF0Y2hbM10pLGZvcm1hdDpuYW1lZD9cIm5hbWVcIjpcImhleFwifTohMX1mdW5jdGlvbiB2YWxpZGF0ZVdDQUcyUGFybXMocGFybXMpe3ZhciBsZXZlbCxzaXplO3JldHVybiBwYXJtcz1wYXJtc3x8e2xldmVsOlwiQUFcIixzaXplOlwic21hbGxcIn0sbGV2ZWw9KHBhcm1zLmxldmVsfHxcIkFBXCIpLnRvVXBwZXJDYXNlKCksc2l6ZT0ocGFybXMuc2l6ZXx8XCJzbWFsbFwiKS50b0xvd2VyQ2FzZSgpLFwiQUFcIiE9PWxldmVsJiZcIkFBQVwiIT09bGV2ZWwmJihsZXZlbD1cIkFBXCIpLFwic21hbGxcIiE9PXNpemUmJlwibGFyZ2VcIiE9PXNpemUmJihzaXplPVwic21hbGxcIikse2xldmVsOmxldmVsLHNpemU6c2l6ZX19dmFyIHRyaW1MZWZ0PS9eW1xccywjXSsvLHRyaW1SaWdodD0vXFxzKyQvLHRpbnlDb3VudGVyPTAsbWF0aD1NYXRoLG1hdGhSb3VuZD1tYXRoLnJvdW5kLG1hdGhNaW49bWF0aC5taW4sbWF0aE1heD1tYXRoLm1heCxtYXRoUmFuZG9tPW1hdGgucmFuZG9tO3Rpbnljb2xvci5wcm90b3R5cGU9e2lzRGFyazpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEJyaWdodG5lc3MoKTwxMjh9LGlzTGlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0RhcmsoKX0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9va30sZ2V0T3JpZ2luYWxJbnB1dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmlnaW5hbElucHV0fSxnZXRGb3JtYXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9ybWF0fSxnZXRBbHBoYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hfSxnZXRCcmlnaHRuZXNzOmZ1bmN0aW9uKCl7dmFyIHJnYj10aGlzLnRvUmdiKCk7cmV0dXJuKDI5OSpyZ2Iucis1ODcqcmdiLmcrMTE0KnJnYi5iKS8xZTN9LGdldEx1bWluYW5jZTpmdW5jdGlvbigpe3ZhciBSc1JHQixHc1JHQixCc1JHQixSLEcsQixyZ2I9dGhpcy50b1JnYigpO3JldHVybiBSc1JHQj1yZ2Iuci8yNTUsR3NSR0I9cmdiLmcvMjU1LEJzUkdCPXJnYi5iLzI1NSxSPS4wMzkyOD49UnNSR0I/UnNSR0IvMTIuOTI6TWF0aC5wb3coKFJzUkdCKy4wNTUpLzEuMDU1LDIuNCksRz0uMDM5Mjg+PUdzUkdCP0dzUkdCLzEyLjkyOk1hdGgucG93KChHc1JHQisuMDU1KS8xLjA1NSwyLjQpLEI9LjAzOTI4Pj1Cc1JHQj9Cc1JHQi8xMi45MjpNYXRoLnBvdygoQnNSR0IrLjA1NSkvMS4wNTUsMi40KSwuMjEyNipSKy43MTUyKkcrLjA3MjIqQn0sc2V0QWxwaGE6ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0aGlzLl9hPWJvdW5kQWxwaGEodmFsdWUpLHRoaXMuX3JvdW5kQT1tYXRoUm91bmQoMTAwKnRoaXMuX2EpLzEwMCx0aGlzfSx0b0hzdjpmdW5jdGlvbigpe3ZhciBoc3Y9cmdiVG9Ic3YodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCpoc3YuaCxzOmhzdi5zLHY6aHN2LnYsYTp0aGlzLl9hfX0sdG9Ic3ZTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgaHN2PXJnYlRvSHN2KHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSxoPW1hdGhSb3VuZCgzNjAqaHN2LmgpLHM9bWF0aFJvdW5kKDEwMCpoc3Yucyksdj1tYXRoUm91bmQoMTAwKmhzdi52KTtyZXR1cm4gMT09dGhpcy5fYT9cImhzdihcIitoK1wiLCBcIitzK1wiJSwgXCIrditcIiUpXCI6XCJoc3ZhKFwiK2grXCIsIFwiK3MrXCIlLCBcIit2K1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hzbDpmdW5jdGlvbigpe3ZhciBoc2w9cmdiVG9Ic2wodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IpO3JldHVybntoOjM2MCpoc2wuaCxzOmhzbC5zLGw6aHNsLmwsYTp0aGlzLl9hfX0sdG9Ic2xTdHJpbmc6ZnVuY3Rpb24oKXt2YXIgaHNsPXJnYlRvSHNsKHRoaXMuX3IsdGhpcy5fZyx0aGlzLl9iKSxoPW1hdGhSb3VuZCgzNjAqaHNsLmgpLHM9bWF0aFJvdW5kKDEwMCpoc2wucyksbD1tYXRoUm91bmQoMTAwKmhzbC5sKTtyZXR1cm4gMT09dGhpcy5fYT9cImhzbChcIitoK1wiLCBcIitzK1wiJSwgXCIrbCtcIiUpXCI6XCJoc2xhKFwiK2grXCIsIFwiK3MrXCIlLCBcIitsK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b0hleDpmdW5jdGlvbihhbGxvdzNDaGFyKXtyZXR1cm4gcmdiVG9IZXgodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsYWxsb3czQ2hhcil9LHRvSGV4U3RyaW5nOmZ1bmN0aW9uKGFsbG93M0NoYXIpe3JldHVyblwiI1wiK3RoaXMudG9IZXgoYWxsb3czQ2hhcil9LHRvSGV4ODpmdW5jdGlvbigpe3JldHVybiByZ2JhVG9IZXgodGhpcy5fcix0aGlzLl9nLHRoaXMuX2IsdGhpcy5fYSl9LHRvSGV4OFN0cmluZzpmdW5jdGlvbigpe3JldHVyblwiI1wiK3RoaXMudG9IZXg4KCl9LHRvUmdiOmZ1bmN0aW9uKCl7cmV0dXJue3I6bWF0aFJvdW5kKHRoaXMuX3IpLGc6bWF0aFJvdW5kKHRoaXMuX2cpLGI6bWF0aFJvdW5kKHRoaXMuX2IpLGE6dGhpcy5fYX19LHRvUmdiU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMuX2E/XCJyZ2IoXCIrbWF0aFJvdW5kKHRoaXMuX3IpK1wiLCBcIittYXRoUm91bmQodGhpcy5fZykrXCIsIFwiK21hdGhSb3VuZCh0aGlzLl9iKStcIilcIjpcInJnYmEoXCIrbWF0aFJvdW5kKHRoaXMuX3IpK1wiLCBcIittYXRoUm91bmQodGhpcy5fZykrXCIsIFwiK21hdGhSb3VuZCh0aGlzLl9iKStcIiwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b1BlcmNlbnRhZ2VSZ2I6ZnVuY3Rpb24oKXtyZXR1cm57cjptYXRoUm91bmQoMTAwKmJvdW5kMDEodGhpcy5fciwyNTUpKStcIiVcIixnOm1hdGhSb3VuZCgxMDAqYm91bmQwMSh0aGlzLl9nLDI1NSkpK1wiJVwiLGI6bWF0aFJvdW5kKDEwMCpib3VuZDAxKHRoaXMuX2IsMjU1KSkrXCIlXCIsYTp0aGlzLl9hfX0sdG9QZXJjZW50YWdlUmdiU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMuX2E/XCJyZ2IoXCIrbWF0aFJvdW5kKDEwMCpib3VuZDAxKHRoaXMuX3IsMjU1KSkrXCIlLCBcIittYXRoUm91bmQoMTAwKmJvdW5kMDEodGhpcy5fZywyNTUpKStcIiUsIFwiK21hdGhSb3VuZCgxMDAqYm91bmQwMSh0aGlzLl9iLDI1NSkpK1wiJSlcIjpcInJnYmEoXCIrbWF0aFJvdW5kKDEwMCpib3VuZDAxKHRoaXMuX3IsMjU1KSkrXCIlLCBcIittYXRoUm91bmQoMTAwKmJvdW5kMDEodGhpcy5fZywyNTUpKStcIiUsIFwiK21hdGhSb3VuZCgxMDAqYm91bmQwMSh0aGlzLl9iLDI1NSkpK1wiJSwgXCIrdGhpcy5fcm91bmRBK1wiKVwifSx0b05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX2E/XCJ0cmFuc3BhcmVudFwiOnRoaXMuX2E8MT8hMTpoZXhOYW1lc1tyZ2JUb0hleCh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYiwhMCldfHwhMX0sdG9GaWx0ZXI6ZnVuY3Rpb24oc2Vjb25kQ29sb3Ipe3ZhciBoZXg4U3RyaW5nPVwiI1wiK3JnYmFUb0hleCh0aGlzLl9yLHRoaXMuX2csdGhpcy5fYix0aGlzLl9hKSxzZWNvbmRIZXg4U3RyaW5nPWhleDhTdHJpbmcsZ3JhZGllbnRUeXBlPXRoaXMuX2dyYWRpZW50VHlwZT9cIkdyYWRpZW50VHlwZSA9IDEsIFwiOlwiXCI7aWYoc2Vjb25kQ29sb3Ipe3ZhciBzPXRpbnljb2xvcihzZWNvbmRDb2xvcik7c2Vjb25kSGV4OFN0cmluZz1zLnRvSGV4OFN0cmluZygpfXJldHVyblwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KFwiK2dyYWRpZW50VHlwZStcInN0YXJ0Q29sb3JzdHI9XCIraGV4OFN0cmluZytcIixlbmRDb2xvcnN0cj1cIitzZWNvbmRIZXg4U3RyaW5nK1wiKVwifSx0b1N0cmluZzpmdW5jdGlvbihmb3JtYXQpe3ZhciBmb3JtYXRTZXQ9ISFmb3JtYXQ7Zm9ybWF0PWZvcm1hdHx8dGhpcy5fZm9ybWF0O3ZhciBmb3JtYXR0ZWRTdHJpbmc9ITEsaGFzQWxwaGE9dGhpcy5fYTwxJiZ0aGlzLl9hPj0wLG5lZWRzQWxwaGFGb3JtYXQ9IWZvcm1hdFNldCYmaGFzQWxwaGEmJihcImhleFwiPT09Zm9ybWF0fHxcImhleDZcIj09PWZvcm1hdHx8XCJoZXgzXCI9PT1mb3JtYXR8fFwibmFtZVwiPT09Zm9ybWF0KTtyZXR1cm4gbmVlZHNBbHBoYUZvcm1hdD9cIm5hbWVcIj09PWZvcm1hdCYmMD09PXRoaXMuX2E/dGhpcy50b05hbWUoKTp0aGlzLnRvUmdiU3RyaW5nKCk6KFwicmdiXCI9PT1mb3JtYXQmJihmb3JtYXR0ZWRTdHJpbmc9dGhpcy50b1JnYlN0cmluZygpKSxcInByZ2JcIj09PWZvcm1hdCYmKGZvcm1hdHRlZFN0cmluZz10aGlzLnRvUGVyY2VudGFnZVJnYlN0cmluZygpKSwoXCJoZXhcIj09PWZvcm1hdHx8XCJoZXg2XCI9PT1mb3JtYXQpJiYoZm9ybWF0dGVkU3RyaW5nPXRoaXMudG9IZXhTdHJpbmcoKSksXCJoZXgzXCI9PT1mb3JtYXQmJihmb3JtYXR0ZWRTdHJpbmc9dGhpcy50b0hleFN0cmluZyghMCkpLFwiaGV4OFwiPT09Zm9ybWF0JiYoZm9ybWF0dGVkU3RyaW5nPXRoaXMudG9IZXg4U3RyaW5nKCkpLFwibmFtZVwiPT09Zm9ybWF0JiYoZm9ybWF0dGVkU3RyaW5nPXRoaXMudG9OYW1lKCkpLFwiaHNsXCI9PT1mb3JtYXQmJihmb3JtYXR0ZWRTdHJpbmc9dGhpcy50b0hzbFN0cmluZygpKSxcImhzdlwiPT09Zm9ybWF0JiYoZm9ybWF0dGVkU3RyaW5nPXRoaXMudG9Ic3ZTdHJpbmcoKSksZm9ybWF0dGVkU3RyaW5nfHx0aGlzLnRvSGV4U3RyaW5nKCkpfSxfYXBwbHlNb2RpZmljYXRpb246ZnVuY3Rpb24oZm4sYXJncyl7dmFyIGNvbG9yPWZuLmFwcGx5KG51bGwsW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3MpKSk7cmV0dXJuIHRoaXMuX3I9Y29sb3IuX3IsdGhpcy5fZz1jb2xvci5fZyx0aGlzLl9iPWNvbG9yLl9iLHRoaXMuc2V0QWxwaGEoY29sb3IuX2EpLHRoaXN9LGxpZ2h0ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24obGlnaHRlbixhcmd1bWVudHMpfSxicmlnaHRlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihicmlnaHRlbixhcmd1bWVudHMpfSxkYXJrZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZGFya2VuLGFyZ3VtZW50cyl9LGRlc2F0dXJhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZGVzYXR1cmF0ZSxhcmd1bWVudHMpfSxzYXR1cmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihzYXR1cmF0ZSxhcmd1bWVudHMpfSxncmV5c2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZ3JleXNjYWxlLGFyZ3VtZW50cyl9LHNwaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oc3Bpbixhcmd1bWVudHMpfSxfYXBwbHlDb21iaW5hdGlvbjpmdW5jdGlvbihmbixhcmdzKXtyZXR1cm4gZm4uYXBwbHkobnVsbCxbdGhpc10uY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJncykpKX0sYW5hbG9nb3VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oYW5hbG9nb3VzLGFyZ3VtZW50cyl9LGNvbXBsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihjb21wbGVtZW50LGFyZ3VtZW50cyl9LG1vbm9jaHJvbWF0aWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihtb25vY2hyb21hdGljLGFyZ3VtZW50cyl9LHNwbGl0Y29tcGxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKHNwbGl0Y29tcGxlbWVudCxhcmd1bWVudHMpfSx0cmlhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKHRyaWFkLGFyZ3VtZW50cyl9LHRldHJhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKHRldHJhZCxhcmd1bWVudHMpfX0sdGlueWNvbG9yLmZyb21SYXRpbz1mdW5jdGlvbihjb2xvcixvcHRzKXtpZihcIm9iamVjdFwiPT10eXBlb2YgY29sb3Ipe3ZhciBuZXdDb2xvcj17fTtmb3IodmFyIGkgaW4gY29sb3IpY29sb3IuaGFzT3duUHJvcGVydHkoaSkmJihuZXdDb2xvcltpXT1cImFcIj09PWk/Y29sb3JbaV06Y29udmVydFRvUGVyY2VudGFnZShjb2xvcltpXSkpO2NvbG9yPW5ld0NvbG9yfXJldHVybiB0aW55Y29sb3IoY29sb3Isb3B0cyl9LHRpbnljb2xvci5lcXVhbHM9ZnVuY3Rpb24oY29sb3IxLGNvbG9yMil7cmV0dXJuIGNvbG9yMSYmY29sb3IyP3Rpbnljb2xvcihjb2xvcjEpLnRvUmdiU3RyaW5nKCk9PXRpbnljb2xvcihjb2xvcjIpLnRvUmdiU3RyaW5nKCk6ITF9LHRpbnljb2xvci5yYW5kb209ZnVuY3Rpb24oKXtyZXR1cm4gdGlueWNvbG9yLmZyb21SYXRpbyh7cjptYXRoUmFuZG9tKCksZzptYXRoUmFuZG9tKCksYjptYXRoUmFuZG9tKCl9KX0sdGlueWNvbG9yLm1peD1mdW5jdGlvbihjb2xvcjEsY29sb3IyLGFtb3VudCl7YW1vdW50PTA9PT1hbW91bnQ/MDphbW91bnR8fDUwO3ZhciB3MSxyZ2IxPXRpbnljb2xvcihjb2xvcjEpLnRvUmdiKCkscmdiMj10aW55Y29sb3IoY29sb3IyKS50b1JnYigpLHA9YW1vdW50LzEwMCx3PTIqcC0xLGE9cmdiMi5hLXJnYjEuYTt3MT0tMT09dyphP3c6KHcrYSkvKDErdyphKSx3MT0odzErMSkvMjt2YXIgdzI9MS13MSxyZ2JhPXtyOnJnYjIucip3MStyZ2IxLnIqdzIsZzpyZ2IyLmcqdzErcmdiMS5nKncyLGI6cmdiMi5iKncxK3JnYjEuYip3MixhOnJnYjIuYSpwK3JnYjEuYSooMS1wKX07cmV0dXJuIHRpbnljb2xvcihyZ2JhKX0sdGlueWNvbG9yLnJlYWRhYmlsaXR5PWZ1bmN0aW9uKGNvbG9yMSxjb2xvcjIpe3ZhciBjMT10aW55Y29sb3IoY29sb3IxKSxjMj10aW55Y29sb3IoY29sb3IyKTtyZXR1cm4oTWF0aC5tYXgoYzEuZ2V0THVtaW5hbmNlKCksYzIuZ2V0THVtaW5hbmNlKCkpKy4wNSkvKE1hdGgubWluKGMxLmdldEx1bWluYW5jZSgpLGMyLmdldEx1bWluYW5jZSgpKSsuMDUpfSx0aW55Y29sb3IuaXNSZWFkYWJsZT1mdW5jdGlvbihjb2xvcjEsY29sb3IyLHdjYWcyKXt2YXIgd2NhZzJQYXJtcyxvdXQscmVhZGFiaWxpdHk9dGlueWNvbG9yLnJlYWRhYmlsaXR5KGNvbG9yMSxjb2xvcjIpO3N3aXRjaChvdXQ9ITEsd2NhZzJQYXJtcz12YWxpZGF0ZVdDQUcyUGFybXMod2NhZzIpLHdjYWcyUGFybXMubGV2ZWwrd2NhZzJQYXJtcy5zaXplKXtjYXNlXCJBQXNtYWxsXCI6Y2FzZVwiQUFBbGFyZ2VcIjpvdXQ9cmVhZGFiaWxpdHk+PTQuNTticmVhaztjYXNlXCJBQWxhcmdlXCI6b3V0PXJlYWRhYmlsaXR5Pj0zO2JyZWFrO2Nhc2VcIkFBQXNtYWxsXCI6b3V0PXJlYWRhYmlsaXR5Pj03fXJldHVybiBvdXR9LHRpbnljb2xvci5tb3N0UmVhZGFibGU9ZnVuY3Rpb24oYmFzZUNvbG9yLGNvbG9yTGlzdCxhcmdzKXt2YXIgcmVhZGFiaWxpdHksaW5jbHVkZUZhbGxiYWNrQ29sb3JzLGxldmVsLHNpemUsYmVzdENvbG9yPW51bGwsYmVzdFNjb3JlPTA7YXJncz1hcmdzfHx7fSxpbmNsdWRlRmFsbGJhY2tDb2xvcnM9YXJncy5pbmNsdWRlRmFsbGJhY2tDb2xvcnMsbGV2ZWw9YXJncy5sZXZlbCxzaXplPWFyZ3Muc2l6ZTtmb3IodmFyIGk9MDtpPGNvbG9yTGlzdC5sZW5ndGg7aSsrKXJlYWRhYmlsaXR5PXRpbnljb2xvci5yZWFkYWJpbGl0eShiYXNlQ29sb3IsY29sb3JMaXN0W2ldKSxyZWFkYWJpbGl0eT5iZXN0U2NvcmUmJihiZXN0U2NvcmU9cmVhZGFiaWxpdHksYmVzdENvbG9yPXRpbnljb2xvcihjb2xvckxpc3RbaV0pKTtyZXR1cm4gdGlueWNvbG9yLmlzUmVhZGFibGUoYmFzZUNvbG9yLGJlc3RDb2xvcix7bGV2ZWw6bGV2ZWwsc2l6ZTpzaXplfSl8fCFpbmNsdWRlRmFsbGJhY2tDb2xvcnM/YmVzdENvbG9yOihhcmdzLmluY2x1ZGVGYWxsYmFja0NvbG9ycz0hMSx0aW55Y29sb3IubW9zdFJlYWRhYmxlKGJhc2VDb2xvcixbXCIjZmZmXCIsXCIjMDAwXCJdLGFyZ3MpKX07dmFyIG5hbWVzPXRpbnljb2xvci5uYW1lcz17YWxpY2VibHVlOlwiZjBmOGZmXCIsYW50aXF1ZXdoaXRlOlwiZmFlYmQ3XCIsYXF1YTpcIjBmZlwiLGFxdWFtYXJpbmU6XCI3ZmZmZDRcIixhenVyZTpcImYwZmZmZlwiLGJlaWdlOlwiZjVmNWRjXCIsYmlzcXVlOlwiZmZlNGM0XCIsYmxhY2s6XCIwMDBcIixibGFuY2hlZGFsbW9uZDpcImZmZWJjZFwiLGJsdWU6XCIwMGZcIixibHVldmlvbGV0OlwiOGEyYmUyXCIsYnJvd246XCJhNTJhMmFcIixidXJseXdvb2Q6XCJkZWI4ODdcIixidXJudHNpZW5uYTpcImVhN2U1ZFwiLGNhZGV0Ymx1ZTpcIjVmOWVhMFwiLGNoYXJ0cmV1c2U6XCI3ZmZmMDBcIixjaG9jb2xhdGU6XCJkMjY5MWVcIixjb3JhbDpcImZmN2Y1MFwiLGNvcm5mbG93ZXJibHVlOlwiNjQ5NWVkXCIsY29ybnNpbGs6XCJmZmY4ZGNcIixjcmltc29uOlwiZGMxNDNjXCIsY3lhbjpcIjBmZlwiLGRhcmtibHVlOlwiMDAwMDhiXCIsZGFya2N5YW46XCIwMDhiOGJcIixkYXJrZ29sZGVucm9kOlwiYjg4NjBiXCIsZGFya2dyYXk6XCJhOWE5YTlcIixkYXJrZ3JlZW46XCIwMDY0MDBcIixkYXJrZ3JleTpcImE5YTlhOVwiLGRhcmtraGFraTpcImJkYjc2YlwiLGRhcmttYWdlbnRhOlwiOGIwMDhiXCIsZGFya29saXZlZ3JlZW46XCI1NTZiMmZcIixkYXJrb3JhbmdlOlwiZmY4YzAwXCIsZGFya29yY2hpZDpcIjk5MzJjY1wiLGRhcmtyZWQ6XCI4YjAwMDBcIixkYXJrc2FsbW9uOlwiZTk5NjdhXCIsZGFya3NlYWdyZWVuOlwiOGZiYzhmXCIsZGFya3NsYXRlYmx1ZTpcIjQ4M2Q4YlwiLGRhcmtzbGF0ZWdyYXk6XCIyZjRmNGZcIixkYXJrc2xhdGVncmV5OlwiMmY0ZjRmXCIsZGFya3R1cnF1b2lzZTpcIjAwY2VkMVwiLGRhcmt2aW9sZXQ6XCI5NDAwZDNcIixkZWVwcGluazpcImZmMTQ5M1wiLGRlZXBza3libHVlOlwiMDBiZmZmXCIsZGltZ3JheTpcIjY5Njk2OVwiLGRpbWdyZXk6XCI2OTY5NjlcIixkb2RnZXJibHVlOlwiMWU5MGZmXCIsZmlyZWJyaWNrOlwiYjIyMjIyXCIsZmxvcmFsd2hpdGU6XCJmZmZhZjBcIixmb3Jlc3RncmVlbjpcIjIyOGIyMlwiLGZ1Y2hzaWE6XCJmMGZcIixnYWluc2Jvcm86XCJkY2RjZGNcIixnaG9zdHdoaXRlOlwiZjhmOGZmXCIsZ29sZDpcImZmZDcwMFwiLGdvbGRlbnJvZDpcImRhYTUyMFwiLGdyYXk6XCI4MDgwODBcIixncmVlbjpcIjAwODAwMFwiLGdyZWVueWVsbG93OlwiYWRmZjJmXCIsZ3JleTpcIjgwODA4MFwiLGhvbmV5ZGV3OlwiZjBmZmYwXCIsaG90cGluazpcImZmNjliNFwiLGluZGlhbnJlZDpcImNkNWM1Y1wiLGluZGlnbzpcIjRiMDA4MlwiLGl2b3J5OlwiZmZmZmYwXCIsa2hha2k6XCJmMGU2OGNcIixsYXZlbmRlcjpcImU2ZTZmYVwiLGxhdmVuZGVyYmx1c2g6XCJmZmYwZjVcIixsYXduZ3JlZW46XCI3Y2ZjMDBcIixsZW1vbmNoaWZmb246XCJmZmZhY2RcIixsaWdodGJsdWU6XCJhZGQ4ZTZcIixsaWdodGNvcmFsOlwiZjA4MDgwXCIsbGlnaHRjeWFuOlwiZTBmZmZmXCIsbGlnaHRnb2xkZW5yb2R5ZWxsb3c6XCJmYWZhZDJcIixsaWdodGdyYXk6XCJkM2QzZDNcIixsaWdodGdyZWVuOlwiOTBlZTkwXCIsbGlnaHRncmV5OlwiZDNkM2QzXCIsbGlnaHRwaW5rOlwiZmZiNmMxXCIsbGlnaHRzYWxtb246XCJmZmEwN2FcIixsaWdodHNlYWdyZWVuOlwiMjBiMmFhXCIsbGlnaHRza3libHVlOlwiODdjZWZhXCIsbGlnaHRzbGF0ZWdyYXk6XCI3ODlcIixsaWdodHNsYXRlZ3JleTpcIjc4OVwiLGxpZ2h0c3RlZWxibHVlOlwiYjBjNGRlXCIsbGlnaHR5ZWxsb3c6XCJmZmZmZTBcIixsaW1lOlwiMGYwXCIsbGltZWdyZWVuOlwiMzJjZDMyXCIsbGluZW46XCJmYWYwZTZcIixtYWdlbnRhOlwiZjBmXCIsbWFyb29uOlwiODAwMDAwXCIsbWVkaXVtYXF1YW1hcmluZTpcIjY2Y2RhYVwiLG1lZGl1bWJsdWU6XCIwMDAwY2RcIixtZWRpdW1vcmNoaWQ6XCJiYTU1ZDNcIixtZWRpdW1wdXJwbGU6XCI5MzcwZGJcIixtZWRpdW1zZWFncmVlbjpcIjNjYjM3MVwiLG1lZGl1bXNsYXRlYmx1ZTpcIjdiNjhlZVwiLG1lZGl1bXNwcmluZ2dyZWVuOlwiMDBmYTlhXCIsbWVkaXVtdHVycXVvaXNlOlwiNDhkMWNjXCIsbWVkaXVtdmlvbGV0cmVkOlwiYzcxNTg1XCIsbWlkbmlnaHRibHVlOlwiMTkxOTcwXCIsbWludGNyZWFtOlwiZjVmZmZhXCIsbWlzdHlyb3NlOlwiZmZlNGUxXCIsbW9jY2FzaW46XCJmZmU0YjVcIixuYXZham93aGl0ZTpcImZmZGVhZFwiLG5hdnk6XCIwMDAwODBcIixvbGRsYWNlOlwiZmRmNWU2XCIsb2xpdmU6XCI4MDgwMDBcIixvbGl2ZWRyYWI6XCI2YjhlMjNcIixvcmFuZ2U6XCJmZmE1MDBcIixvcmFuZ2VyZWQ6XCJmZjQ1MDBcIixvcmNoaWQ6XCJkYTcwZDZcIixwYWxlZ29sZGVucm9kOlwiZWVlOGFhXCIscGFsZWdyZWVuOlwiOThmYjk4XCIscGFsZXR1cnF1b2lzZTpcImFmZWVlZVwiLHBhbGV2aW9sZXRyZWQ6XCJkYjcwOTNcIixwYXBheWF3aGlwOlwiZmZlZmQ1XCIscGVhY2hwdWZmOlwiZmZkYWI5XCIscGVydTpcImNkODUzZlwiLHBpbms6XCJmZmMwY2JcIixwbHVtOlwiZGRhMGRkXCIscG93ZGVyYmx1ZTpcImIwZTBlNlwiLHB1cnBsZTpcIjgwMDA4MFwiLHJlYmVjY2FwdXJwbGU6XCI2NjMzOTlcIixyZWQ6XCJmMDBcIixyb3N5YnJvd246XCJiYzhmOGZcIixyb3lhbGJsdWU6XCI0MTY5ZTFcIixzYWRkbGVicm93bjpcIjhiNDUxM1wiLHNhbG1vbjpcImZhODA3MlwiLHNhbmR5YnJvd246XCJmNGE0NjBcIixzZWFncmVlbjpcIjJlOGI1N1wiLHNlYXNoZWxsOlwiZmZmNWVlXCIsc2llbm5hOlwiYTA1MjJkXCIsc2lsdmVyOlwiYzBjMGMwXCIsc2t5Ymx1ZTpcIjg3Y2VlYlwiLHNsYXRlYmx1ZTpcIjZhNWFjZFwiLHNsYXRlZ3JheTpcIjcwODA5MFwiLHNsYXRlZ3JleTpcIjcwODA5MFwiLHNub3c6XCJmZmZhZmFcIixzcHJpbmdncmVlbjpcIjAwZmY3ZlwiLHN0ZWVsYmx1ZTpcIjQ2ODJiNFwiLHRhbjpcImQyYjQ4Y1wiLHRlYWw6XCIwMDgwODBcIix0aGlzdGxlOlwiZDhiZmQ4XCIsdG9tYXRvOlwiZmY2MzQ3XCIsdHVycXVvaXNlOlwiNDBlMGQwXCIsdmlvbGV0OlwiZWU4MmVlXCIsd2hlYXQ6XCJmNWRlYjNcIix3aGl0ZTpcImZmZlwiLHdoaXRlc21va2U6XCJmNWY1ZjVcIix5ZWxsb3c6XCJmZjBcIix5ZWxsb3dncmVlbjpcIjlhY2QzMlwifSxoZXhOYW1lcz10aW55Y29sb3IuaGV4TmFtZXM9ZmxpcChuYW1lcyksbWF0Y2hlcnM9ZnVuY3Rpb24oKXt2YXIgQ1NTX0lOVEVHRVI9XCJbLVxcXFwrXT9cXFxcZCslP1wiLENTU19OVU1CRVI9XCJbLVxcXFwrXT9cXFxcZCpcXFxcLlxcXFxkKyU/XCIsQ1NTX1VOSVQ9XCIoPzpcIitDU1NfTlVNQkVSK1wiKXwoPzpcIitDU1NfSU5URUdFUitcIilcIixQRVJNSVNTSVZFX01BVENIMz1cIltcXFxcc3xcXFxcKF0rKFwiK0NTU19VTklUK1wiKVssfFxcXFxzXSsoXCIrQ1NTX1VOSVQrXCIpWyx8XFxcXHNdKyhcIitDU1NfVU5JVCtcIilcXFxccypcXFxcKT9cIixQRVJNSVNTSVZFX01BVENIND1cIltcXFxcc3xcXFxcKF0rKFwiK0NTU19VTklUK1wiKVssfFxcXFxzXSsoXCIrQ1NTX1VOSVQrXCIpWyx8XFxcXHNdKyhcIitDU1NfVU5JVCtcIilbLHxcXFxcc10rKFwiK0NTU19VTklUK1wiKVxcXFxzKlxcXFwpP1wiO3JldHVybntyZ2I6bmV3IFJlZ0V4cChcInJnYlwiK1BFUk1JU1NJVkVfTUFUQ0gzKSxyZ2JhOm5ldyBSZWdFeHAoXCJyZ2JhXCIrUEVSTUlTU0lWRV9NQVRDSDQpLGhzbDpuZXcgUmVnRXhwKFwiaHNsXCIrUEVSTUlTU0lWRV9NQVRDSDMpLGhzbGE6bmV3IFJlZ0V4cChcImhzbGFcIitQRVJNSVNTSVZFX01BVENINCksaHN2Om5ldyBSZWdFeHAoXCJoc3ZcIitQRVJNSVNTSVZFX01BVENIMyksaHN2YTpuZXcgUmVnRXhwKFwiaHN2YVwiK1BFUk1JU1NJVkVfTUFUQ0g0KSxoZXgzOi9eKFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8saGV4NjovXihbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KSQvLGhleDg6L14oWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC99fSgpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXRpbnljb2xvcjpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIHRpbnljb2xvcn0pOndpbmRvdy50aW55Y29sb3I9dGlueWNvbG9yfSgpO1xyXG4vKiFcclxuICogQGZpbGVPdmVydmlldyBUb3VjaFN3aXBlIC0galF1ZXJ5IFBsdWdpblxyXG4gKiBAdmVyc2lvbiAxLjYuMThcclxuICpcclxuICogQGF1dGhvciBNYXR0IEJyeXNvbiBodHRwOi8vd3d3LmdpdGh1Yi5jb20vbWF0dGJyeXNvblxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXR0YnJ5c29uL1RvdWNoU3dpcGUtSnF1ZXJ5LVBsdWdpblxyXG4gKiBAc2VlIGh0dHA6Ly9sYWJzLnJhbXBpbnRlcmFjdGl2ZS5jby51ay90b3VjaFN3aXBlL1xyXG4gKiBAc2VlIGh0dHA6Ly9wbHVnaW5zLmpxdWVyeS5jb20vcHJvamVjdC90b3VjaFN3aXBlXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMC0yMDE1IE1hdHQgQnJ5c29uXHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLlxyXG4gKlxyXG4gKi9cclxuIWZ1bmN0aW9uKGZhY3Rvcnkpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lLmFtZC5qUXVlcnk/ZGVmaW5lKFtcImpxdWVyeVwiXSxmYWN0b3J5KTpmYWN0b3J5KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP3JlcXVpcmUoXCJqcXVlcnlcIik6alF1ZXJ5KX0oZnVuY3Rpb24oJCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaW5pdChvcHRpb25zKXtyZXR1cm4hb3B0aW9uc3x8dm9pZCAwIT09b3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGx8fHZvaWQgMD09PW9wdGlvbnMuc3dpcGUmJnZvaWQgMD09PW9wdGlvbnMuc3dpcGVTdGF0dXN8fChvcHRpb25zLmFsbG93UGFnZVNjcm9sbD1OT05FKSx2b2lkIDAhPT1vcHRpb25zLmNsaWNrJiZ2b2lkIDA9PT1vcHRpb25zLnRhcCYmKG9wdGlvbnMudGFwPW9wdGlvbnMuY2xpY2spLG9wdGlvbnN8fChvcHRpb25zPXt9KSxvcHRpb25zPSQuZXh0ZW5kKHt9LCQuZm4uc3dpcGUuZGVmYXVsdHMsb3B0aW9ucyksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyICR0aGlzPSQodGhpcykscGx1Z2luPSR0aGlzLmRhdGEoUExVR0lOX05TKTtwbHVnaW58fChwbHVnaW49bmV3IFRvdWNoU3dpcGUodGhpcyxvcHRpb25zKSwkdGhpcy5kYXRhKFBMVUdJTl9OUyxwbHVnaW4pKX0pfWZ1bmN0aW9uIFRvdWNoU3dpcGUoZWxlbWVudCxvcHRpb25zKXtmdW5jdGlvbiB0b3VjaFN0YXJ0KGpxRXZlbnQpe2lmKCEoZ2V0VG91Y2hJblByb2dyZXNzKCl8fCQoanFFdmVudC50YXJnZXQpLmNsb3Nlc3Qob3B0aW9ucy5leGNsdWRlZEVsZW1lbnRzLCRlbGVtZW50KS5sZW5ndGg+MCkpe3ZhciBldmVudD1qcUV2ZW50Lm9yaWdpbmFsRXZlbnQ/anFFdmVudC5vcmlnaW5hbEV2ZW50OmpxRXZlbnQ7aWYoIWV2ZW50LnBvaW50ZXJUeXBlfHxcIm1vdXNlXCIhPWV2ZW50LnBvaW50ZXJUeXBlfHwwIT1vcHRpb25zLmZhbGxiYWNrVG9Nb3VzZUV2ZW50cyl7dmFyIHJldCx0b3VjaGVzPWV2ZW50LnRvdWNoZXMsZXZ0PXRvdWNoZXM/dG91Y2hlc1swXTpldmVudDtyZXR1cm4gcGhhc2U9UEhBU0VfU1RBUlQsdG91Y2hlcz9maW5nZXJDb3VudD10b3VjaGVzLmxlbmd0aDpvcHRpb25zLnByZXZlbnREZWZhdWx0RXZlbnRzIT09ITEmJmpxRXZlbnQucHJldmVudERlZmF1bHQoKSxkaXN0YW5jZT0wLGRpcmVjdGlvbj1udWxsLGN1cnJlbnREaXJlY3Rpb249bnVsbCxwaW5jaERpcmVjdGlvbj1udWxsLGR1cmF0aW9uPTAsc3RhcnRUb3VjaGVzRGlzdGFuY2U9MCxlbmRUb3VjaGVzRGlzdGFuY2U9MCxwaW5jaFpvb209MSxwaW5jaERpc3RhbmNlPTAsbWF4aW11bXNNYXA9Y3JlYXRlTWF4aW11bXNEYXRhKCksY2FuY2VsTXVsdGlGaW5nZXJSZWxlYXNlKCksY3JlYXRlRmluZ2VyRGF0YSgwLGV2dCksIXRvdWNoZXN8fGZpbmdlckNvdW50PT09b3B0aW9ucy5maW5nZXJzfHxvcHRpb25zLmZpbmdlcnM9PT1BTExfRklOR0VSU3x8aGFzUGluY2hlcygpPyhzdGFydFRpbWU9Z2V0VGltZVN0YW1wKCksMj09ZmluZ2VyQ291bnQmJihjcmVhdGVGaW5nZXJEYXRhKDEsdG91Y2hlc1sxXSksc3RhcnRUb3VjaGVzRGlzdGFuY2U9ZW5kVG91Y2hlc0Rpc3RhbmNlPWNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShmaW5nZXJEYXRhWzBdLnN0YXJ0LGZpbmdlckRhdGFbMV0uc3RhcnQpKSwob3B0aW9ucy5zd2lwZVN0YXR1c3x8b3B0aW9ucy5waW5jaFN0YXR1cykmJihyZXQ9dHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpKSk6cmV0PSExLHJldD09PSExPyhwaGFzZT1QSEFTRV9DQU5DRUwsdHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpLHJldCk6KG9wdGlvbnMuaG9sZCYmKGhvbGRUaW1lb3V0PXNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpeyRlbGVtZW50LnRyaWdnZXIoXCJob2xkXCIsW2V2ZW50LnRhcmdldF0pLG9wdGlvbnMuaG9sZCYmKHJldD1vcHRpb25zLmhvbGQuY2FsbCgkZWxlbWVudCxldmVudCxldmVudC50YXJnZXQpKX0sdGhpcyksb3B0aW9ucy5sb25nVGFwVGhyZXNob2xkKSksc2V0VG91Y2hJblByb2dyZXNzKCEwKSxudWxsKX19fWZ1bmN0aW9uIHRvdWNoTW92ZShqcUV2ZW50KXt2YXIgZXZlbnQ9anFFdmVudC5vcmlnaW5hbEV2ZW50P2pxRXZlbnQub3JpZ2luYWxFdmVudDpqcUV2ZW50O2lmKHBoYXNlIT09UEhBU0VfRU5EJiZwaGFzZSE9PVBIQVNFX0NBTkNFTCYmIWluTXVsdGlGaW5nZXJSZWxlYXNlKCkpe3ZhciByZXQsdG91Y2hlcz1ldmVudC50b3VjaGVzLGV2dD10b3VjaGVzP3RvdWNoZXNbMF06ZXZlbnQsY3VycmVudEZpbmdlcj11cGRhdGVGaW5nZXJEYXRhKGV2dCk7aWYoZW5kVGltZT1nZXRUaW1lU3RhbXAoKSx0b3VjaGVzJiYoZmluZ2VyQ291bnQ9dG91Y2hlcy5sZW5ndGgpLG9wdGlvbnMuaG9sZCYmY2xlYXJUaW1lb3V0KGhvbGRUaW1lb3V0KSxwaGFzZT1QSEFTRV9NT1ZFLDI9PWZpbmdlckNvdW50JiYoMD09c3RhcnRUb3VjaGVzRGlzdGFuY2U/KGNyZWF0ZUZpbmdlckRhdGEoMSx0b3VjaGVzWzFdKSxzdGFydFRvdWNoZXNEaXN0YW5jZT1lbmRUb3VjaGVzRGlzdGFuY2U9Y2FsY3VsYXRlVG91Y2hlc0Rpc3RhbmNlKGZpbmdlckRhdGFbMF0uc3RhcnQsZmluZ2VyRGF0YVsxXS5zdGFydCkpOih1cGRhdGVGaW5nZXJEYXRhKHRvdWNoZXNbMV0pLGVuZFRvdWNoZXNEaXN0YW5jZT1jYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2UoZmluZ2VyRGF0YVswXS5lbmQsZmluZ2VyRGF0YVsxXS5lbmQpLHBpbmNoRGlyZWN0aW9uPWNhbGN1bGF0ZVBpbmNoRGlyZWN0aW9uKGZpbmdlckRhdGFbMF0uZW5kLGZpbmdlckRhdGFbMV0uZW5kKSkscGluY2hab29tPWNhbGN1bGF0ZVBpbmNoWm9vbShzdGFydFRvdWNoZXNEaXN0YW5jZSxlbmRUb3VjaGVzRGlzdGFuY2UpLHBpbmNoRGlzdGFuY2U9TWF0aC5hYnMoc3RhcnRUb3VjaGVzRGlzdGFuY2UtZW5kVG91Y2hlc0Rpc3RhbmNlKSksZmluZ2VyQ291bnQ9PT1vcHRpb25zLmZpbmdlcnN8fG9wdGlvbnMuZmluZ2Vycz09PUFMTF9GSU5HRVJTfHwhdG91Y2hlc3x8aGFzUGluY2hlcygpKXtpZihkaXJlY3Rpb249Y2FsY3VsYXRlRGlyZWN0aW9uKGN1cnJlbnRGaW5nZXIuc3RhcnQsY3VycmVudEZpbmdlci5lbmQpLGN1cnJlbnREaXJlY3Rpb249Y2FsY3VsYXRlRGlyZWN0aW9uKGN1cnJlbnRGaW5nZXIubGFzdCxjdXJyZW50RmluZ2VyLmVuZCksdmFsaWRhdGVEZWZhdWx0RXZlbnQoanFFdmVudCxjdXJyZW50RGlyZWN0aW9uKSxkaXN0YW5jZT1jYWxjdWxhdGVEaXN0YW5jZShjdXJyZW50RmluZ2VyLnN0YXJ0LGN1cnJlbnRGaW5nZXIuZW5kKSxkdXJhdGlvbj1jYWxjdWxhdGVEdXJhdGlvbigpLHNldE1heERpc3RhbmNlKGRpcmVjdGlvbixkaXN0YW5jZSkscmV0PXRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKSwhb3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZHx8b3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKXt2YXIgaW5Cb3VuZHM9ITA7aWYob3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKXt2YXIgYm91bmRzPWdldGJvdW5kcyh0aGlzKTtpbkJvdW5kcz1pc0luQm91bmRzKGN1cnJlbnRGaW5nZXIuZW5kLGJvdW5kcyl9IW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQmJmluQm91bmRzP3BoYXNlPWdldE5leHRQaGFzZShQSEFTRV9NT1ZFKTpvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUmJiFpbkJvdW5kcyYmKHBoYXNlPWdldE5leHRQaGFzZShQSEFTRV9FTkQpKSxwaGFzZSE9UEhBU0VfQ0FOQ0VMJiZwaGFzZSE9UEhBU0VfRU5EfHx0cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSl9fWVsc2UgcGhhc2U9UEhBU0VfQ0FOQ0VMLHRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKTtyZXQ9PT0hMSYmKHBoYXNlPVBIQVNFX0NBTkNFTCx0cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSkpfX1mdW5jdGlvbiB0b3VjaEVuZChqcUV2ZW50KXt2YXIgZXZlbnQ9anFFdmVudC5vcmlnaW5hbEV2ZW50P2pxRXZlbnQub3JpZ2luYWxFdmVudDpqcUV2ZW50LHRvdWNoZXM9ZXZlbnQudG91Y2hlcztpZih0b3VjaGVzKXtpZih0b3VjaGVzLmxlbmd0aCYmIWluTXVsdGlGaW5nZXJSZWxlYXNlKCkpcmV0dXJuIHN0YXJ0TXVsdGlGaW5nZXJSZWxlYXNlKGV2ZW50KSwhMDtpZih0b3VjaGVzLmxlbmd0aCYmaW5NdWx0aUZpbmdlclJlbGVhc2UoKSlyZXR1cm4hMH1yZXR1cm4gaW5NdWx0aUZpbmdlclJlbGVhc2UoKSYmKGZpbmdlckNvdW50PWZpbmdlckNvdW50QXRSZWxlYXNlKSxlbmRUaW1lPWdldFRpbWVTdGFtcCgpLGR1cmF0aW9uPWNhbGN1bGF0ZUR1cmF0aW9uKCksZGlkU3dpcGVCYWNrVG9DYW5jZWwoKXx8IXZhbGlkYXRlU3dpcGVEaXN0YW5jZSgpPyhwaGFzZT1QSEFTRV9DQU5DRUwsdHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpKTpvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kfHxvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kPT09ITEmJnBoYXNlPT09UEhBU0VfTU9WRT8ob3B0aW9ucy5wcmV2ZW50RGVmYXVsdEV2ZW50cyE9PSExJiZqcUV2ZW50LnByZXZlbnREZWZhdWx0KCkscGhhc2U9UEhBU0VfRU5ELHRyaWdnZXJIYW5kbGVyKGV2ZW50LHBoYXNlKSk6IW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQmJmhhc1RhcCgpPyhwaGFzZT1QSEFTRV9FTkQsdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLFRBUCkpOnBoYXNlPT09UEhBU0VfTU9WRSYmKHBoYXNlPVBIQVNFX0NBTkNFTCx0cmlnZ2VySGFuZGxlcihldmVudCxwaGFzZSkpLHNldFRvdWNoSW5Qcm9ncmVzcyghMSksbnVsbH1mdW5jdGlvbiB0b3VjaENhbmNlbCgpe2ZpbmdlckNvdW50PTAsZW5kVGltZT0wLHN0YXJ0VGltZT0wLHN0YXJ0VG91Y2hlc0Rpc3RhbmNlPTAsZW5kVG91Y2hlc0Rpc3RhbmNlPTAscGluY2hab29tPTEsY2FuY2VsTXVsdGlGaW5nZXJSZWxlYXNlKCksc2V0VG91Y2hJblByb2dyZXNzKCExKX1mdW5jdGlvbiB0b3VjaExlYXZlKGpxRXZlbnQpe3ZhciBldmVudD1qcUV2ZW50Lm9yaWdpbmFsRXZlbnQ/anFFdmVudC5vcmlnaW5hbEV2ZW50OmpxRXZlbnQ7b3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlJiYocGhhc2U9Z2V0TmV4dFBoYXNlKFBIQVNFX0VORCksdHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2UpKX1mdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoKXskZWxlbWVudC51bmJpbmQoU1RBUlRfRVYsdG91Y2hTdGFydCksJGVsZW1lbnQudW5iaW5kKENBTkNFTF9FVix0b3VjaENhbmNlbCksJGVsZW1lbnQudW5iaW5kKE1PVkVfRVYsdG91Y2hNb3ZlKSwkZWxlbWVudC51bmJpbmQoRU5EX0VWLHRvdWNoRW5kKSxMRUFWRV9FViYmJGVsZW1lbnQudW5iaW5kKExFQVZFX0VWLHRvdWNoTGVhdmUpLHNldFRvdWNoSW5Qcm9ncmVzcyghMSl9ZnVuY3Rpb24gZ2V0TmV4dFBoYXNlKGN1cnJlbnRQaGFzZSl7dmFyIG5leHRQaGFzZT1jdXJyZW50UGhhc2UsdmFsaWRUaW1lPXZhbGlkYXRlU3dpcGVUaW1lKCksdmFsaWREaXN0YW5jZT12YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKSxkaWRDYW5jZWw9ZGlkU3dpcGVCYWNrVG9DYW5jZWwoKTtyZXR1cm4hdmFsaWRUaW1lfHxkaWRDYW5jZWw/bmV4dFBoYXNlPVBIQVNFX0NBTkNFTDohdmFsaWREaXN0YW5jZXx8Y3VycmVudFBoYXNlIT1QSEFTRV9NT1ZFfHxvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kJiYhb3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlPyF2YWxpZERpc3RhbmNlJiZjdXJyZW50UGhhc2U9PVBIQVNFX0VORCYmb3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlJiYobmV4dFBoYXNlPVBIQVNFX0NBTkNFTCk6bmV4dFBoYXNlPVBIQVNFX0VORCxuZXh0UGhhc2V9ZnVuY3Rpb24gdHJpZ2dlckhhbmRsZXIoZXZlbnQscGhhc2Upe3ZhciByZXQsdG91Y2hlcz1ldmVudC50b3VjaGVzO3JldHVybihkaWRTd2lwZSgpfHxoYXNTd2lwZXMoKSkmJihyZXQ9dHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLFNXSVBFKSksKGRpZFBpbmNoKCl8fGhhc1BpbmNoZXMoKSkmJnJldCE9PSExJiYocmV0PXRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCxwaGFzZSxQSU5DSCkpLGRpZERvdWJsZVRhcCgpJiZyZXQhPT0hMT9yZXQ9dHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LHBoYXNlLERPVUJMRV9UQVApOmRpZExvbmdUYXAoKSYmcmV0IT09ITE/cmV0PXRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCxwaGFzZSxMT05HX1RBUCk6ZGlkVGFwKCkmJnJldCE9PSExJiYocmV0PXRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCxwaGFzZSxUQVApKSxwaGFzZT09PVBIQVNFX0NBTkNFTCYmdG91Y2hDYW5jZWwoZXZlbnQpLHBoYXNlPT09UEhBU0VfRU5EJiYodG91Y2hlcz90b3VjaGVzLmxlbmd0aHx8dG91Y2hDYW5jZWwoZXZlbnQpOnRvdWNoQ2FuY2VsKGV2ZW50KSkscmV0fWZ1bmN0aW9uIHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCxwaGFzZSxnZXN0dXJlKXt2YXIgcmV0O2lmKGdlc3R1cmU9PVNXSVBFKXtpZigkZWxlbWVudC50cmlnZ2VyKFwic3dpcGVTdGF0dXNcIixbcGhhc2UsZGlyZWN0aW9ufHxudWxsLGRpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbl0pLG9wdGlvbnMuc3dpcGVTdGF0dXMmJihyZXQ9b3B0aW9ucy5zd2lwZVN0YXR1cy5jYWxsKCRlbGVtZW50LGV2ZW50LHBoYXNlLGRpcmVjdGlvbnx8bnVsbCxkaXN0YW5jZXx8MCxkdXJhdGlvbnx8MCxmaW5nZXJDb3VudCxmaW5nZXJEYXRhLGN1cnJlbnREaXJlY3Rpb24pLHJldD09PSExKSlyZXR1cm4hMTtpZihwaGFzZT09UEhBU0VfRU5EJiZ2YWxpZGF0ZVN3aXBlKCkpe2lmKGNsZWFyVGltZW91dChzaW5nbGVUYXBUaW1lb3V0KSxjbGVhclRpbWVvdXQoaG9sZFRpbWVvdXQpLCRlbGVtZW50LnRyaWdnZXIoXCJzd2lwZVwiLFtkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uXSksb3B0aW9ucy5zd2lwZSYmKHJldD1vcHRpb25zLnN3aXBlLmNhbGwoJGVsZW1lbnQsZXZlbnQsZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbikscmV0PT09ITEpKXJldHVybiExO3N3aXRjaChkaXJlY3Rpb24pe2Nhc2UgTEVGVDokZWxlbWVudC50cmlnZ2VyKFwic3dpcGVMZWZ0XCIsW2RpcmVjdGlvbixkaXN0YW5jZSxkdXJhdGlvbixmaW5nZXJDb3VudCxmaW5nZXJEYXRhLGN1cnJlbnREaXJlY3Rpb25dKSxvcHRpb25zLnN3aXBlTGVmdCYmKHJldD1vcHRpb25zLnN3aXBlTGVmdC5jYWxsKCRlbGVtZW50LGV2ZW50LGRpcmVjdGlvbixkaXN0YW5jZSxkdXJhdGlvbixmaW5nZXJDb3VudCxmaW5nZXJEYXRhLGN1cnJlbnREaXJlY3Rpb24pKTticmVhaztjYXNlIFJJR0hUOiRlbGVtZW50LnRyaWdnZXIoXCJzd2lwZVJpZ2h0XCIsW2RpcmVjdGlvbixkaXN0YW5jZSxkdXJhdGlvbixmaW5nZXJDb3VudCxmaW5nZXJEYXRhLGN1cnJlbnREaXJlY3Rpb25dKSxvcHRpb25zLnN3aXBlUmlnaHQmJihyZXQ9b3B0aW9ucy5zd2lwZVJpZ2h0LmNhbGwoJGVsZW1lbnQsZXZlbnQsZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbikpO2JyZWFrO2Nhc2UgVVA6JGVsZW1lbnQudHJpZ2dlcihcInN3aXBlVXBcIixbZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbl0pLG9wdGlvbnMuc3dpcGVVcCYmKHJldD1vcHRpb25zLnN3aXBlVXAuY2FsbCgkZWxlbWVudCxldmVudCxkaXJlY3Rpb24sZGlzdGFuY2UsZHVyYXRpb24sZmluZ2VyQ291bnQsZmluZ2VyRGF0YSxjdXJyZW50RGlyZWN0aW9uKSk7YnJlYWs7Y2FzZSBET1dOOiRlbGVtZW50LnRyaWdnZXIoXCJzd2lwZURvd25cIixbZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbl0pLG9wdGlvbnMuc3dpcGVEb3duJiYocmV0PW9wdGlvbnMuc3dpcGVEb3duLmNhbGwoJGVsZW1lbnQsZXZlbnQsZGlyZWN0aW9uLGRpc3RhbmNlLGR1cmF0aW9uLGZpbmdlckNvdW50LGZpbmdlckRhdGEsY3VycmVudERpcmVjdGlvbikpfX19aWYoZ2VzdHVyZT09UElOQ0gpe2lmKCRlbGVtZW50LnRyaWdnZXIoXCJwaW5jaFN0YXR1c1wiLFtwaGFzZSxwaW5jaERpcmVjdGlvbnx8bnVsbCxwaW5jaERpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LHBpbmNoWm9vbSxmaW5nZXJEYXRhXSksb3B0aW9ucy5waW5jaFN0YXR1cyYmKHJldD1vcHRpb25zLnBpbmNoU3RhdHVzLmNhbGwoJGVsZW1lbnQsZXZlbnQscGhhc2UscGluY2hEaXJlY3Rpb258fG51bGwscGluY2hEaXN0YW5jZXx8MCxkdXJhdGlvbnx8MCxmaW5nZXJDb3VudCxwaW5jaFpvb20sZmluZ2VyRGF0YSkscmV0PT09ITEpKXJldHVybiExO2lmKHBoYXNlPT1QSEFTRV9FTkQmJnZhbGlkYXRlUGluY2goKSlzd2l0Y2gocGluY2hEaXJlY3Rpb24pe2Nhc2UgSU46JGVsZW1lbnQudHJpZ2dlcihcInBpbmNoSW5cIixbcGluY2hEaXJlY3Rpb258fG51bGwscGluY2hEaXN0YW5jZXx8MCxkdXJhdGlvbnx8MCxmaW5nZXJDb3VudCxwaW5jaFpvb20sZmluZ2VyRGF0YV0pLG9wdGlvbnMucGluY2hJbiYmKHJldD1vcHRpb25zLnBpbmNoSW4uY2FsbCgkZWxlbWVudCxldmVudCxwaW5jaERpcmVjdGlvbnx8bnVsbCxwaW5jaERpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LHBpbmNoWm9vbSxmaW5nZXJEYXRhKSk7YnJlYWs7Y2FzZSBPVVQ6JGVsZW1lbnQudHJpZ2dlcihcInBpbmNoT3V0XCIsW3BpbmNoRGlyZWN0aW9ufHxudWxsLHBpbmNoRGlzdGFuY2V8fDAsZHVyYXRpb258fDAsZmluZ2VyQ291bnQscGluY2hab29tLGZpbmdlckRhdGFdKSxvcHRpb25zLnBpbmNoT3V0JiYocmV0PW9wdGlvbnMucGluY2hPdXQuY2FsbCgkZWxlbWVudCxldmVudCxwaW5jaERpcmVjdGlvbnx8bnVsbCxwaW5jaERpc3RhbmNlfHwwLGR1cmF0aW9ufHwwLGZpbmdlckNvdW50LHBpbmNoWm9vbSxmaW5nZXJEYXRhKSl9fXJldHVybiBnZXN0dXJlPT1UQVA/cGhhc2UhPT1QSEFTRV9DQU5DRUwmJnBoYXNlIT09UEhBU0VfRU5EfHwoY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpLGNsZWFyVGltZW91dChob2xkVGltZW91dCksaGFzRG91YmxlVGFwKCkmJiFpbkRvdWJsZVRhcCgpPyhkb3VibGVUYXBTdGFydFRpbWU9Z2V0VGltZVN0YW1wKCksc2luZ2xlVGFwVGltZW91dD1zZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKXtkb3VibGVUYXBTdGFydFRpbWU9bnVsbCwkZWxlbWVudC50cmlnZ2VyKFwidGFwXCIsW2V2ZW50LnRhcmdldF0pLG9wdGlvbnMudGFwJiYocmV0PW9wdGlvbnMudGFwLmNhbGwoJGVsZW1lbnQsZXZlbnQsZXZlbnQudGFyZ2V0KSl9LHRoaXMpLG9wdGlvbnMuZG91YmxlVGFwVGhyZXNob2xkKSk6KGRvdWJsZVRhcFN0YXJ0VGltZT1udWxsLCRlbGVtZW50LnRyaWdnZXIoXCJ0YXBcIixbZXZlbnQudGFyZ2V0XSksb3B0aW9ucy50YXAmJihyZXQ9b3B0aW9ucy50YXAuY2FsbCgkZWxlbWVudCxldmVudCxldmVudC50YXJnZXQpKSkpOmdlc3R1cmU9PURPVUJMRV9UQVA/cGhhc2UhPT1QSEFTRV9DQU5DRUwmJnBoYXNlIT09UEhBU0VfRU5EfHwoY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpLGNsZWFyVGltZW91dChob2xkVGltZW91dCksZG91YmxlVGFwU3RhcnRUaW1lPW51bGwsJGVsZW1lbnQudHJpZ2dlcihcImRvdWJsZXRhcFwiLFtldmVudC50YXJnZXRdKSxvcHRpb25zLmRvdWJsZVRhcCYmKHJldD1vcHRpb25zLmRvdWJsZVRhcC5jYWxsKCRlbGVtZW50LGV2ZW50LGV2ZW50LnRhcmdldCkpKTpnZXN0dXJlPT1MT05HX1RBUCYmKHBoYXNlIT09UEhBU0VfQ0FOQ0VMJiZwaGFzZSE9PVBIQVNFX0VORHx8KGNsZWFyVGltZW91dChzaW5nbGVUYXBUaW1lb3V0KSxkb3VibGVUYXBTdGFydFRpbWU9bnVsbCwkZWxlbWVudC50cmlnZ2VyKFwibG9uZ3RhcFwiLFtldmVudC50YXJnZXRdKSxvcHRpb25zLmxvbmdUYXAmJihyZXQ9b3B0aW9ucy5sb25nVGFwLmNhbGwoJGVsZW1lbnQsZXZlbnQsZXZlbnQudGFyZ2V0KSkpKSxyZXR9ZnVuY3Rpb24gdmFsaWRhdGVTd2lwZURpc3RhbmNlKCl7dmFyIHZhbGlkPSEwO3JldHVybiBudWxsIT09b3B0aW9ucy50aHJlc2hvbGQmJih2YWxpZD1kaXN0YW5jZT49b3B0aW9ucy50aHJlc2hvbGQpLHZhbGlkfWZ1bmN0aW9uIGRpZFN3aXBlQmFja1RvQ2FuY2VsKCl7dmFyIGNhbmNlbGxlZD0hMTtyZXR1cm4gbnVsbCE9PW9wdGlvbnMuY2FuY2VsVGhyZXNob2xkJiZudWxsIT09ZGlyZWN0aW9uJiYoY2FuY2VsbGVkPWdldE1heERpc3RhbmNlKGRpcmVjdGlvbiktZGlzdGFuY2U+PW9wdGlvbnMuY2FuY2VsVGhyZXNob2xkKSxjYW5jZWxsZWR9ZnVuY3Rpb24gdmFsaWRhdGVQaW5jaERpc3RhbmNlKCl7cmV0dXJuIG51bGwhPT1vcHRpb25zLnBpbmNoVGhyZXNob2xkP3BpbmNoRGlzdGFuY2U+PW9wdGlvbnMucGluY2hUaHJlc2hvbGQ6ITB9ZnVuY3Rpb24gdmFsaWRhdGVTd2lwZVRpbWUoKXt2YXIgcmVzdWx0O3JldHVybiByZXN1bHQ9b3B0aW9ucy5tYXhUaW1lVGhyZXNob2xkPyEoZHVyYXRpb24+PW9wdGlvbnMubWF4VGltZVRocmVzaG9sZCk6ITB9ZnVuY3Rpb24gdmFsaWRhdGVEZWZhdWx0RXZlbnQoanFFdmVudCxkaXJlY3Rpb24pe2lmKG9wdGlvbnMucHJldmVudERlZmF1bHRFdmVudHMhPT0hMSlpZihvcHRpb25zLmFsbG93UGFnZVNjcm9sbD09PU5PTkUpanFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7dmFyIGF1dG89b3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGw9PT1BVVRPO3N3aXRjaChkaXJlY3Rpb24pe2Nhc2UgTEVGVDoob3B0aW9ucy5zd2lwZUxlZnQmJmF1dG98fCFhdXRvJiZvcHRpb25zLmFsbG93UGFnZVNjcm9sbCE9SE9SSVpPTlRBTCkmJmpxRXZlbnQucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIFJJR0hUOihvcHRpb25zLnN3aXBlUmlnaHQmJmF1dG98fCFhdXRvJiZvcHRpb25zLmFsbG93UGFnZVNjcm9sbCE9SE9SSVpPTlRBTCkmJmpxRXZlbnQucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIFVQOihvcHRpb25zLnN3aXBlVXAmJmF1dG98fCFhdXRvJiZvcHRpb25zLmFsbG93UGFnZVNjcm9sbCE9VkVSVElDQUwpJiZqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7YnJlYWs7Y2FzZSBET1dOOihvcHRpb25zLnN3aXBlRG93biYmYXV0b3x8IWF1dG8mJm9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsIT1WRVJUSUNBTCkmJmpxRXZlbnQucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIE5PTkU6fX19ZnVuY3Rpb24gdmFsaWRhdGVQaW5jaCgpe3ZhciBoYXNDb3JyZWN0RmluZ2VyQ291bnQ9dmFsaWRhdGVGaW5nZXJzKCksaGFzRW5kUG9pbnQ9dmFsaWRhdGVFbmRQb2ludCgpLGhhc0NvcnJlY3REaXN0YW5jZT12YWxpZGF0ZVBpbmNoRGlzdGFuY2UoKTtyZXR1cm4gaGFzQ29ycmVjdEZpbmdlckNvdW50JiZoYXNFbmRQb2ludCYmaGFzQ29ycmVjdERpc3RhbmNlfWZ1bmN0aW9uIGhhc1BpbmNoZXMoKXtyZXR1cm4hIShvcHRpb25zLnBpbmNoU3RhdHVzfHxvcHRpb25zLnBpbmNoSW58fG9wdGlvbnMucGluY2hPdXQpfWZ1bmN0aW9uIGRpZFBpbmNoKCl7cmV0dXJuISghdmFsaWRhdGVQaW5jaCgpfHwhaGFzUGluY2hlcygpKX1mdW5jdGlvbiB2YWxpZGF0ZVN3aXBlKCl7dmFyIGhhc1ZhbGlkVGltZT12YWxpZGF0ZVN3aXBlVGltZSgpLGhhc1ZhbGlkRGlzdGFuY2U9dmFsaWRhdGVTd2lwZURpc3RhbmNlKCksaGFzQ29ycmVjdEZpbmdlckNvdW50PXZhbGlkYXRlRmluZ2VycygpLGhhc0VuZFBvaW50PXZhbGlkYXRlRW5kUG9pbnQoKSxkaWRDYW5jZWw9ZGlkU3dpcGVCYWNrVG9DYW5jZWwoKSx2YWxpZD0hZGlkQ2FuY2VsJiZoYXNFbmRQb2ludCYmaGFzQ29ycmVjdEZpbmdlckNvdW50JiZoYXNWYWxpZERpc3RhbmNlJiZoYXNWYWxpZFRpbWU7cmV0dXJuIHZhbGlkfWZ1bmN0aW9uIGhhc1N3aXBlcygpe3JldHVybiEhKG9wdGlvbnMuc3dpcGV8fG9wdGlvbnMuc3dpcGVTdGF0dXN8fG9wdGlvbnMuc3dpcGVMZWZ0fHxvcHRpb25zLnN3aXBlUmlnaHR8fG9wdGlvbnMuc3dpcGVVcHx8b3B0aW9ucy5zd2lwZURvd24pfWZ1bmN0aW9uIGRpZFN3aXBlKCl7cmV0dXJuISghdmFsaWRhdGVTd2lwZSgpfHwhaGFzU3dpcGVzKCkpfWZ1bmN0aW9uIHZhbGlkYXRlRmluZ2Vycygpe3JldHVybiBmaW5nZXJDb3VudD09PW9wdGlvbnMuZmluZ2Vyc3x8b3B0aW9ucy5maW5nZXJzPT09QUxMX0ZJTkdFUlN8fCFTVVBQT1JUU19UT1VDSH1mdW5jdGlvbiB2YWxpZGF0ZUVuZFBvaW50KCl7cmV0dXJuIDAhPT1maW5nZXJEYXRhWzBdLmVuZC54fWZ1bmN0aW9uIGhhc1RhcCgpe3JldHVybiEhb3B0aW9ucy50YXB9ZnVuY3Rpb24gaGFzRG91YmxlVGFwKCl7cmV0dXJuISFvcHRpb25zLmRvdWJsZVRhcH1mdW5jdGlvbiBoYXNMb25nVGFwKCl7cmV0dXJuISFvcHRpb25zLmxvbmdUYXB9ZnVuY3Rpb24gdmFsaWRhdGVEb3VibGVUYXAoKXtpZihudWxsPT1kb3VibGVUYXBTdGFydFRpbWUpcmV0dXJuITE7dmFyIG5vdz1nZXRUaW1lU3RhbXAoKTtyZXR1cm4gaGFzRG91YmxlVGFwKCkmJm5vdy1kb3VibGVUYXBTdGFydFRpbWU8PW9wdGlvbnMuZG91YmxlVGFwVGhyZXNob2xkfWZ1bmN0aW9uIGluRG91YmxlVGFwKCl7cmV0dXJuIHZhbGlkYXRlRG91YmxlVGFwKCl9ZnVuY3Rpb24gdmFsaWRhdGVUYXAoKXtyZXR1cm4oMT09PWZpbmdlckNvdW50fHwhU1VQUE9SVFNfVE9VQ0gpJiYoaXNOYU4oZGlzdGFuY2UpfHxkaXN0YW5jZTxvcHRpb25zLnRocmVzaG9sZCl9ZnVuY3Rpb24gdmFsaWRhdGVMb25nVGFwKCl7cmV0dXJuIGR1cmF0aW9uPm9wdGlvbnMubG9uZ1RhcFRocmVzaG9sZCYmRE9VQkxFX1RBUF9USFJFU0hPTEQ+ZGlzdGFuY2V9ZnVuY3Rpb24gZGlkVGFwKCl7cmV0dXJuISghdmFsaWRhdGVUYXAoKXx8IWhhc1RhcCgpKX1mdW5jdGlvbiBkaWREb3VibGVUYXAoKXtyZXR1cm4hKCF2YWxpZGF0ZURvdWJsZVRhcCgpfHwhaGFzRG91YmxlVGFwKCkpfWZ1bmN0aW9uIGRpZExvbmdUYXAoKXtyZXR1cm4hKCF2YWxpZGF0ZUxvbmdUYXAoKXx8IWhhc0xvbmdUYXAoKSl9ZnVuY3Rpb24gc3RhcnRNdWx0aUZpbmdlclJlbGVhc2UoZXZlbnQpe3ByZXZpb3VzVG91Y2hFbmRUaW1lPWdldFRpbWVTdGFtcCgpLGZpbmdlckNvdW50QXRSZWxlYXNlPWV2ZW50LnRvdWNoZXMubGVuZ3RoKzF9ZnVuY3Rpb24gY2FuY2VsTXVsdGlGaW5nZXJSZWxlYXNlKCl7cHJldmlvdXNUb3VjaEVuZFRpbWU9MCxmaW5nZXJDb3VudEF0UmVsZWFzZT0wfWZ1bmN0aW9uIGluTXVsdGlGaW5nZXJSZWxlYXNlKCl7dmFyIHdpdGhpblRocmVzaG9sZD0hMTtpZihwcmV2aW91c1RvdWNoRW5kVGltZSl7dmFyIGRpZmY9Z2V0VGltZVN0YW1wKCktcHJldmlvdXNUb3VjaEVuZFRpbWU7ZGlmZjw9b3B0aW9ucy5maW5nZXJSZWxlYXNlVGhyZXNob2xkJiYod2l0aGluVGhyZXNob2xkPSEwKX1yZXR1cm4gd2l0aGluVGhyZXNob2xkfWZ1bmN0aW9uIGdldFRvdWNoSW5Qcm9ncmVzcygpe3JldHVybiEoJGVsZW1lbnQuZGF0YShQTFVHSU5fTlMrXCJfaW50b3VjaFwiKSE9PSEwKX1mdW5jdGlvbiBzZXRUb3VjaEluUHJvZ3Jlc3ModmFsKXskZWxlbWVudCYmKHZhbD09PSEwPygkZWxlbWVudC5iaW5kKE1PVkVfRVYsdG91Y2hNb3ZlKSwkZWxlbWVudC5iaW5kKEVORF9FVix0b3VjaEVuZCksTEVBVkVfRVYmJiRlbGVtZW50LmJpbmQoTEVBVkVfRVYsdG91Y2hMZWF2ZSkpOigkZWxlbWVudC51bmJpbmQoTU9WRV9FVix0b3VjaE1vdmUsITEpLCRlbGVtZW50LnVuYmluZChFTkRfRVYsdG91Y2hFbmQsITEpLExFQVZFX0VWJiYkZWxlbWVudC51bmJpbmQoTEVBVkVfRVYsdG91Y2hMZWF2ZSwhMSkpLCRlbGVtZW50LmRhdGEoUExVR0lOX05TK1wiX2ludG91Y2hcIix2YWw9PT0hMCkpfWZ1bmN0aW9uIGNyZWF0ZUZpbmdlckRhdGEoaWQsZXZ0KXt2YXIgZj17c3RhcnQ6e3g6MCx5OjB9LGxhc3Q6e3g6MCx5OjB9LGVuZDp7eDowLHk6MH19O3JldHVybiBmLnN0YXJ0Lng9Zi5sYXN0Lng9Zi5lbmQueD1ldnQucGFnZVh8fGV2dC5jbGllbnRYLGYuc3RhcnQueT1mLmxhc3QueT1mLmVuZC55PWV2dC5wYWdlWXx8ZXZ0LmNsaWVudFksZmluZ2VyRGF0YVtpZF09ZixmfWZ1bmN0aW9uIHVwZGF0ZUZpbmdlckRhdGEoZXZ0KXt2YXIgaWQ9dm9pZCAwIT09ZXZ0LmlkZW50aWZpZXI/ZXZ0LmlkZW50aWZpZXI6MCxmPWdldEZpbmdlckRhdGEoaWQpO3JldHVybiBudWxsPT09ZiYmKGY9Y3JlYXRlRmluZ2VyRGF0YShpZCxldnQpKSxmLmxhc3QueD1mLmVuZC54LGYubGFzdC55PWYuZW5kLnksZi5lbmQueD1ldnQucGFnZVh8fGV2dC5jbGllbnRYLGYuZW5kLnk9ZXZ0LnBhZ2VZfHxldnQuY2xpZW50WSxmfWZ1bmN0aW9uIGdldEZpbmdlckRhdGEoaWQpe3JldHVybiBmaW5nZXJEYXRhW2lkXXx8bnVsbH1mdW5jdGlvbiBzZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24sZGlzdGFuY2Upe2RpcmVjdGlvbiE9Tk9ORSYmKGRpc3RhbmNlPU1hdGgubWF4KGRpc3RhbmNlLGdldE1heERpc3RhbmNlKGRpcmVjdGlvbikpLG1heGltdW1zTWFwW2RpcmVjdGlvbl0uZGlzdGFuY2U9ZGlzdGFuY2UpfWZ1bmN0aW9uIGdldE1heERpc3RhbmNlKGRpcmVjdGlvbil7cmV0dXJuIG1heGltdW1zTWFwW2RpcmVjdGlvbl0/bWF4aW11bXNNYXBbZGlyZWN0aW9uXS5kaXN0YW5jZTp2b2lkIDB9ZnVuY3Rpb24gY3JlYXRlTWF4aW11bXNEYXRhKCl7dmFyIG1heERhdGE9e307cmV0dXJuIG1heERhdGFbTEVGVF09Y3JlYXRlTWF4aW11bVZPKExFRlQpLG1heERhdGFbUklHSFRdPWNyZWF0ZU1heGltdW1WTyhSSUdIVCksbWF4RGF0YVtVUF09Y3JlYXRlTWF4aW11bVZPKFVQKSxtYXhEYXRhW0RPV05dPWNyZWF0ZU1heGltdW1WTyhET1dOKSxtYXhEYXRhfWZ1bmN0aW9uIGNyZWF0ZU1heGltdW1WTyhkaXIpe3JldHVybntkaXJlY3Rpb246ZGlyLGRpc3RhbmNlOjB9fWZ1bmN0aW9uIGNhbGN1bGF0ZUR1cmF0aW9uKCl7cmV0dXJuIGVuZFRpbWUtc3RhcnRUaW1lfWZ1bmN0aW9uIGNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShzdGFydFBvaW50LGVuZFBvaW50KXt2YXIgZGlmZlg9TWF0aC5hYnMoc3RhcnRQb2ludC54LWVuZFBvaW50LngpLGRpZmZZPU1hdGguYWJzKHN0YXJ0UG9pbnQueS1lbmRQb2ludC55KTtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoZGlmZlgqZGlmZlgrZGlmZlkqZGlmZlkpKX1mdW5jdGlvbiBjYWxjdWxhdGVQaW5jaFpvb20oc3RhcnREaXN0YW5jZSxlbmREaXN0YW5jZSl7dmFyIHBlcmNlbnQ9ZW5kRGlzdGFuY2Uvc3RhcnREaXN0YW5jZSoxO3JldHVybiBwZXJjZW50LnRvRml4ZWQoMil9ZnVuY3Rpb24gY2FsY3VsYXRlUGluY2hEaXJlY3Rpb24oKXtyZXR1cm4gMT5waW5jaFpvb20/T1VUOklOfWZ1bmN0aW9uIGNhbGN1bGF0ZURpc3RhbmNlKHN0YXJ0UG9pbnQsZW5kUG9pbnQpe3JldHVybiBNYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyhlbmRQb2ludC54LXN0YXJ0UG9pbnQueCwyKStNYXRoLnBvdyhlbmRQb2ludC55LXN0YXJ0UG9pbnQueSwyKSkpfWZ1bmN0aW9uIGNhbGN1bGF0ZUFuZ2xlKHN0YXJ0UG9pbnQsZW5kUG9pbnQpe3ZhciB4PXN0YXJ0UG9pbnQueC1lbmRQb2ludC54LHk9ZW5kUG9pbnQueS1zdGFydFBvaW50Lnkscj1NYXRoLmF0YW4yKHkseCksYW5nbGU9TWF0aC5yb3VuZCgxODAqci9NYXRoLlBJKTtyZXR1cm4gMD5hbmdsZSYmKGFuZ2xlPTM2MC1NYXRoLmFicyhhbmdsZSkpLGFuZ2xlfWZ1bmN0aW9uIGNhbGN1bGF0ZURpcmVjdGlvbihzdGFydFBvaW50LGVuZFBvaW50KXtpZihjb21wYXJlUG9pbnRzKHN0YXJ0UG9pbnQsZW5kUG9pbnQpKXJldHVybiBOT05FO3ZhciBhbmdsZT1jYWxjdWxhdGVBbmdsZShzdGFydFBvaW50LGVuZFBvaW50KTtyZXR1cm4gNDU+PWFuZ2xlJiZhbmdsZT49MD9MRUZUOjM2MD49YW5nbGUmJmFuZ2xlPj0zMTU/TEVGVDphbmdsZT49MTM1JiYyMjU+PWFuZ2xlP1JJR0hUOmFuZ2xlPjQ1JiYxMzU+YW5nbGU/RE9XTjpVUH1mdW5jdGlvbiBnZXRUaW1lU3RhbXAoKXt2YXIgbm93PW5ldyBEYXRlO3JldHVybiBub3cuZ2V0VGltZSgpfWZ1bmN0aW9uIGdldGJvdW5kcyhlbCl7ZWw9JChlbCk7dmFyIG9mZnNldD1lbC5vZmZzZXQoKSxib3VuZHM9e2xlZnQ6b2Zmc2V0LmxlZnQscmlnaHQ6b2Zmc2V0LmxlZnQrZWwub3V0ZXJXaWR0aCgpLHRvcDpvZmZzZXQudG9wLGJvdHRvbTpvZmZzZXQudG9wK2VsLm91dGVySGVpZ2h0KCl9O3JldHVybiBib3VuZHN9ZnVuY3Rpb24gaXNJbkJvdW5kcyhwb2ludCxib3VuZHMpe3JldHVybiBwb2ludC54PmJvdW5kcy5sZWZ0JiZwb2ludC54PGJvdW5kcy5yaWdodCYmcG9pbnQueT5ib3VuZHMudG9wJiZwb2ludC55PGJvdW5kcy5ib3R0b219ZnVuY3Rpb24gY29tcGFyZVBvaW50cyhwb2ludEEscG9pbnRCKXtyZXR1cm4gcG9pbnRBLng9PXBvaW50Qi54JiZwb2ludEEueT09cG9pbnRCLnl9dmFyIG9wdGlvbnM9JC5leHRlbmQoe30sb3B0aW9ucyksdXNlVG91Y2hFdmVudHM9U1VQUE9SVFNfVE9VQ0h8fFNVUFBPUlRTX1BPSU5URVJ8fCFvcHRpb25zLmZhbGxiYWNrVG9Nb3VzZUV2ZW50cyxTVEFSVF9FVj11c2VUb3VjaEV2ZW50cz9TVVBQT1JUU19QT0lOVEVSP1NVUFBPUlRTX1BPSU5URVJfSUUxMD9cIk1TUG9pbnRlckRvd25cIjpcInBvaW50ZXJkb3duXCI6XCJ0b3VjaHN0YXJ0XCI6XCJtb3VzZWRvd25cIixNT1ZFX0VWPXVzZVRvdWNoRXZlbnRzP1NVUFBPUlRTX1BPSU5URVI/U1VQUE9SVFNfUE9JTlRFUl9JRTEwP1wiTVNQb2ludGVyTW92ZVwiOlwicG9pbnRlcm1vdmVcIjpcInRvdWNobW92ZVwiOlwibW91c2Vtb3ZlXCIsRU5EX0VWPXVzZVRvdWNoRXZlbnRzP1NVUFBPUlRTX1BPSU5URVI/U1VQUE9SVFNfUE9JTlRFUl9JRTEwP1wiTVNQb2ludGVyVXBcIjpcInBvaW50ZXJ1cFwiOlwidG91Y2hlbmRcIjpcIm1vdXNldXBcIixMRUFWRV9FVj11c2VUb3VjaEV2ZW50cz9TVVBQT1JUU19QT0lOVEVSP1wibW91c2VsZWF2ZVwiOm51bGw6XCJtb3VzZWxlYXZlXCIsQ0FOQ0VMX0VWPVNVUFBPUlRTX1BPSU5URVI/U1VQUE9SVFNfUE9JTlRFUl9JRTEwP1wiTVNQb2ludGVyQ2FuY2VsXCI6XCJwb2ludGVyY2FuY2VsXCI6XCJ0b3VjaGNhbmNlbFwiLGRpc3RhbmNlPTAsZGlyZWN0aW9uPW51bGwsY3VycmVudERpcmVjdGlvbj1udWxsLGR1cmF0aW9uPTAsc3RhcnRUb3VjaGVzRGlzdGFuY2U9MCxlbmRUb3VjaGVzRGlzdGFuY2U9MCxwaW5jaFpvb209MSxwaW5jaERpc3RhbmNlPTAscGluY2hEaXJlY3Rpb249MCxtYXhpbXVtc01hcD1udWxsLCRlbGVtZW50PSQoZWxlbWVudCkscGhhc2U9XCJzdGFydFwiLGZpbmdlckNvdW50PTAsZmluZ2VyRGF0YT17fSxzdGFydFRpbWU9MCxlbmRUaW1lPTAscHJldmlvdXNUb3VjaEVuZFRpbWU9MCxmaW5nZXJDb3VudEF0UmVsZWFzZT0wLGRvdWJsZVRhcFN0YXJ0VGltZT0wLHNpbmdsZVRhcFRpbWVvdXQ9bnVsbCxob2xkVGltZW91dD1udWxsO3RyeXskZWxlbWVudC5iaW5kKFNUQVJUX0VWLHRvdWNoU3RhcnQpLCRlbGVtZW50LmJpbmQoQ0FOQ0VMX0VWLHRvdWNoQ2FuY2VsKX1jYXRjaChlKXskLmVycm9yKFwiZXZlbnRzIG5vdCBzdXBwb3J0ZWQgXCIrU1RBUlRfRVYrXCIsXCIrQ0FOQ0VMX0VWK1wiIG9uIGpRdWVyeS5zd2lwZVwiKX10aGlzLmVuYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGUoKSwkZWxlbWVudC5iaW5kKFNUQVJUX0VWLHRvdWNoU3RhcnQpLCRlbGVtZW50LmJpbmQoQ0FOQ0VMX0VWLHRvdWNoQ2FuY2VsKSwkZWxlbWVudH0sdGhpcy5kaXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHJlbW92ZUxpc3RlbmVycygpLCRlbGVtZW50fSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtyZW1vdmVMaXN0ZW5lcnMoKSwkZWxlbWVudC5kYXRhKFBMVUdJTl9OUyxudWxsKSwkZWxlbWVudD1udWxsfSx0aGlzLm9wdGlvbj1mdW5jdGlvbihwcm9wZXJ0eSx2YWx1ZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHByb3BlcnR5KW9wdGlvbnM9JC5leHRlbmQob3B0aW9ucyxwcm9wZXJ0eSk7ZWxzZSBpZih2b2lkIDAhPT1vcHRpb25zW3Byb3BlcnR5XSl7aWYodm9pZCAwPT09dmFsdWUpcmV0dXJuIG9wdGlvbnNbcHJvcGVydHldO29wdGlvbnNbcHJvcGVydHldPXZhbHVlfWVsc2V7aWYoIXByb3BlcnR5KXJldHVybiBvcHRpb25zOyQuZXJyb3IoXCJPcHRpb24gXCIrcHJvcGVydHkrXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlLm9wdGlvbnNcIil9cmV0dXJuIG51bGx9fXZhciBWRVJTSU9OPVwiMS42LjE4XCIsTEVGVD1cImxlZnRcIixSSUdIVD1cInJpZ2h0XCIsVVA9XCJ1cFwiLERPV049XCJkb3duXCIsSU49XCJpblwiLE9VVD1cIm91dFwiLE5PTkU9XCJub25lXCIsQVVUTz1cImF1dG9cIixTV0lQRT1cInN3aXBlXCIsUElOQ0g9XCJwaW5jaFwiLFRBUD1cInRhcFwiLERPVUJMRV9UQVA9XCJkb3VibGV0YXBcIixMT05HX1RBUD1cImxvbmd0YXBcIixIT1JJWk9OVEFMPVwiaG9yaXpvbnRhbFwiLFZFUlRJQ0FMPVwidmVydGljYWxcIixBTExfRklOR0VSUz1cImFsbFwiLERPVUJMRV9UQVBfVEhSRVNIT0xEPTEwLFBIQVNFX1NUQVJUPVwic3RhcnRcIixQSEFTRV9NT1ZFPVwibW92ZVwiLFBIQVNFX0VORD1cImVuZFwiLFBIQVNFX0NBTkNFTD1cImNhbmNlbFwiLFNVUFBPUlRTX1RPVUNIPVwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3csU1VQUE9SVFNfUE9JTlRFUl9JRTEwPXdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCYmIXdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQmJiFTVVBQT1JUU19UT1VDSCxTVVBQT1JUU19QT0lOVEVSPSh3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkfHx3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpJiYhU1VQUE9SVFNfVE9VQ0gsUExVR0lOX05TPVwiVG91Y2hTd2lwZVwiLGRlZmF1bHRzPXtmaW5nZXJzOjEsdGhyZXNob2xkOjc1LGNhbmNlbFRocmVzaG9sZDpudWxsLHBpbmNoVGhyZXNob2xkOjIwLG1heFRpbWVUaHJlc2hvbGQ6bnVsbCxmaW5nZXJSZWxlYXNlVGhyZXNob2xkOjI1MCxsb25nVGFwVGhyZXNob2xkOjUwMCxkb3VibGVUYXBUaHJlc2hvbGQ6MjAwLHN3aXBlOm51bGwsc3dpcGVMZWZ0Om51bGwsc3dpcGVSaWdodDpudWxsLHN3aXBlVXA6bnVsbCxzd2lwZURvd246bnVsbCxzd2lwZVN0YXR1czpudWxsLHBpbmNoSW46bnVsbCxwaW5jaE91dDpudWxsLHBpbmNoU3RhdHVzOm51bGwsY2xpY2s6bnVsbCx0YXA6bnVsbCxkb3VibGVUYXA6bnVsbCxsb25nVGFwOm51bGwsaG9sZDpudWxsLHRyaWdnZXJPblRvdWNoRW5kOiEwLHRyaWdnZXJPblRvdWNoTGVhdmU6ITEsYWxsb3dQYWdlU2Nyb2xsOlwiYXV0b1wiLGZhbGxiYWNrVG9Nb3VzZUV2ZW50czohMCxleGNsdWRlZEVsZW1lbnRzOlwiLm5vU3dpcGVcIixwcmV2ZW50RGVmYXVsdEV2ZW50czohMH07JC5mbi5zd2lwZT1mdW5jdGlvbihtZXRob2Qpe3ZhciAkdGhpcz0kKHRoaXMpLHBsdWdpbj0kdGhpcy5kYXRhKFBMVUdJTl9OUyk7aWYocGx1Z2luJiZcInN0cmluZ1wiPT10eXBlb2YgbWV0aG9kKXtpZihwbHVnaW5bbWV0aG9kXSlyZXR1cm4gcGx1Z2luW21ldGhvZF0uYXBwbHkocGx1Z2luLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk7JC5lcnJvcihcIk1ldGhvZCBcIittZXRob2QrXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlXCIpfWVsc2UgaWYocGx1Z2luJiZcIm9iamVjdFwiPT10eXBlb2YgbWV0aG9kKXBsdWdpbi5vcHRpb24uYXBwbHkocGx1Z2luLGFyZ3VtZW50cyk7ZWxzZSBpZighKHBsdWdpbnx8XCJvYmplY3RcIiE9dHlwZW9mIG1ldGhvZCYmbWV0aG9kKSlyZXR1cm4gaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuICR0aGlzfSwkLmZuLnN3aXBlLnZlcnNpb249VkVSU0lPTiwkLmZuLnN3aXBlLmRlZmF1bHRzPWRlZmF1bHRzLCQuZm4uc3dpcGUucGhhc2VzPXtQSEFTRV9TVEFSVDpQSEFTRV9TVEFSVCxQSEFTRV9NT1ZFOlBIQVNFX01PVkUsUEhBU0VfRU5EOlBIQVNFX0VORCxQSEFTRV9DQU5DRUw6UEhBU0VfQ0FOQ0VMfSwkLmZuLnN3aXBlLmRpcmVjdGlvbnM9e0xFRlQ6TEVGVCxSSUdIVDpSSUdIVCxVUDpVUCxET1dOOkRPV04sSU46SU4sT1VUOk9VVH0sJC5mbi5zd2lwZS5wYWdlU2Nyb2xsPXtOT05FOk5PTkUsSE9SSVpPTlRBTDpIT1JJWk9OVEFMLFZFUlRJQ0FMOlZFUlRJQ0FMLEFVVE86QVVUT30sJC5mbi5zd2lwZS5maW5nZXJzPXtPTkU6MSxUV086MixUSFJFRTozLEZPVVI6NCxGSVZFOjUsQUxMOkFMTF9GSU5HRVJTfX0pO1xyXG4vKiFcclxuICogalF1ZXJ5IGJvb3RzdHJhcCAzIGJyZWFrcG9pbnQgY2hlY2tcclxuICogQ2hlY2sgdGhlIGN1cnJlbnQgdmlzaWJpbGl0eSBvZiBib290c3RyYXAgMyBicmVha3BvaW50c1xyXG4gKlxyXG4gKiBAZXhhbXBsZSBgJC5pc1hzKClgIGZ1bmN0aW9uIGFsaWFzIGZvciBgJC5pc0JyZWFrcG9pbnQoXCJ4c1wiKWBcclxuICogQGV4YW1wbGUgYCQuaXNTbSgpYCBmdW5jdGlvbiBhbGlhcyBmb3IgYCQuaXNCcmVha3BvaW50KFwic21cIilgXHJcbiAqIEBleGFtcGxlIGAkLmlzTWQoKWAgZnVuY3Rpb24gYWxpYXMgZm9yIGAkLmlzQnJlYWtwb2ludChcIm1kXCIpYFxyXG4gKiBAZXhhbXBsZSBgJC5pc0xnKClgIGZ1bmN0aW9uIGFsaWFzIGZvciBgJC5pc0JyZWFrcG9pbnQoXCJsZ1wiKWBcclxuICogQHZlcnNpb24gMS4wLjBcclxuICogQGNvcHlyaWdodCBKZW5zIEEuIChjYWtlYmFrZSkgYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBAbGljZW5zZSBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcclxuICovXHJcbiFmdW5jdGlvbihhKXthLmlzQnJlYWtwb2ludD1mdW5jdGlvbihiKXt2YXIgYyxkO3JldHVybiBjPWEoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOlwidmlzaWJsZS1cIitifSkuYXBwZW5kVG8oXCJib2R5XCIpLGQ9Yy5pcyhcIjp2aXNpYmxlXCIpLGMucmVtb3ZlKCksZH0sYS5leHRlbmQoYSx7aXNYczpmdW5jdGlvbigpe3JldHVybiBhLmlzQnJlYWtwb2ludChcInhzXCIpfSxpc1NtOmZ1bmN0aW9uKCl7cmV0dXJuIGEuaXNCcmVha3BvaW50KFwic21cIil9LGlzTWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5pc0JyZWFrcG9pbnQoXCJtZFwiKX0saXNMZzpmdW5jdGlvbigpe3JldHVybiBhLmlzQnJlYWtwb2ludChcImxnXCIpfX0pfShqUXVlcnkpOyIsIihmdW5jdGlvbiAoJCkge1xyXG4gICAgLy8gSGFuZGxlIGhhc2hlcyB3aGVuIHBhZ2UgbG9hZHMgdG8gb2Zmc2V0IGFnYWluc3QgZml4ZWQgdG9wIG5hdmJhclxyXG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzkzMjUyMDUvMTU2Mzg4XHJcbiAgICBmdW5jdGlvbiBhZGp1c3RBbmNob3IoKSB7XHJcbiAgICAgICAgY29uc3QgJGFuY2hvciA9ICQoJzp0YXJnZXQnKTtcclxuICAgICAgICBjb25zdCBmaXhlZEVsZW1lbnRIZWlnaHQgPSAkKCcubmF2YmFyLWZpeGVkLXRvcCcpLm91dGVySGVpZ2h0KCkgKyAyMDtcclxuICAgICAgICBpZiAoJGFuY2hvci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKVxyXG4gICAgICAgICAgICAgICAgLnN0b3AoKVxyXG4gICAgICAgICAgICAgICAgLmFuaW1hdGUoeyBzY3JvbGxUb3A6ICRhbmNob3Iub2Zmc2V0KCkudG9wIC0gZml4ZWRFbGVtZW50SGVpZ2h0IH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICQod2luZG93KS5vbignaGFzaGNoYW5nZSBsb2FkJywgYWRqdXN0QW5jaG9yKTtcclxuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCBcImFbaHJlZl49JyMnXVwiLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggPT09ICQodGhpcykuYXR0cignaHJlZicpKSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFkanVzdEFuY2hvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBBcHAuaW5pdCgpO1xyXG5cclxuICAgICAgICAvLyBQYWdlcnMuXHJcbiAgICAgICAgJChcInNlbGVjdC5wYWdlci5zZWxlY3RvclwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAkKHRoaXMpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKS52YWwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQXV0by1idWxrIGFjdGlvbnMuXHJcbiAgICAgICAgJChcIi5idWxrLWFjdGlvbnMtYXV0byBzZWxlY3RcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiZm9ybVwiKS5maW5kKFwiLmFwcGx5LWJ1bGstYWN0aW9ucy1hdXRvOmZpcnN0XCIpLmNsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZVVybCBhbmQgVW5zYWZlVXJsLlxyXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCJbaXRlbXByb3B+PSdSZW1vdmVVcmwnXVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIERvblwidCBzaG93IHRoZSBjb25maXJtIGRpYWxvZyBpZiB0aGUgbGluayBpcyBhbHNvIFVuc2FmZVVybCwgYXMgaXQgd2lsbCBhbHJlYWR5IGJlIGhhbmRsZWQgaW4gYmFzZS5qcy5cclxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmlsdGVyKFwiW2l0ZW1wcm9wfj0nVW5zYWZlVXJsJ11cIikubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSBhIGN1c3RvbSBtZXNzYWdlIGlmIGl0cyBzZXQgaW4gZGF0YS1tZXNzYWdlLlxyXG4gICAgICAgICAgICB2YXIgZGF0YU1lc3NhZ2UgPSAkKHRoaXMpLmRhdGEoXCJtZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YU1lc3NhZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YU1lc3NhZ2UgPSAkKFwiW2RhdGEtZGVmYXVsdC1yZW1vdmUtY29uZmlybWF0aW9uLXByb21wdF1cIikuZGF0YShcImRlZmF1bHQtcmVtb3ZlLWNvbmZpcm1hdGlvbi1wcm9tcHRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb25maXJtKGRhdGFNZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgYWxsXHJcbiAgICAgICAgJChcIi5jaGVjay1hbGxcIikuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChcImlucHV0W3R5cGU9Y2hlY2tib3hdOm5vdCg6ZGlzYWJsZWQpXCIpLnByb3AoXCJjaGVja2VkXCIsICQodGhpcykucHJvcChcImNoZWNrZWRcIikpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUga2V5cHJlc3MgZXZlbnRzIGluIGJ1bGsgYWN0aW9uIGZpZWxkc2V0cyB0aGF0IGFyZSBwYXJ0IG9mIGEgc2luZ2xlIGZvcm0uXHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIG1ha2Ugc3VyZSB0aGUgZXhwZWN0ZWQgYWN0aW9uIGV4ZWN1dGVzIHdoZW4gcHJlc3NpbmcgXCJlbnRlclwiIG9uIGEgdGV4dCBmaWVsZC5cclxuICAgICAgICAkKFwiZm9ybSAuYnVsay1hY3Rpb25zXCIpLm9uKFwia2V5cHJlc3NcIiwgXCJpbnB1dFt0eXBlPSd0ZXh0J11cIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUud2hpY2ggIT09IDEzKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlbmRlciA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZHNldCA9IHNlbmRlci5jbG9zZXN0KFwiZmllbGRzZXQuYnVsay1hY3Rpb25zXCIpO1xyXG4gICAgICAgICAgICB2YXIgc3VibWl0QnV0dG9uID0gZmllbGRzZXQuZmluZChcImJ1dHRvblt0eXBlPSdzdWJtaXQnXVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdWJtaXRCdXR0b24ubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzdWJtaXRCdXR0b24uY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9tb3JlLWFjdGlvbnNcclxuICAgICAgICBmdW5jdGlvbiBzb3J0QnkocHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJfYSA9IHBhcnNlSW50KCQoYSkuYXR0cihwcm9wKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyX2IgPSBwYXJzZUludCgkKGIpLmF0dHIocHJvcCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGZpbHRlcl9hKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcl9hID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZmlsdGVyX2IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyX2IgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbHRlcl9hICsgXCIgPiBcIiArIGZpbHRlcl9iKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJfYSA+IGZpbHRlcl9iXHJcbiAgICAgICAgICAgICAgICA/IC0xXHJcbiAgICAgICAgICAgICAgICA6IChmaWx0ZXJfYSA+IGZpbHRlcl9iID8gMSA6IDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNvcnREb20oZmlsdGVyLCBlbGVtZW50cykge1xyXG4gICAgICAgICAgICAvL1RyYW5zZm9ybSBvdXIgbm9kZUxpc3QgaW50byBhcnJheSBhbmQgYXBwbHkgc29ydCBmdW5jdGlvblxyXG4gICAgICAgICAgICByZXR1cm4gW10ubWFwLmNhbGwoZWxlbWVudHMsIGZ1bmN0aW9uIChlbG0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbG07XHJcbiAgICAgICAgICAgIH0pLnNvcnQoc29ydEJ5KGZpbHRlcikpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGxhc3QoYXJyYXksIG4pIHtcclxuICAgICAgICAgICAgaWYgKGFycmF5ID09PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcclxuICAgICAgICAgICAgaWYgKG4gPT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIHJldHVybiBhcnJheS5zbGljZShNYXRoLm1heChhcnJheS5sZW5ndGggLSBuLCAwKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICAgICB2YXIgbGlua3MgPSAkKFwiLmNvbnRlbnQtaXRlbXMtd2l0aC1hY3Rpb25zIGxpID4gYVwiKTtcclxuICAgICAgICAgICAgLy9zZXRzIHRoZSBpbml0aWFsIHNvcnQgb3JkZXJcclxuICAgICAgICAgICAgJC5lYWNoKGxpbmtzLCBmdW5jdGlvbiAoaSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICQoZWwpLmF0dHIoXCJkYXRhLWlkXCIsIFwiYWN0aW9uLVwiICsgaSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbmRlckNvbnRlbnRJdGVtQWN0aW9ucygpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9ICQoXCIuY29udGVudC1pdGVtcy13aXRoLWFjdGlvbnMgbGlcIik7XHJcbiAgICAgICAgICAgIHZhciBjb250YWluZXJXaWR0aCA9ICQoXCIuY29udGVudC1pdGVtc1wiKS5vdXRlcldpZHRoKHRydWUpO1xyXG4gICAgICAgICAgICAkLmVhY2goY29udGFpbmVyLCBmdW5jdGlvbiAoaSwgYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duVG9nZ2xlV2lkdGggPSAzNzsvLyBnZXRFbGVtZW50TWluV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYWluQWN0aW9ucyA9ICQoYykuZmluZChcInVsLm1haW4tYWN0aW9uc1wiKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb3JlYWN0aW9ucyA9ICQoYykuZmluZChcInVsLm1vcmUtYWN0aW9uc1wiKTtcclxuICAgICAgICAgICAgICAgICQuZWFjaChtYWluQWN0aW9ucywgZnVuY3Rpb24gKGksIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRlbCA9ICQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb29wID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYWluQWN0aW9uc1dpZHRoID0gZHJvcGRvd25Ub2dnbGVXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtzID0gJGVsLmZpbmQoXCJsaTpmaXJzdC1jaGlsZCA+IGE6dmlzaWJsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGxpbmtzLCBmdW5jdGlvbiAoaSwgYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkFjdGlvbnNXaWR0aCArPSBnZXRFbGVtZW50TWluV2lkdGgoJChhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFpbkFjdGlvbnNXaWR0aCA+PSBjb250YWluZXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3QgPSAkKHNvcnREb20oXCJwcmlvcml0eVwiLCBsaW5rcykpLmxhc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGkgPSAkKFwiPGxpPlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaS5hcHBlbmQobGFzdC5jbG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmVhY3Rpb25zLnByZXBlbmQobGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5BY3Rpb25zV2lkdGggLT0gZ2V0RWxlbWVudE1pbldpZHRoKGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gbW9yZWFjdGlvbnMuZmluZChcImxpOmZpcnN0ID4gYVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uSWQgPSBmaXJzdC5hdHRyKFwiZGF0YS1pZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFpbkFjdGlvbiA9IG1haW5BY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwibGkgYVtkYXRhLWlkPSdcIiArIGFjdGlvbklkICsgXCInXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluQWN0aW9uLnNob3coKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0LnBhcmVudChcImxpXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haW5BY3Rpb25zV2lkdGggKz0gZ2V0RWxlbWVudE1pbldpZHRoKG1haW5BY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIG1haW5BY3Rpb25zV2lkdGggPSBkcm9wZG93blRvZ2dsZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBsaW5rcyA9ICRlbC5maW5kKFwibGk6Zmlyc3QtY2hpbGQgPiBhOnZpc2libGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJC5lYWNoKGxpbmtzLCBmdW5jdGlvbiAoaSwgYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBtYWluQWN0aW9uc1dpZHRoICs9IGdldEVsZW1lbnRNaW5XaWR0aCgkKGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy99KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGxvb3AgPCAyMCAmJiBtYWluQWN0aW9uc1dpZHRoID4gY29udGFpbmVyV2lkdGgpLy8obWFpbkFjdGlvbnNXaWR0aCA+IGNvbnRhaW5lcldpZHRoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKG1vcmVhY3Rpb25zLCBmdW5jdGlvbiAoaSwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgJGVsID0gJChlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbC5maW5kKFwibGlcIikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGMpLmZpbmQoXCIubW9yZS1hY3Rpb25zLWRyb3Bkb3duXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoYykuZmluZChcIi5tb3JlLWFjdGlvbnMtZHJvcGRvd25cIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRNaW5XaWR0aChlbCkge1xyXG4gICAgICAgICAgICB2YXIgcHJvcHMgPSB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIsIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIgfTtcclxuICAgICAgICAgICAgdmFyIGl0ZW1XaWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChlbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAkLnN3YXAoZWxbMF0sIHByb3BzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoID0gZWwub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1XaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlkO1xyXG4gICAgICAgIHZhciBzdGFydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7IC8vZ2V0IHRoZSBvcmlnaW5hbCBzY3JlZW4gd2lkdGhcclxuXHJcbiAgICAgICAgcmVuZGVyQ29udGVudEl0ZW1BY3Rpb25zKCk7XHJcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XHJcbiAgICAgICAgICAgIGlkID0gc2V0VGltZW91dChkb25lUmVzaXppbmcsIDIwMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRvbmVSZXNpemluZygpIHtcclxuICAgICAgICAgICAgcmVuZGVyQ29udGVudEl0ZW1BY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWZXJpZnkgaWYgb2JqZWN0IGV4aXN0XHJcbiAgICAgICAgalF1ZXJ5LmZuLmV4aXN0cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubGVuZ3RoID4gMDsgfVxyXG5cclxuICAgICAgICAvLyBCb290c3RyYXAgbW9kYWwgY29uZmlybWF0aW9uLlxyXG4gICAgICAgICQoXCJbZGF0YS1jb25maXJtXVwiKS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAgICAgJChcIltkYXRhLWNvbmZpcm1dXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICAgICAgdmFyIGRpYWxvZyA9ICQoXCIjY29uZmlybWF0aW9uRGlhbG9nXCIpLmNsb25lKCk7XHJcblxyXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoZGlhbG9nKTtcclxuICAgICAgICAgICAgZGlhbG9nLmZpbmQoXCIubW9kYWwtYm9keVwiKS50ZXh0KCQodGhpcykuZGF0YShcImNvbmZpcm1cIikpO1xyXG4gICAgICAgICAgICBkaWFsb2cuZmluZChcIi5kaWFsb2ctY29tbWFuZC15ZXNcIikuYXR0cihcImhyZWZcIiwgaHJlZik7XHJcbiAgICAgICAgICAgIGRpYWxvZy5tb2RhbCh7IHNob3c6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICBkaWFsb2cuZmluZChcIi5kaWFsb2ctY29tbWFuZC15ZXNcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFnaWNUb2tlbiA9ICQoXCJpbnB1dFtuYW1lPSdfX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbiddXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1hZ2ljVG9rZW4pIHsgcmV0dXJuOyB9IC8vIE5vIHNlbnNlIGluIGNvbnRpbnVpbmcgaWYgZm9ybSBQT1NUUyB3aWxsIGZhaWwuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZvcm0gPSAkKFwiPGZvcm0gYWN0aW9uPVxcXCJcIiArIGhyZWYgKyBcIlxcXCIgbWV0aG9kPVxcXCJQT1NUXFxcIiAvPlwiKTtcclxuICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKG1hZ2ljVG9rZW4uY2xvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmNzcyh7IFwicG9zaXRpb25cIjogXCJhYnNvbHV0ZVwiLCBcImxlZnRcIjogXCItOTk5OWVtXCIgfSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9ybS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEJ1bGsgYWN0aW9uIGNvbmZpcm1hdGlvbi5cclxuICAgICAgICAkKFwiW2RhdGEtYnVsay1hY3Rpb25dXCIpLnVuYmluZCgnY2xpY2snKTtcclxuICAgICAgICAkKFwiW2RhdGEtYnVsay1hY3Rpb25dXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmlnZ2VyID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRyaWdnZXIuZGF0YShcImJ1bGstYWN0aW9uXCIpO1xyXG4gICAgICAgICAgICAkKFwiI2J1bGtBY3Rpb25zXCIpLnZhbChhY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRpYWxvZyA9ICQoXCIjY29uZmlybWF0aW9uRGlhbG9nXCIpLmNsb25lKCk7XHJcblxyXG4gICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoZGlhbG9nKTtcclxuICAgICAgICAgICAgZGlhbG9nLmZpbmQoXCIubW9kYWwtYm9keVwiKS50ZXh0KCQodGhpcykuZGF0YShcImJ1bGstYWN0aW9uLWNvbmZpcm1cIikpO1xyXG4gICAgICAgICAgICBkaWFsb2cubW9kYWwoeyBzaG93OiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgZGlhbG9nLmZpbmQoXCIuZGlhbG9nLWNvbW1hbmQteWVzXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oYWN0aW9uKTsgLy9yZXBsYWNlIHRyaWdnZXIuY2xvc2VzdChcImZvcm1cIikuc3VibWl0KCk7IHVubGVzcyB3ZSByZW1vdmUgdGhlIGNvbnRyb2xsZXIgRm9ybVZhbHVlUmVxdWlyZWQgZXZlcnl3aGVyZVxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9XZSBuZWVkIHRvIGNsaWNrIHRoZSBoaWRkZW4gc3VibWl0IGJ1dHRvbiB0byBQT1NUIHRoZSBmb3JtLlxyXG4gICAgICAgIC8vSXQgaXMgbmVlZGVkIGZvciB0aGUgY29udHJvbGxlciBhY3Rpb24ocykgdG8gYmUgaGl0XHJcbiAgICAgICAgZnVuY3Rpb24gc3VibWl0Rm9ybShhY3Rpb24pIHtcclxuICAgICAgICAgICAgLy92ZXJpZnkgdGhlIHVzZSBvZiBvbmUgbmFtZSBvciB0aGUgb3RoZXJcclxuICAgICAgICAgICAgLy9UT0RPIHN0YW5kYXJkaXplIG5hbWUgaW4gYWxsIHZpZXdzIGFuZCBjb250cm9sbGVyc1xyXG4gICAgICAgICAgICBpZiAoJCgnYnV0dG9uW25hbWU9XCJzdWJtaXQuQnVsa0VkaXRcIl0nKS5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJ2J1dHRvbltuYW1lPVwic3VibWl0LkJ1bGtFZGl0XCJdJykuY2xpY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgkKCdidXR0b25bbmFtZT1cInN1Ym1pdC5CdWxrRXhlY3V0ZVwiXScpLmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gJCgnYnV0dG9uW25hbWU9XCJzdWJtaXQuQnVsa0V4ZWN1dGVcIl0nKS5jbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFbmQgQnVsayBlZGl0IGJvb3RzdHJhcCBkcm9wZG93biBidXR0b24gYWN0aW9uc1xyXG4gICAgfSk7XHJcbn0pKGpRdWVyeSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
