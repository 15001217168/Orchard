/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

/// <reference path="Typings/jquery.d.ts" />
/// <reference path="Typings/jqueryui.d.ts" />
/// <reference path="Typings/knockout.d.ts" />
var Orchard;
(function (Orchard) {
    var Azure;
    (function (Azure) {
        var MediaServices;
        (function (MediaServices) {
            var Admin;
            (function (Admin) {
                var Settings;
                (function (Settings) {
                    var StringItem = (function () {
                        function StringItem(value) {
                            this.value = ko.observable(value);
                        }
                        return StringItem;
                    })();
                    Settings.StringItem = StringItem;
                    var EncodingPreset = (function () {
                        function EncodingPreset(name, customXml) {
                            this.name = ko.observable(name);
                            this.customXml = ko.observable(customXml);
                            this.isExpanded = ko.observable(false);
                            this.type = ko.computed(function () {
                                var customXml = this.customXml();
                                if (!!customXml && customXml.length > 0)
                                    return "Custom preset";
                                return "Standard preset";
                            }, this);
                        }
                        EncodingPreset.prototype.toggle = function () {
                            this.isExpanded(!this.isExpanded());
                        };
                        return EncodingPreset;
                    })();
                    Settings.EncodingPreset = EncodingPreset;
                    Settings.clientViewModel = {
                        wamsEncodingPresets: ko.observableArray(),
                        defaultWamsEncodingPresetIndex: ko.observable(),
                        subtitleLanguages: ko.observableArray()
                    };
                    function deleteWamsEncodingPreset(preset) {
                        var removedIndex = Settings.clientViewModel.wamsEncodingPresets.indexOf(preset);
                        Settings.clientViewModel.wamsEncodingPresets.remove(preset);
                        if (removedIndex === Settings.clientViewModel.defaultWamsEncodingPresetIndex())
                            Settings.clientViewModel.defaultWamsEncodingPresetIndex(0);
                        else if (removedIndex < Settings.clientViewModel.defaultWamsEncodingPresetIndex())
                            Settings.clientViewModel.defaultWamsEncodingPresetIndex(Settings.clientViewModel.defaultWamsEncodingPresetIndex() - 1);
                    }
                    Settings.deleteWamsEncodingPreset = deleteWamsEncodingPreset;
                    function addNewWamsEncodingPreset() {
                        Settings.clientViewModel.wamsEncodingPresets.push(new EncodingPreset("Unnamed", null));
                        $("#presets-table tbody:first-of-type tr:last-of-type td:nth-child(2) input").focus().select();
                    }
                    Settings.addNewWamsEncodingPreset = addNewWamsEncodingPreset;
                    function deleteSubtitleLanguage(languageCultureCode) {
                        Settings.clientViewModel.subtitleLanguages.remove(languageCultureCode);
                    }
                    Settings.deleteSubtitleLanguage = deleteSubtitleLanguage;
                    function addNewSubtitleLanguage() {
                        Settings.clientViewModel.subtitleLanguages.push(new StringItem("Unnamed"));
                        $("#languages-table tbody:first-of-type tr:last-of-type td:nth-child(1) input").focus().select();
                    }
                    Settings.addNewSubtitleLanguage = addNewSubtitleLanguage;
                    $(function () {
                        $.each(initWamsEncodingPresets, function (presetIndex, preset) {
                            Settings.clientViewModel.wamsEncodingPresets.push(new EncodingPreset(preset.name, preset.customXml));
                        });
                        Settings.clientViewModel.defaultWamsEncodingPresetIndex(initDefaultWamsEncodingPresetIndex);
                        $.each(initSubtitleLanguages, function (languageIndex, languageCultureCode) {
                            Settings.clientViewModel.subtitleLanguages.push(new StringItem(languageCultureCode));
                        });
                        ko.applyBindings(Settings.clientViewModel);
                        var localStorage = window["localStorage"];
                        $("#tabs").tabs({
                            activate: function () {
                                if (localStorage && localStorage.setItem)
                                    localStorage.setItem("selectedCloudMediaSettingsTab", $("#tabs").tabs("option", "active"));
                            },
                            active: localStorage && localStorage.getItem ? localStorage.getItem("selectedCloudMediaSettingsTab") : null
                        }).show();
                    });
                })(Settings = Admin.Settings || (Admin.Settings = {}));
            })(Admin = MediaServices.Admin || (MediaServices.Admin = {}));
        })(MediaServices = Azure.MediaServices || (Azure.MediaServices = {}));
    })(Azure = Orchard.Azure || (Orchard.Azure = {}));
})(Orchard || (Orchard = {}));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsb3VkbWVkaWEtYWRtaW4tc2V0dGluZ3MudHMiXSwibmFtZXMiOlsiT3JjaGFyZCIsIk9yY2hhcmQuQXp1cmUiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4iLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuU3RyaW5nSXRlbSIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5TdHJpbmdJdGVtLmNvbnN0cnVjdG9yIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLkVuY29kaW5nUHJlc2V0IiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLkVuY29kaW5nUHJlc2V0LmNvbnN0cnVjdG9yIiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLkVuY29kaW5nUHJlc2V0LnRvZ2dsZSIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5BZG1pbi5TZXR0aW5ncy5kZWxldGVXYW1zRW5jb2RpbmdQcmVzZXQiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuYWRkTmV3V2Ftc0VuY29kaW5nUHJlc2V0IiwiT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLkFkbWluLlNldHRpbmdzLmRlbGV0ZVN1YnRpdGxlTGFuZ3VhZ2UiLCJPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3MuYWRkTmV3U3VidGl0bGVMYW5ndWFnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw0Q0FBNEM7QUFDNUMsOENBQThDO0FBQzlDLDhDQUE4QztBQU05QyxJQUFPLE9BQU8sQ0EwRmI7QUExRkQsV0FBTyxPQUFPO0lBQUNB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SUFBSSxVQUFVLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO3dCQUNoRixDQUFDLENBQUMsQ0FBQzt3QkFFSCxFQUFFLENBQUMsYUFBYSxDQUFDLHdCQUFlLENBQUMsQ0FBQzt3QkFFbEMsSUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO3dCQUMxQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDOzRCQUNaLFFBQVEsRUFBRTtnQ0FDTixFQUFFLENBQUMsQ0FBQyxZQUFZLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQztvQ0FDckMsWUFBWSxDQUFDLE9BQU8sQ0FBQywrQkFBK0IsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDOzRCQUNuRyxDQUFDOzRCQUNELE1BQU0sRUFBRSxZQUFZLElBQUksWUFBWSxDQUFDLE9BQU8sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLCtCQUErQixDQUFDLEdBQUcsSUFBSTt5QkFDOUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO29CQUNkLENBQUMsQ0FBQ0EsQ0FBQ0E7Z0JBQ1BBLENBQUNBLEVBMUZ3Q0QsUUFBUUEsR0FBUkEsY0FBUUEsS0FBUkEsY0FBUUEsUUEwRmhEQTtZQUFEQSxDQUFDQSxFQTFGa0NELEtBQUtBLEdBQUxBLG1CQUFLQSxLQUFMQSxtQkFBS0EsUUEwRnZDQTtRQUFEQSxDQUFDQSxFQTFGb0JELGFBQWFBLEdBQWJBLG1CQUFhQSxLQUFiQSxtQkFBYUEsUUEwRmpDQTtJQUFEQSxDQUFDQSxFQTFGY0QsS0FBS0EsR0FBTEEsYUFBS0EsS0FBTEEsYUFBS0EsUUEwRm5CQTtBQUFEQSxDQUFDQSxFQTFGTSxPQUFPLEtBQVAsT0FBTyxRQTBGYiIsImZpbGUiOiJjbG91ZG1lZGlhLWFkbWluLXNldHRpbmdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlR5cGluZ3MvanF1ZXJ5LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiVHlwaW5ncy9qcXVlcnl1aS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlR5cGluZ3Mva25vY2tvdXQuZC50c1wiIC8+XHJcblxyXG5kZWNsYXJlIHZhciBpbml0V2Ftc0VuY29kaW5nUHJlc2V0czogYW55W107XHJcbmRlY2xhcmUgdmFyIGluaXREZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXg6IG51bWJlcjtcclxuZGVjbGFyZSB2YXIgaW5pdFN1YnRpdGxlTGFuZ3VhZ2VzOiBzdHJpbmdbXTtcclxuXHJcbm1vZHVsZSBPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuQWRtaW4uU2V0dGluZ3Mge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdHJpbmdJdGVtIHtcclxuICAgICAgICBjb25zdHJ1Y3Rvcih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBrby5vYnNlcnZhYmxlKHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2YWx1ZTogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEVuY29kaW5nUHJlc2V0IHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGN1c3RvbVhtbDogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGtvLm9ic2VydmFibGUobmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tWG1sID0ga28ub2JzZXJ2YWJsZShjdXN0b21YbWwpO1xyXG4gICAgICAgICAgICB0aGlzLmlzRXhwYW5kZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1c3RvbVhtbDogc3RyaW5nID0gdGhpcy5jdXN0b21YbWwoKTtcclxuICAgICAgICAgICAgICAgIGlmICghIWN1c3RvbVhtbCAmJiBjdXN0b21YbWwubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJDdXN0b20gcHJlc2V0XCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJTdGFuZGFyZCBwcmVzZXRcIjtcclxuICAgICAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbmFtZTogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICAgICAgcHVibGljIGN1c3RvbVhtbDogS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICAgICAgcHVibGljIGlzRXhwYW5kZWQ6IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgICAgICBwdWJsaWMgdHlwZTogS25vY2tvdXRDb21wdXRlZDxzdHJpbmc+O1xyXG5cclxuICAgICAgICBwdWJsaWMgdG9nZ2xlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzRXhwYW5kZWQoIXRoaXMuaXNFeHBhbmRlZCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2xpZW50Vmlld01vZGVsIHtcclxuICAgICAgICB3YW1zRW5jb2RpbmdQcmVzZXRzOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxFbmNvZGluZ1ByZXNldD47XHJcbiAgICAgICAgZGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4OiBLbm9ja291dE9ic2VydmFibGU8bnVtYmVyPjtcclxuICAgICAgICBzdWJ0aXRsZUxhbmd1YWdlczogS25vY2tvdXRPYnNlcnZhYmxlQXJyYXk8U3RyaW5nSXRlbT47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHZhciBjbGllbnRWaWV3TW9kZWw6IElDbGllbnRWaWV3TW9kZWwgPSB7XHJcbiAgICAgICAgd2Ftc0VuY29kaW5nUHJlc2V0czoga28ub2JzZXJ2YWJsZUFycmF5PEVuY29kaW5nUHJlc2V0PigpLFxyXG4gICAgICAgIGRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleDoga28ub2JzZXJ2YWJsZTxudW1iZXI+KCksXHJcbiAgICAgICAgc3VidGl0bGVMYW5ndWFnZXM6IGtvLm9ic2VydmFibGVBcnJheTxTdHJpbmdJdGVtPigpXHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWxldGVXYW1zRW5jb2RpbmdQcmVzZXQocHJlc2V0OiBFbmNvZGluZ1ByZXNldCkge1xyXG4gICAgICAgIHZhciByZW1vdmVkSW5kZXggPSBjbGllbnRWaWV3TW9kZWwud2Ftc0VuY29kaW5nUHJlc2V0cy5pbmRleE9mKHByZXNldCk7XHJcbiAgICAgICAgY2xpZW50Vmlld01vZGVsLndhbXNFbmNvZGluZ1ByZXNldHMucmVtb3ZlKHByZXNldCk7XHJcbiAgICAgICAgaWYgKHJlbW92ZWRJbmRleCA9PT0gY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleCgpKVxyXG4gICAgICAgICAgICBjbGllbnRWaWV3TW9kZWwuZGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4KDApO1xyXG4gICAgICAgIGVsc2UgaWYgKHJlbW92ZWRJbmRleCA8IGNsaWVudFZpZXdNb2RlbC5kZWZhdWx0V2Ftc0VuY29kaW5nUHJlc2V0SW5kZXgoKSlcclxuICAgICAgICAgICAgY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleChjbGllbnRWaWV3TW9kZWwuZGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4KCkgLSAxKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWRkTmV3V2Ftc0VuY29kaW5nUHJlc2V0KCkge1xyXG4gICAgICAgIGNsaWVudFZpZXdNb2RlbC53YW1zRW5jb2RpbmdQcmVzZXRzLnB1c2gobmV3IEVuY29kaW5nUHJlc2V0KFwiVW5uYW1lZFwiLCBudWxsKSk7XHJcbiAgICAgICAgJChcIiNwcmVzZXRzLXRhYmxlIHRib2R5OmZpcnN0LW9mLXR5cGUgdHI6bGFzdC1vZi10eXBlIHRkOm50aC1jaGlsZCgyKSBpbnB1dFwiKS5mb2N1cygpLnNlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWxldGVTdWJ0aXRsZUxhbmd1YWdlKGxhbmd1YWdlQ3VsdHVyZUNvZGU6IFN0cmluZ0l0ZW0pIHtcclxuICAgICAgICBjbGllbnRWaWV3TW9kZWwuc3VidGl0bGVMYW5ndWFnZXMucmVtb3ZlKGxhbmd1YWdlQ3VsdHVyZUNvZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhZGROZXdTdWJ0aXRsZUxhbmd1YWdlKCkge1xyXG4gICAgICAgIGNsaWVudFZpZXdNb2RlbC5zdWJ0aXRsZUxhbmd1YWdlcy5wdXNoKG5ldyBTdHJpbmdJdGVtKFwiVW5uYW1lZFwiKSk7XHJcbiAgICAgICAgJChcIiNsYW5ndWFnZXMtdGFibGUgdGJvZHk6Zmlyc3Qtb2YtdHlwZSB0cjpsYXN0LW9mLXR5cGUgdGQ6bnRoLWNoaWxkKDEpIGlucHV0XCIpLmZvY3VzKCkuc2VsZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJC5lYWNoKGluaXRXYW1zRW5jb2RpbmdQcmVzZXRzLCBmdW5jdGlvbiAocHJlc2V0SW5kZXg6IG51bWJlciwgcHJlc2V0OiBhbnkpIHtcclxuICAgICAgICAgICAgY2xpZW50Vmlld01vZGVsLndhbXNFbmNvZGluZ1ByZXNldHMucHVzaChuZXcgRW5jb2RpbmdQcmVzZXQocHJlc2V0Lm5hbWUsIHByZXNldC5jdXN0b21YbWwpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xpZW50Vmlld01vZGVsLmRlZmF1bHRXYW1zRW5jb2RpbmdQcmVzZXRJbmRleChpbml0RGVmYXVsdFdhbXNFbmNvZGluZ1ByZXNldEluZGV4KTtcclxuXHJcbiAgICAgICAgJC5lYWNoKGluaXRTdWJ0aXRsZUxhbmd1YWdlcywgZnVuY3Rpb24gKGxhbmd1YWdlSW5kZXg6IG51bWJlciwgbGFuZ3VhZ2VDdWx0dXJlQ29kZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNsaWVudFZpZXdNb2RlbC5zdWJ0aXRsZUxhbmd1YWdlcy5wdXNoKG5ldyBTdHJpbmdJdGVtKGxhbmd1YWdlQ3VsdHVyZUNvZGUpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAga28uYXBwbHlCaW5kaW5ncyhjbGllbnRWaWV3TW9kZWwpO1xyXG5cclxuICAgICAgICB2YXIgbG9jYWxTdG9yYWdlID0gd2luZG93W1wibG9jYWxTdG9yYWdlXCJdO1xyXG4gICAgICAgICQoXCIjdGFic1wiKS50YWJzKHtcclxuICAgICAgICAgICAgYWN0aXZhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZWxlY3RlZENsb3VkTWVkaWFTZXR0aW5nc1RhYlwiLCAkKFwiI3RhYnNcIikudGFicyhcIm9wdGlvblwiLCBcImFjdGl2ZVwiKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFjdGl2ZTogbG9jYWxTdG9yYWdlICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZWxlY3RlZENsb3VkTWVkaWFTZXR0aW5nc1RhYlwiKSA6IG51bGxcclxuICAgICAgICB9KS5zaG93KCk7XHJcbiAgICB9KTtcclxufSJdfQ==
