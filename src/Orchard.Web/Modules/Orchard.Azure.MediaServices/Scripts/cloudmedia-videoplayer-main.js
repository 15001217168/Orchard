/// <reference path="Typings/jquery.d.ts" />
/// <reference path="Typings/underscore.d.ts" />
var Orchard;
(function (Orchard) {
    var Azure;
    (function (Azure) {
        var MediaServices;
        (function (MediaServices) {
            var VideoPlayer;
            (function (VideoPlayer) {
                var Injectors = Orchard.Azure.MediaServices.VideoPlayer.Injectors;
                $(function () {
                    $(".cloudmedia-videoplayer-container").each(function (index, elem) {
                        var container = elem;
                        var assetData = $(elem).data("cloudvideo-player-assetdata");
                        var playerWidth = $(elem).data("cloudvideo-player-width");
                        var playerHeight = $(elem).data("cloudvideo-player-height");
                        var applyMediaQueries = $(elem).data("cloudvideo-player-applymediaqueries");
                        var autoPlay = $(elem).data("cloudvideo-player-autoplay");
                        var contentBaseUrl = $(elem).data("cloudvideo-player-content-baseurl");
                        var errorText = $(elem).data("cloudvideo-player-errortext");
                        var altText = $(elem).data("cloudvideo-player-alttext");
                        var retryText = $(elem).data("cloudvideo-player-retrytext");
                        function invokeInjectors() {
                            $(container).empty();
                            var alternateContent = [
                                $("<span>").addClass("cloudvideo-player-error-text").text(errorText),
                                $("<button>").addClass("cloudvideo-player-retry-button").text(retryText).click(function () {
                                    invokeInjectors();
                                }),
                                $("<span>").addClass("cloudvideo-player-alt-text").text(altText)
                            ];
                            // Construct a chain of injectors (each will invoke the next on failure).
                            var altInjector = new Injectors.AltInjector(container, playerWidth, playerHeight, assetData, applyMediaQueries, true, null, alternateContent);
                            var html5Injector = new Injectors.Html5Injector(container, playerWidth, playerHeight, autoPlay, assetData, applyMediaQueries, true, altInjector);
                            var dashInjector = new Injectors.DashInjector(container, playerWidth, playerHeight, autoPlay, assetData, applyMediaQueries, true, html5Injector);
                            var smpInjector = new Injectors.SmpInjector(container, playerWidth, playerHeight, autoPlay, assetData, applyMediaQueries, true, dashInjector, contentBaseUrl);
                            var firstInjector = smpInjector;
                            firstInjector.invoke();
                        }
                        invokeInjectors();
                    });
                });
            })(VideoPlayer = MediaServices.VideoPlayer || (MediaServices.VideoPlayer = {}));
        })(MediaServices = Azure.MediaServices || (Azure.MediaServices = {}));
    })(Azure = Orchard.Azure || (Orchard.Azure = {}));
})(Orchard || (Orchard = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsb3VkbWVkaWEtdmlkZW9wbGF5ZXItbWFpbi50cyJdLCJuYW1lcyI6WyJPcmNoYXJkIiwiT3JjaGFyZC5BenVyZSIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcyIsIk9yY2hhcmQuQXp1cmUuTWVkaWFTZXJ2aWNlcy5WaWRlb1BsYXllciIsImludm9rZUluamVjdG9ycyJdLCJtYXBwaW5ncyI6IkFBQUEsNENBQTRDO0FBQzVDLGdEQUFnRDtBQUVoRCxJQUFPLE9BQU8sQ0E0Q2I7QUE1Q0QsV0FBTyxPQUFPO0lBQUNBLElBQUFBLEtBQUtBLENBNENuQkE7SUE1Q2NBLFdBQUFBLEtBQUtBO1FBQUNDLElBQUFBLGFBQWFBLENBNENqQ0E7UUE1Q29CQSxXQUFBQSxhQUFhQTtZQUFDQyxJQUFBQSxXQUFXQSxDQTRDN0NBO1lBNUNrQ0EsV0FBQUEsV0FBV0EsRUFBQ0EsQ0FBQ0E7Z0JBRzVDQyxJQUFPQSxTQUFTQSxHQUFHQSxPQUFPQSxDQUFDQSxLQUFLQSxDQUFDQSxhQUFhQSxDQUFDQSxXQUFXQSxDQUFDQSxTQUFTQSxDQUFDQTtnQkFFckVBLENBQUNBLENBQUNBO29CQUNFLENBQUMsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEtBQUssRUFBRSxJQUFJO3dCQUM3RCxJQUFJLFNBQVMsR0FBZ0IsSUFBSSxDQUFDO3dCQUVsQyxJQUFJLFNBQVMsR0FBb0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO3dCQUM3RSxJQUFJLFdBQVcsR0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7d0JBQ2xFLElBQUksWUFBWSxHQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQzt3QkFDcEUsSUFBSSxpQkFBaUIsR0FBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxD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QUFLQSxLQUFMQSxhQUFLQSxRQTRDbkJBO0FBQURBLENBQUNBLEVBNUNNLE9BQU8sS0FBUCxPQUFPLFFBNENiIiwiZmlsZSI6ImNsb3VkbWVkaWEtdmlkZW9wbGF5ZXItbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUeXBpbmdzL2pxdWVyeS5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUeXBpbmdzL3VuZGVyc2NvcmUuZC50c1wiIC8+XG5cbm1vZHVsZSBPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuVmlkZW9QbGF5ZXIge1xuXG4gICAgaW1wb3J0IERhdGEgPSBPcmNoYXJkLkF6dXJlLk1lZGlhU2VydmljZXMuVmlkZW9QbGF5ZXIuRGF0YTtcbiAgICBpbXBvcnQgSW5qZWN0b3JzID0gT3JjaGFyZC5BenVyZS5NZWRpYVNlcnZpY2VzLlZpZGVvUGxheWVyLkluamVjdG9ycztcblxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiLmNsb3VkbWVkaWEtdmlkZW9wbGF5ZXItY29udGFpbmVyXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gPEhUTUxFbGVtZW50PmVsZW07XG5cbiAgICAgICAgICAgIHZhciBhc3NldERhdGE6IERhdGEuSUFzc2V0RGF0YSA9ICQoZWxlbSkuZGF0YShcImNsb3VkdmlkZW8tcGxheWVyLWFzc2V0ZGF0YVwiKTtcbiAgICAgICAgICAgIHZhciBwbGF5ZXJXaWR0aDogbnVtYmVyID0gJChlbGVtKS5kYXRhKFwiY2xvdWR2aWRlby1wbGF5ZXItd2lkdGhcIik7XG4gICAgICAgICAgICB2YXIgcGxheWVySGVpZ2h0OiBudW1iZXIgPSAkKGVsZW0pLmRhdGEoXCJjbG91ZHZpZGVvLXBsYXllci1oZWlnaHRcIik7XG4gICAgICAgICAgICB2YXIgYXBwbHlNZWRpYVF1ZXJpZXM6IGJvb2xlYW4gPSAkKGVsZW0pLmRhdGEoXCJjbG91ZHZpZGVvLXBsYXllci1hcHBseW1lZGlhcXVlcmllc1wiKTtcbiAgICAgICAgICAgIHZhciBhdXRvUGxheTogYm9vbGVhbiA9ICQoZWxlbSkuZGF0YShcImNsb3VkdmlkZW8tcGxheWVyLWF1dG9wbGF5XCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRCYXNlVXJsOiBzdHJpbmcgPSAkKGVsZW0pLmRhdGEoXCJjbG91ZHZpZGVvLXBsYXllci1jb250ZW50LWJhc2V1cmxcIik7XG4gICAgICAgICAgICB2YXIgZXJyb3JUZXh0OiBzdHJpbmcgPSAkKGVsZW0pLmRhdGEoXCJjbG91ZHZpZGVvLXBsYXllci1lcnJvcnRleHRcIik7XG4gICAgICAgICAgICB2YXIgYWx0VGV4dDogc3RyaW5nID0gJChlbGVtKS5kYXRhKFwiY2xvdWR2aWRlby1wbGF5ZXItYWx0dGV4dFwiKTtcbiAgICAgICAgICAgIHZhciByZXRyeVRleHQ6IHN0cmluZyA9ICQoZWxlbSkuZGF0YShcImNsb3VkdmlkZW8tcGxheWVyLXJldHJ5dGV4dFwiKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaW52b2tlSW5qZWN0b3JzKCkge1xuXG4gICAgICAgICAgICAgICAgJChjb250YWluZXIpLmVtcHR5KCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYWx0ZXJuYXRlQ29udGVudCA9IFtcbiAgICAgICAgICAgICAgICAgICAgJChcIjxzcGFuPlwiKS5hZGRDbGFzcyhcImNsb3VkdmlkZW8tcGxheWVyLWVycm9yLXRleHRcIikudGV4dChlcnJvclRleHQpLFxuICAgICAgICAgICAgICAgICAgICAkKFwiPGJ1dHRvbj5cIikuYWRkQ2xhc3MoXCJjbG91ZHZpZGVvLXBsYXllci1yZXRyeS1idXR0b25cIikudGV4dChyZXRyeVRleHQpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludm9rZUluamVjdG9ycygpO1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgJChcIjxzcGFuPlwiKS5hZGRDbGFzcyhcImNsb3VkdmlkZW8tcGxheWVyLWFsdC10ZXh0XCIpLnRleHQoYWx0VGV4dClcbiAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uc3RydWN0IGEgY2hhaW4gb2YgaW5qZWN0b3JzIChlYWNoIHdpbGwgaW52b2tlIHRoZSBuZXh0IG9uIGZhaWx1cmUpLlxuICAgICAgICAgICAgICAgIHZhciBhbHRJbmplY3RvciA9IG5ldyBJbmplY3RvcnMuQWx0SW5qZWN0b3IoY29udGFpbmVyLCBwbGF5ZXJXaWR0aCwgcGxheWVySGVpZ2h0LCBhc3NldERhdGEsIGFwcGx5TWVkaWFRdWVyaWVzLCB0cnVlLCBudWxsLCBhbHRlcm5hdGVDb250ZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbDVJbmplY3RvciA9IG5ldyBJbmplY3RvcnMuSHRtbDVJbmplY3Rvcihjb250YWluZXIsIHBsYXllcldpZHRoLCBwbGF5ZXJIZWlnaHQsIGF1dG9QbGF5LCBhc3NldERhdGEsIGFwcGx5TWVkaWFRdWVyaWVzLCB0cnVlLCBhbHRJbmplY3Rvcik7XG4gICAgICAgICAgICAgICAgdmFyIGRhc2hJbmplY3RvciA9IG5ldyBJbmplY3RvcnMuRGFzaEluamVjdG9yKGNvbnRhaW5lciwgcGxheWVyV2lkdGgsIHBsYXllckhlaWdodCwgYXV0b1BsYXksIGFzc2V0RGF0YSwgYXBwbHlNZWRpYVF1ZXJpZXMsIHRydWUsIGh0bWw1SW5qZWN0b3IpO1xuICAgICAgICAgICAgICAgIHZhciBzbXBJbmplY3RvciA9IG5ldyBJbmplY3RvcnMuU21wSW5qZWN0b3IoY29udGFpbmVyLCBwbGF5ZXJXaWR0aCwgcGxheWVySGVpZ2h0LCBhdXRvUGxheSwgYXNzZXREYXRhLCBhcHBseU1lZGlhUXVlcmllcywgdHJ1ZSwgZGFzaEluamVjdG9yLCBjb250ZW50QmFzZVVybCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RJbmplY3RvcjogSW5qZWN0b3JzLkluamVjdG9yID0gc21wSW5qZWN0b3I7XG4gICAgICAgICAgICAgICAgZmlyc3RJbmplY3Rvci5pbnZva2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW52b2tlSW5qZWN0b3JzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==