@using Orchard.Utility.Extensions;
@using Orchard.Widgets.Models;
@{
    Style.Require("WidgetsAdmin");
    Script.Require("Switchable");
    Style.Require("Switchable");
    IEnumerable<LayerPart> layers = Model.Layers;
    var returnUrl = Request.RawUrl;
}
<div id="widgets-layers-control" class="widgets-container">
    @if (layers.Count() > 0) {
        using (Html.BeginForm("index", "admin", FormMethod.Get, new {area = "Orchard.Widgets"})) {
            <fieldset class="bulk-actions-auto">
                <label for="layerId">@T("Current Layer:")</label>
                <select id="layerId" name="layerId">
                    @foreach (var layer in layers) {
                        @Html.SelectOption((int)Model.CurrentLayer.Id, (int)layer.Id, (string)layer.Name)
                    }
                </select>
                <button type="submit" class="apply-bulk-actions-auto">@T("Show")</button>
                @Display.Link(Value: T("Edit"), RouteValues: new { Action = "EditLayer", Controller = "Admin", Area = "Orchard.Widgets", id = Model.CurrentLayer.Id, returnUrl }, Classes: "button")
            </fieldset>
        }
    }
    <div id="widgets-layer-add">
        @Display.Link(Value: T("Add a new layer..."), RouteValues: new { Action = "AddLayer", Controller = "Admin", Area = "Orchard.Widgets", returnUrl })
    </div>
</div>